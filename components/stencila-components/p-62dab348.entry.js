import{r as e,f as s,h as i,e as o,c as t}from"./p-42c7aa22.js";import{c}from"./p-4f726865.js";import{C as n}from"./p-67145afc.js";import{i as r}from"./p-6224b0c6.js";import{f as a,a as l}from"./p-f10a134c.js";import{L as d}from"./p-128435b3.js";const p=".sc-stencila-code-expression-default-h,stencila-code-expression.sc-stencila-code-expression-default{--background:var(--color-neutral-50,#edf2f7);--background-editor:var(--color-stock,#fff);--background-output:var(--color-stock,#fff);--border:var(--color-neutral-100,#e2e8f0);-ms-flex-align:center;align-items:center;background-color:var(--background);border-color:var(--border);border-radius:.25rem;border-style:solid;border-width:1px;display:-ms-inline-flexbox;display:inline-flex;font-size:.875rem;line-height:1.25rem;line-height:1;padding:0;position:relative;vertical-align:text-bottom}.sc-stencila-code-expression-default-h stencila-tooltip.sc-stencila-code-expression-default,stencila-code-expression.sc-stencila-code-expression-default stencila-tooltip.sc-stencila-code-expression-default{-ms-flex-align:stretch;align-items:stretch;display:-ms-inline-flexbox;display:inline-flex;line-height:1;overflow:hidden;padding:0;vertical-align:bottom}.sc-stencila-code-expression-default-h .actions.sc-stencila-code-expression-default,stencila-code-expression.sc-stencila-code-expression-default .actions.sc-stencila-code-expression-default{border-bottom-left-radius:.25rem;border-top-left-radius:.25rem;display:-ms-inline-flexbox;display:inline-flex;-ms-flex:0 1 auto;flex:0 1 auto;position:relative;white-space:nowrap}.sc-stencila-code-expression-default-h .actions.sc-stencila-code-expression-default stencila-button.sc-stencila-code-expression-default,stencila-code-expression.sc-stencila-code-expression-default .actions.sc-stencila-code-expression-default stencila-button.sc-stencila-code-expression-default{-ms-flex-align:stretch;align-items:stretch;-ms-flex-item-align:start;align-self:flex-start;cursor:default;display:-ms-inline-flexbox;display:inline-flex;-ms-flex-negative:0;flex-shrink:0;overflow:hidden;-webkit-transition-duration:.15s;transition-duration:.15s;-webkit-transition-property:color,background-color,border-color,fill,stroke,opacity,-webkit-text-decoration-color,-webkit-box-shadow,-webkit-transform,-webkit-filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,fill,stroke,opacity,-webkit-text-decoration-color,-webkit-box-shadow,-webkit-transform,-webkit-filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-text-decoration-color,-webkit-box-shadow,-webkit-transform,-webkit-filter,-webkit-backdrop-filter;-webkit-transition-property:padding,width,max-width;transition-property:padding,width,max-width;-webkit-transition-timing-function:cubic-bezier(.4,0,.2,1);transition-timing-function:cubic-bezier(.4,0,.2,1);-webkit-transition-timing-function:cubic-bezier(0,0,.2,1);transition-timing-function:cubic-bezier(0,0,.2,1)}.sc-stencila-code-expression-default-h .actions.sc-stencila-code-expression-default .secondaryAction.sc-stencila-code-expression-default,stencila-code-expression.sc-stencila-code-expression-default .actions.sc-stencila-code-expression-default .secondaryAction.sc-stencila-code-expression-default{cursor:default;display:inline-block;overflow:hidden;-webkit-transition-duration:.15s;transition-duration:.15s;-webkit-transition-property:color,background-color,border-color,fill,stroke,opacity,-webkit-text-decoration-color,-webkit-box-shadow,-webkit-transform,-webkit-filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,fill,stroke,opacity,-webkit-text-decoration-color,-webkit-box-shadow,-webkit-transform,-webkit-filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-text-decoration-color,-webkit-box-shadow,-webkit-transform,-webkit-filter,-webkit-backdrop-filter;-webkit-transition-timing-function:cubic-bezier(.4,0,.2,1);transition-timing-function:cubic-bezier(.4,0,.2,1);-webkit-transition-timing-function:cubic-bezier(0,0,.2,1);transition-timing-function:cubic-bezier(0,0,.2,1);width:0}.hover.sc-stencila-code-expression-default-h .actions.sc-stencila-code-expression-default .secondaryAction.sc-stencila-code-expression-default,.isCodeVisible.sc-stencila-code-expression-default-h .actions.sc-stencila-code-expression-default .secondaryAction.sc-stencila-code-expression-default,.sc-stencila-code-expression-default-h:focus .actions.sc-stencila-code-expression-default .secondaryAction.sc-stencila-code-expression-default,.sc-stencila-code-expression-default-h:focus-within .actions.sc-stencila-code-expression-default .secondaryAction.sc-stencila-code-expression-default,.sc-stencila-code-expression-default-h:hover .actions.sc-stencila-code-expression-default .secondaryAction.sc-stencila-code-expression-default,stencila-code-expression.hover.sc-stencila-code-expression-default .actions.sc-stencila-code-expression-default .secondaryAction.sc-stencila-code-expression-default,stencila-code-expression.isCodeVisible.sc-stencila-code-expression-default .actions.sc-stencila-code-expression-default .secondaryAction.sc-stencila-code-expression-default,stencila-code-expression.sc-stencila-code-expression-default:focus .actions.sc-stencila-code-expression-default .secondaryAction.sc-stencila-code-expression-default,stencila-code-expression.sc-stencila-code-expression-default:focus-within .actions.sc-stencila-code-expression-default .secondaryAction.sc-stencila-code-expression-default,stencila-code-expression.sc-stencila-code-expression-default:hover .actions.sc-stencila-code-expression-default .secondaryAction.sc-stencila-code-expression-default{display:-ms-inline-flexbox;display:inline-flex;max-width:100%;width:1.25rem}.sc-stencila-code-expression-default-h .executeStatus.sc-stencila-code-expression-default,stencila-code-expression.sc-stencila-code-expression-default .executeStatus.sc-stencila-code-expression-default{--height:0.875rem;--width:0.875rem;cursor:pointer;padding:.25rem}.sc-stencila-code-expression-default-h .executeStatus.scheduled.sc-stencila-code-expression-default,stencila-code-expression.sc-stencila-code-expression-default .executeStatus.scheduled.sc-stencila-code-expression-default{cursor:wait}.sc-stencila-code-expression-default-h .text.sc-stencila-code-expression-default,stencila-code-expression.sc-stencila-code-expression-default .text.sc-stencila-code-expression-default{background-color:var(--background-editor);border-color:var(--border);color:#4a4a4a;color:var(--color-key,#4a4a4a);display:inline-block;font-family:monospace;font-family:var(--font-family-mono,monospace);font-size:.875rem;line-height:1.25rem;line-height:1;min-width:0;overflow:hidden;padding:0;-webkit-transition-duration:.15s;transition-duration:.15s;-webkit-transition-property:width;transition-property:width;-webkit-transition-timing-function:cubic-bezier(0,0,.2,1);transition-timing-function:cubic-bezier(0,0,.2,1);white-space:nowrap;width:0}.isCodeVisible.sc-stencila-code-expression-default-h .text.sc-stencila-code-expression-default,stencila-code-expression.isCodeVisible.sc-stencila-code-expression-default .text.sc-stencila-code-expression-default{border-radius:.25rem;border-width:1px;display:inline-block;margin-right:.25rem;min-width:1em;padding:.25rem .5rem;white-space:pre-line;width:auto}.sc-stencila-code-expression-default-h .sc-stencila-code-expression-default-s>[slot=errors],.sc-stencila-code-expression-default-h [slot=errors].sc-stencila-code-expression-default,stencila-code-expression.sc-stencila-code-expression-default-s>[slot=errors],stencila-code-expression .sc-stencila-code-expression-default-s>[slot=errors],stencila-code-expression.sc-stencila-code-expression-default [slot=errors].sc-stencila-code-expression-default{display:none}.sc-stencila-code-expression-default-h .sc-stencila-code-expression-default-s>[slot=errors] stencila-code-error,.sc-stencila-code-expression-default-h [slot=errors].sc-stencila-code-expression-default stencila-code-error.sc-stencila-code-expression-default,stencila-code-expression.sc-stencila-code-expression-default-s>[slot=errors] stencila-code-error,stencila-code-expression .sc-stencila-code-expression-default-s>[slot=errors] stencila-code-error,stencila-code-expression.sc-stencila-code-expression-default [slot=errors].sc-stencila-code-expression-default stencila-code-error.sc-stencila-code-expression-default{background:none;border-style:none;font-family:monospace;font-family:var(--font-family-mono,monospace);font-size:.875rem;line-height:1.25rem;line-height:1.5;padding:0}.sc-stencila-code-expression-default-h .sc-stencila-code-expression-default-s>[slot=errors] stencila-code-error stencila-details,.sc-stencila-code-expression-default-h .sc-stencila-code-expression-default-s>[slot=errors] stencila-code-error stencila-icon,.sc-stencila-code-expression-default-h [slot=errors].sc-stencila-code-expression-default stencila-code-error.sc-stencila-code-expression-default stencila-details.sc-stencila-code-expression-default,.sc-stencila-code-expression-default-h [slot=errors].sc-stencila-code-expression-default stencila-code-error.sc-stencila-code-expression-default stencila-icon.sc-stencila-code-expression-default,stencila-code-expression.sc-stencila-code-expression-default-s>[slot=errors] stencila-code-error stencila-details,stencila-code-expression .sc-stencila-code-expression-default-s>[slot=errors] stencila-code-error stencila-details,stencila-code-expression.sc-stencila-code-expression-default-s>[slot=errors] stencila-code-error stencila-icon,stencila-code-expression .sc-stencila-code-expression-default-s>[slot=errors] stencila-code-error stencila-icon,stencila-code-expression.sc-stencila-code-expression-default [slot=errors].sc-stencila-code-expression-default stencila-code-error.sc-stencila-code-expression-default stencila-details.sc-stencila-code-expression-default,stencila-code-expression.sc-stencila-code-expression-default [slot=errors].sc-stencila-code-expression-default stencila-code-error.sc-stencila-code-expression-default stencila-icon.sc-stencila-code-expression-default{display:none}.sc-stencila-code-expression-default-h.isCodeVisible .sc-stencila-code-expression-default-s>[slot=errors],.isCodeVisible.sc-stencila-code-expression-default-h [slot=errors].sc-stencila-code-expression-default,stencila-code-expression.isCodeVisible.sc-stencila-code-expression-default-s>[slot=errors],stencila-code-expression.isCodeVisible .sc-stencila-code-expression-default-s>[slot=errors],stencila-code-expression.isCodeVisible.sc-stencila-code-expression-default [slot=errors].sc-stencila-code-expression-default{display:inline-block}.sc-stencila-code-expression-default-h .divider.sc-stencila-code-expression-default,stencila-code-expression.sc-stencila-code-expression-default .divider.sc-stencila-code-expression-default{fill:var(--background);-ms-flex-item-align:center;align-self:center;background-color:var(--background-output);display:inline-block;display:none;width:.5rem}.isCodeVisible.sc-stencila-code-expression-default-h .divider.sc-stencila-code-expression-default,stencila-code-expression.isCodeVisible.sc-stencila-code-expression-default .divider.sc-stencila-code-expression-default{display:inline-block}.sc-stencila-code-expression-default-h .sc-stencila-code-expression-default-s>[slot=output],.sc-stencila-code-expression-default-h [slot=output].sc-stencila-code-expression-default,stencila-code-expression.sc-stencila-code-expression-default-s>[slot=output],stencila-code-expression .sc-stencila-code-expression-default-s>[slot=output],stencila-code-expression.sc-stencila-code-expression-default [slot=output].sc-stencila-code-expression-default{background-color:#fff;background-color:var(--color-stock,#fff);background-color:var(--background-output);border-style:none;color:#4a4a4a;color:var(--color-key,#4a4a4a);display:inline-block;font-size:1rem;line-height:1.5rem;line-height:1.5;margin:0;padding:0 .25rem 0 .5rem;-webkit-transition:padding .12s ease-out;transition:padding .12s ease-out;white-space:normal}.sc-stencila-code-expression-default-h .sc-stencila-code-expression-default-s>[slot=output]:empty,.sc-stencila-code-expression-default-h [slot=output].sc-stencila-code-expression-default:empty,stencila-code-expression.sc-stencila-code-expression-default-s>[slot=output]:empty,stencila-code-expression .sc-stencila-code-expression-default-s>[slot=output]:empty,stencila-code-expression.sc-stencila-code-expression-default [slot=output].sc-stencila-code-expression-default:empty{display:none}.sc-stencila-code-expression-default-h .sc-stencila-code-expression-default-s>[slot=output] *,.sc-stencila-code-expression-default-h [slot=output].sc-stencila-code-expression-default *.sc-stencila-code-expression-default,stencila-code-expression.sc-stencila-code-expression-default-s>[slot=output] *,stencila-code-expression .sc-stencila-code-expression-default-s>[slot=output] *,stencila-code-expression.sc-stencila-code-expression-default [slot=output].sc-stencila-code-expression-default *.sc-stencila-code-expression-default{background-color:#fff;background-color:var(--color-stock,#fff);border-style:none;color:#4a4a4a;color:var(--color-key,#4a4a4a);display:inline;font-size:1rem;line-height:1.5rem;line-height:1.5;margin:0;padding:0;white-space:normal}";const x=".sc-stencila-code-expression-material-h,stencila-code-expression.sc-stencila-code-expression-material{--background:var(--color-neutral-50,#edf2f7);--background-editor:var(--color-stock,#fff);--background-output:var(--color-stock,#fff);--border:var(--color-neutral-100,#e2e8f0);-ms-flex-align:center;align-items:center;background-color:var(--background);border-color:var(--border);border-radius:.25rem;border-style:solid;border-width:1px;display:-ms-inline-flexbox;display:inline-flex;font-size:.875rem;line-height:1.25rem;line-height:1;padding:0;position:relative;vertical-align:text-bottom}.sc-stencila-code-expression-material-h stencila-tooltip.sc-stencila-code-expression-material,stencila-code-expression.sc-stencila-code-expression-material stencila-tooltip.sc-stencila-code-expression-material{-ms-flex-align:stretch;align-items:stretch;display:-ms-inline-flexbox;display:inline-flex;line-height:1;overflow:hidden;padding:0;vertical-align:bottom}.sc-stencila-code-expression-material-h .actions.sc-stencila-code-expression-material,stencila-code-expression.sc-stencila-code-expression-material .actions.sc-stencila-code-expression-material{border-bottom-left-radius:.25rem;border-top-left-radius:.25rem;display:-ms-inline-flexbox;display:inline-flex;-ms-flex:0 1 auto;flex:0 1 auto;position:relative;white-space:nowrap}.sc-stencila-code-expression-material-h .actions.sc-stencila-code-expression-material stencila-button.sc-stencila-code-expression-material,stencila-code-expression.sc-stencila-code-expression-material .actions.sc-stencila-code-expression-material stencila-button.sc-stencila-code-expression-material{-ms-flex-align:stretch;align-items:stretch;-ms-flex-item-align:start;align-self:flex-start;cursor:default;display:-ms-inline-flexbox;display:inline-flex;-ms-flex-negative:0;flex-shrink:0;overflow:hidden;-webkit-transition-duration:.15s;transition-duration:.15s;-webkit-transition-property:color,background-color,border-color,fill,stroke,opacity,-webkit-text-decoration-color,-webkit-box-shadow,-webkit-transform,-webkit-filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,fill,stroke,opacity,-webkit-text-decoration-color,-webkit-box-shadow,-webkit-transform,-webkit-filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-text-decoration-color,-webkit-box-shadow,-webkit-transform,-webkit-filter,-webkit-backdrop-filter;-webkit-transition-property:padding,width,max-width;transition-property:padding,width,max-width;-webkit-transition-timing-function:cubic-bezier(.4,0,.2,1);transition-timing-function:cubic-bezier(.4,0,.2,1);-webkit-transition-timing-function:cubic-bezier(0,0,.2,1);transition-timing-function:cubic-bezier(0,0,.2,1)}.sc-stencila-code-expression-material-h .actions.sc-stencila-code-expression-material .secondaryAction.sc-stencila-code-expression-material,stencila-code-expression.sc-stencila-code-expression-material .actions.sc-stencila-code-expression-material .secondaryAction.sc-stencila-code-expression-material{cursor:default;display:inline-block;overflow:hidden;-webkit-transition-duration:.15s;transition-duration:.15s;-webkit-transition-property:color,background-color,border-color,fill,stroke,opacity,-webkit-text-decoration-color,-webkit-box-shadow,-webkit-transform,-webkit-filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,fill,stroke,opacity,-webkit-text-decoration-color,-webkit-box-shadow,-webkit-transform,-webkit-filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-text-decoration-color,-webkit-box-shadow,-webkit-transform,-webkit-filter,-webkit-backdrop-filter;-webkit-transition-timing-function:cubic-bezier(.4,0,.2,1);transition-timing-function:cubic-bezier(.4,0,.2,1);-webkit-transition-timing-function:cubic-bezier(0,0,.2,1);transition-timing-function:cubic-bezier(0,0,.2,1);width:0}.hover.sc-stencila-code-expression-material-h .actions.sc-stencila-code-expression-material .secondaryAction.sc-stencila-code-expression-material,.isCodeVisible.sc-stencila-code-expression-material-h .actions.sc-stencila-code-expression-material .secondaryAction.sc-stencila-code-expression-material,.sc-stencila-code-expression-material-h:focus .actions.sc-stencila-code-expression-material .secondaryAction.sc-stencila-code-expression-material,.sc-stencila-code-expression-material-h:focus-within .actions.sc-stencila-code-expression-material .secondaryAction.sc-stencila-code-expression-material,.sc-stencila-code-expression-material-h:hover .actions.sc-stencila-code-expression-material .secondaryAction.sc-stencila-code-expression-material,stencila-code-expression.hover.sc-stencila-code-expression-material .actions.sc-stencila-code-expression-material .secondaryAction.sc-stencila-code-expression-material,stencila-code-expression.isCodeVisible.sc-stencila-code-expression-material .actions.sc-stencila-code-expression-material .secondaryAction.sc-stencila-code-expression-material,stencila-code-expression.sc-stencila-code-expression-material:focus .actions.sc-stencila-code-expression-material .secondaryAction.sc-stencila-code-expression-material,stencila-code-expression.sc-stencila-code-expression-material:focus-within .actions.sc-stencila-code-expression-material .secondaryAction.sc-stencila-code-expression-material,stencila-code-expression.sc-stencila-code-expression-material:hover .actions.sc-stencila-code-expression-material .secondaryAction.sc-stencila-code-expression-material{display:-ms-inline-flexbox;display:inline-flex;max-width:100%;width:1.25rem}.sc-stencila-code-expression-material-h .executeStatus.sc-stencila-code-expression-material,stencila-code-expression.sc-stencila-code-expression-material .executeStatus.sc-stencila-code-expression-material{--height:0.875rem;--width:0.875rem;cursor:pointer;padding:.25rem}.sc-stencila-code-expression-material-h .executeStatus.scheduled.sc-stencila-code-expression-material,stencila-code-expression.sc-stencila-code-expression-material .executeStatus.scheduled.sc-stencila-code-expression-material{cursor:wait}.sc-stencila-code-expression-material-h .text.sc-stencila-code-expression-material,stencila-code-expression.sc-stencila-code-expression-material .text.sc-stencila-code-expression-material{background-color:var(--background-editor);border-color:var(--border);color:#4a4a4a;color:var(--color-key,#4a4a4a);display:inline-block;font-family:monospace;font-family:var(--font-family-mono,monospace);font-size:.875rem;line-height:1.25rem;line-height:1;min-width:0;overflow:hidden;padding:0;-webkit-transition-duration:.15s;transition-duration:.15s;-webkit-transition-property:width;transition-property:width;-webkit-transition-timing-function:cubic-bezier(0,0,.2,1);transition-timing-function:cubic-bezier(0,0,.2,1);white-space:nowrap;width:0}.isCodeVisible.sc-stencila-code-expression-material-h .text.sc-stencila-code-expression-material,stencila-code-expression.isCodeVisible.sc-stencila-code-expression-material .text.sc-stencila-code-expression-material{border-radius:.25rem;border-width:1px;display:inline-block;margin-right:.25rem;min-width:1em;padding:.25rem .5rem;white-space:pre-line;width:auto}.sc-stencila-code-expression-material-h .sc-stencila-code-expression-material-s>[slot=errors],.sc-stencila-code-expression-material-h [slot=errors].sc-stencila-code-expression-material,stencila-code-expression.sc-stencila-code-expression-material-s>[slot=errors],stencila-code-expression .sc-stencila-code-expression-material-s>[slot=errors],stencila-code-expression.sc-stencila-code-expression-material [slot=errors].sc-stencila-code-expression-material{display:none}.sc-stencila-code-expression-material-h .sc-stencila-code-expression-material-s>[slot=errors] stencila-code-error,.sc-stencila-code-expression-material-h [slot=errors].sc-stencila-code-expression-material stencila-code-error.sc-stencila-code-expression-material,stencila-code-expression.sc-stencila-code-expression-material-s>[slot=errors] stencila-code-error,stencila-code-expression .sc-stencila-code-expression-material-s>[slot=errors] stencila-code-error,stencila-code-expression.sc-stencila-code-expression-material [slot=errors].sc-stencila-code-expression-material stencila-code-error.sc-stencila-code-expression-material{background:none;border-style:none;font-family:monospace;font-family:var(--font-family-mono,monospace);font-size:.875rem;line-height:1.25rem;line-height:1.5;padding:0}.sc-stencila-code-expression-material-h .sc-stencila-code-expression-material-s>[slot=errors] stencila-code-error stencila-details,.sc-stencila-code-expression-material-h .sc-stencila-code-expression-material-s>[slot=errors] stencila-code-error stencila-icon,.sc-stencila-code-expression-material-h [slot=errors].sc-stencila-code-expression-material stencila-code-error.sc-stencila-code-expression-material stencila-details.sc-stencila-code-expression-material,.sc-stencila-code-expression-material-h [slot=errors].sc-stencila-code-expression-material stencila-code-error.sc-stencila-code-expression-material stencila-icon.sc-stencila-code-expression-material,stencila-code-expression.sc-stencila-code-expression-material-s>[slot=errors] stencila-code-error stencila-details,stencila-code-expression .sc-stencila-code-expression-material-s>[slot=errors] stencila-code-error stencila-details,stencila-code-expression.sc-stencila-code-expression-material-s>[slot=errors] stencila-code-error stencila-icon,stencila-code-expression .sc-stencila-code-expression-material-s>[slot=errors] stencila-code-error stencila-icon,stencila-code-expression.sc-stencila-code-expression-material [slot=errors].sc-stencila-code-expression-material stencila-code-error.sc-stencila-code-expression-material stencila-details.sc-stencila-code-expression-material,stencila-code-expression.sc-stencila-code-expression-material [slot=errors].sc-stencila-code-expression-material stencila-code-error.sc-stencila-code-expression-material stencila-icon.sc-stencila-code-expression-material{display:none}.sc-stencila-code-expression-material-h.isCodeVisible .sc-stencila-code-expression-material-s>[slot=errors],.isCodeVisible.sc-stencila-code-expression-material-h [slot=errors].sc-stencila-code-expression-material,stencila-code-expression.isCodeVisible.sc-stencila-code-expression-material-s>[slot=errors],stencila-code-expression.isCodeVisible .sc-stencila-code-expression-material-s>[slot=errors],stencila-code-expression.isCodeVisible.sc-stencila-code-expression-material [slot=errors].sc-stencila-code-expression-material{display:inline-block}.sc-stencila-code-expression-material-h .divider.sc-stencila-code-expression-material,stencila-code-expression.sc-stencila-code-expression-material .divider.sc-stencila-code-expression-material{fill:var(--background);-ms-flex-item-align:center;align-self:center;background-color:var(--background-output);display:inline-block;display:none;width:.5rem}.isCodeVisible.sc-stencila-code-expression-material-h .divider.sc-stencila-code-expression-material,stencila-code-expression.isCodeVisible.sc-stencila-code-expression-material .divider.sc-stencila-code-expression-material{display:inline-block}.sc-stencila-code-expression-material-h .sc-stencila-code-expression-material-s>[slot=output],.sc-stencila-code-expression-material-h [slot=output].sc-stencila-code-expression-material,stencila-code-expression.sc-stencila-code-expression-material-s>[slot=output],stencila-code-expression .sc-stencila-code-expression-material-s>[slot=output],stencila-code-expression.sc-stencila-code-expression-material [slot=output].sc-stencila-code-expression-material{background-color:#fff;background-color:var(--color-stock,#fff);background-color:var(--background-output);border-style:none;color:#4a4a4a;color:var(--color-key,#4a4a4a);display:inline-block;font-size:1rem;line-height:1.5rem;line-height:1.5;margin:0;padding:0 .25rem 0 .5rem;-webkit-transition:padding .12s ease-out;transition:padding .12s ease-out;white-space:normal}.sc-stencila-code-expression-material-h .sc-stencila-code-expression-material-s>[slot=output]:empty,.sc-stencila-code-expression-material-h [slot=output].sc-stencila-code-expression-material:empty,stencila-code-expression.sc-stencila-code-expression-material-s>[slot=output]:empty,stencila-code-expression .sc-stencila-code-expression-material-s>[slot=output]:empty,stencila-code-expression.sc-stencila-code-expression-material [slot=output].sc-stencila-code-expression-material:empty{display:none}.sc-stencila-code-expression-material-h .sc-stencila-code-expression-material-s>[slot=output] *,.sc-stencila-code-expression-material-h [slot=output].sc-stencila-code-expression-material *.sc-stencila-code-expression-material,stencila-code-expression.sc-stencila-code-expression-material-s>[slot=output] *,stencila-code-expression .sc-stencila-code-expression-material-s>[slot=output] *,stencila-code-expression.sc-stencila-code-expression-material [slot=output].sc-stencila-code-expression-material *.sc-stencila-code-expression-material{background-color:#fff;background-color:var(--color-stock,#fff);border-style:none;color:#4a4a4a;color:var(--color-key,#4a4a4a);display:inline;font-size:1rem;line-height:1.5rem;line-height:1.5;margin:0;padding:0;white-space:normal}";const u={text:"text",output:"output",errors:"errors"};const f=class{constructor(o){e(this,o);this.languageChange=s(this,"stencila-language-change",7);this.allCodeVisibilityChange=s(this,"stencila-code-visibility-change",7);this.contentChange=s(this,"stencila-content-change",7);this.codeExecuteEvent=s(this,"stencila-code-execute",7);this.codeExecuteCancelEvent=s(this,"stencila-code-execute-cancel",7);var t,c;this.hoverTimeOut=undefined;this.hoverStartedAt=Date.now();this.readOnly=false;this.languageCapabilities=a;this.executableLanguages=(c=(t=window.stencilaWebClient)===null||t===void 0?void 0:t.executableLanguages)!==null&&c!==void 0?c:{};this.isExecutable=false;this.shiftIsPressed=false;this.onSelectLanguage=e=>{this.languageChange.emit(l(e));this.programmingLanguage=e};this.hover=false;this.isCodeVisible=false;this.toggleCodeVisibility=e=>{e.preventDefault();if(e.shiftKey){this.allCodeVisibilityChange.emit({isVisible:!this.isCodeVisible})}else{this.isCodeVisible=!this.isCodeVisible}};this.selectTextSlot=()=>this.el.querySelector(`.${u.text}`);this.contentChangeHandler=e=>{var s;const i=e.currentTarget;this.contentChange.emit((s=i.textContent)!==null&&s!==void 0?s:"")};this.handleKeyDown=e=>{if(e.key==="Enter"&&e.ctrlKey){e.preventDefault();this.execute().catch((e=>{console.error(e)}))}};this.checkIfExecutable=()=>{var e,s;if(this.programmingLanguage===undefined||!this.executeHandler||Object.keys((e=this.executableLanguages)!==null&&e!==void 0?e:{}).length<=0){this.isExecutable=false;return}const i=l(this.programmingLanguage).name;this.isExecutable=this.executeHandler!==undefined&&Object.values((s=this.executableLanguages)!==null&&s!==void 0?s:{}).some((e=>e.name===i))};this.onExecuteHandler=async(e="Topological")=>{const s=await this.getContents();if(r(this.executeStatus)){this.codeExecuteCancelEvent.emit({nodeId:this.el.id,scope:"All"});return s}this.codeExecuteEvent.emit({nodeId:this.el.id,ordering:e});if(this.isExecutable&&this.executeHandler){const e=await this.executeHandler(s);this.codeExpression=e;return e}return s};this.executeRef=e=>this.execute(e);this.onMouseOutHandler=e=>{const s=e.target;const i=e.relatedTarget;if(!(s===null||s===void 0?void 0:s.contains(i))){this.removeHoverState()}};this.addHoverState=()=>{window.clearTimeout(this.hoverTimeOut);if(!this.hover){this.hover=true;this.hoverStartedAt=Date.now()}};this.removeHoverState=()=>{const e=Date.now()-this.hoverStartedAt;if(this.hover&&e<60){this.hoverTimeOut=window.setTimeout((()=>{this.hover=false}),3e3)}else if(this.hover){this.hover=false}};this.onKeyPress=e=>{this.shiftIsPressed=e.shiftKey};this.addKeyListeners=()=>{window.addEventListener("keydown",this.onKeyPress);window.addEventListener("keyup",this.onKeyPress)};this.removeKeyListeners=()=>{window.removeEventListener("keydown",this.onKeyPress);window.removeEventListener("keyup",this.onKeyPress);this.shiftIsPressed=false};this.generateContent=()=>{var e;return[i("span",{class:"actions"},i("stencila-menu",{menuPosition:"bottom-start"},i(n,{executeStatus:this.executeStatus,executeRequired:this.executeRequired,slot:"toggle"}),i("slot",{name:"code-dependencies"}),i("slot",{name:"code-dependents"})),i("stencila-button",{"aria-label":"Run Code",class:"run",onClick:e=>this.executeRef(e.shiftKey?"Single":"Topological"),color:"key",icon:r(this.executeStatus)?"stop":"play",iconOnly:true,minimal:true,size:"xsmall",tooltip:r(this.executeStatus)?"Cancel":this.shiftIsPressed?"Run only this code":"Run",onMouseEnter:this.addKeyListeners,onMouseLeave:this.removeKeyListeners}),i("stencila-button",{"aria-label":`${this.isCodeVisible?"Hide":"Show"} Code`,class:"secondaryAction sourceToggle",onClick:this.toggleCodeVisibility,color:"key",icon:this.isCodeVisible?"eye-off":"eye",iconOnly:true,minimal:true,size:"xsmall",tooltip:`${this.isCodeVisible?"Hide":"Show"} Code\nShift click to set for all code`}),i("span",{class:"secondaryAction"},i(d,{activeLanguage:(e=this.programmingLanguage)!==null&&e!==void 0?e:"",languageCapabilities:this.languageCapabilities,executableLanguages:this.executableLanguages,onSetLanguage:this.onSelectLanguage,disabled:this.readOnly})),i("span",{class:"text",contentEditable:!this.readOnly,spellcheck:"false",onBlur:this.removeHoverState,onInput:this.contentChangeHandler,tabIndex:this.isCodeVisible?0:-1,role:"textbox"},i("slot",{name:u.text})),i("slot",{name:u.errors})),i("svg",{class:"divider",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 8 24",preserveAspectRatio:"xMinYMin"},i("path",{d:"M8 12L1 0H0v24h1l7-12z"})),i("slot",{name:u.output})]}}onDiscoverExecutableLanguages({detail:e}){this.executableLanguages=e.languages;this.checkIfExecutable()}onAllCodeVisibilityChange(e){this.isCodeVisible=e.detail.isVisible}componentWillLoad(){this.checkIfExecutable()}async getTextContents(){var e;const s=this.selectTextSlot();return Promise.resolve((e=s===null||s===void 0?void 0:s.textContent)!==null&&e!==void 0?e:"")}async getContents(){return Promise.resolve(c({text:await this.getTextContents(),programmingLanguage:this.programmingLanguage}))}async execute(e="Topological"){try{const s=await this.onExecuteHandler(e);return s}catch(s){console.error(s);return new Error("Could not execute CodeExpression")}}render(){return i(o,{class:{hover:this.hover,isCodeVisible:this.isCodeVisible},onMouseEnter:this.addHoverState,onMouseOut:this.onMouseOutHandler,onKeyDown:this.handleKeyDown},this.generateContent())}get el(){return t(this)}};f.style={default:p,material:x};export{f as stencila_code_expression};
//# sourceMappingURL=p-62dab348.entry.js.map