var __awaiter=this&&this.__awaiter||function(e,s,i,o){function t(e){return e instanceof i?e:new i((function(s){s(e)}))}return new(i||(i=Promise))((function(i,n){function c(e){try{a(o.next(e))}catch(s){n(s)}}function r(e){try{a(o["throw"](e))}catch(s){n(s)}}function a(e){e.done?i(e.value):t(e.value).then(c,r)}a((o=o.apply(e,s||[])).next())}))};var __generator=this&&this.__generator||function(e,s){var i={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},o,t,n,c;return c={next:r(0),throw:r(1),return:r(2)},typeof Symbol==="function"&&(c[Symbol.iterator]=function(){return this}),c;function r(e){return function(s){return a([e,s])}}function a(c){if(o)throw new TypeError("Generator is already executing.");while(i)try{if(o=1,t&&(n=c[0]&2?t["return"]:c[0]?t["throw"]||((n=t["return"])&&n.call(t),0):t.next)&&!(n=n.call(t,c[1])).done)return n;if(t=0,n)c=[c[0]&2,n.value];switch(c[0]){case 0:case 1:n=c;break;case 4:i.label++;return{value:c[1],done:false};case 5:i.label++;t=c[1];c=[0];continue;case 7:c=i.ops.pop();i.trys.pop();continue;default:if(!(n=i.trys,n=n.length>0&&n[n.length-1])&&(c[0]===6||c[0]===2)){i=0;continue}if(c[0]===3&&(!n||c[1]>n[0]&&c[1]<n[3])){i.label=c[1];break}if(c[0]===6&&i.label<n[1]){i.label=n[1];n=c;break}if(n&&i.label<n[2]){i.label=n[2];i.ops.push(c);break}if(n[2])i.ops.pop();i.trys.pop();continue}c=s.call(e,i)}catch(r){c=[6,r];t=0}finally{o=n=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:true}}};System.register(["./p-6cc918a4.system.js","./p-fcf839e9.system.js","./p-b30e650b.system.js","./p-c146b50f.system.js","./p-5cd8524a.system.js","./p-55b21ce2.system.js"],(function(e){"use strict";var s,i,o,t,n,c,r,a,l,d,p;return{setters:[function(e){s=e.r;i=e.f;o=e.h;t=e.e;n=e.c},function(e){c=e.c},function(e){r=e.C},function(e){a=e.i},function(e){l=e.f;d=e.a},function(e){p=e.L}],execute:function(){var u=".sc-stencila-code-expression-default-h,stencila-code-expression.sc-stencila-code-expression-default{--background:var(--color-neutral-50,#edf2f7);--background-editor:var(--color-stock,#fff);--background-output:var(--color-stock,#fff);--border:var(--color-neutral-100,#e2e8f0);-ms-flex-align:center;align-items:center;background-color:var(--background);border-color:var(--border);border-radius:.25rem;border-style:solid;border-width:1px;display:-ms-inline-flexbox;display:inline-flex;font-size:.875rem;line-height:1.25rem;line-height:1;padding:0;position:relative;vertical-align:text-bottom}.sc-stencila-code-expression-default-h stencila-tooltip.sc-stencila-code-expression-default,stencila-code-expression.sc-stencila-code-expression-default stencila-tooltip.sc-stencila-code-expression-default{-ms-flex-align:stretch;align-items:stretch;display:-ms-inline-flexbox;display:inline-flex;line-height:1;overflow:hidden;padding:0;vertical-align:bottom}.sc-stencila-code-expression-default-h .actions.sc-stencila-code-expression-default,stencila-code-expression.sc-stencila-code-expression-default .actions.sc-stencila-code-expression-default{border-bottom-left-radius:.25rem;border-top-left-radius:.25rem;display:-ms-inline-flexbox;display:inline-flex;-ms-flex:0 1 auto;flex:0 1 auto;position:relative;white-space:nowrap}.sc-stencila-code-expression-default-h .actions.sc-stencila-code-expression-default stencila-button.sc-stencila-code-expression-default,stencila-code-expression.sc-stencila-code-expression-default .actions.sc-stencila-code-expression-default stencila-button.sc-stencila-code-expression-default{-ms-flex-align:stretch;align-items:stretch;-ms-flex-item-align:start;align-self:flex-start;cursor:default;display:-ms-inline-flexbox;display:inline-flex;-ms-flex-negative:0;flex-shrink:0;overflow:hidden;-webkit-transition-duration:.15s;transition-duration:.15s;-webkit-transition-property:color,background-color,border-color,fill,stroke,opacity,-webkit-text-decoration-color,-webkit-box-shadow,-webkit-transform,-webkit-filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,fill,stroke,opacity,-webkit-text-decoration-color,-webkit-box-shadow,-webkit-transform,-webkit-filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-text-decoration-color,-webkit-box-shadow,-webkit-transform,-webkit-filter,-webkit-backdrop-filter;-webkit-transition-property:padding,width,max-width;transition-property:padding,width,max-width;-webkit-transition-timing-function:cubic-bezier(.4,0,.2,1);transition-timing-function:cubic-bezier(.4,0,.2,1);-webkit-transition-timing-function:cubic-bezier(0,0,.2,1);transition-timing-function:cubic-bezier(0,0,.2,1)}.sc-stencila-code-expression-default-h .actions.sc-stencila-code-expression-default .secondaryAction.sc-stencila-code-expression-default,stencila-code-expression.sc-stencila-code-expression-default .actions.sc-stencila-code-expression-default .secondaryAction.sc-stencila-code-expression-default{cursor:default;display:inline-block;overflow:hidden;-webkit-transition-duration:.15s;transition-duration:.15s;-webkit-transition-property:color,background-color,border-color,fill,stroke,opacity,-webkit-text-decoration-color,-webkit-box-shadow,-webkit-transform,-webkit-filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,fill,stroke,opacity,-webkit-text-decoration-color,-webkit-box-shadow,-webkit-transform,-webkit-filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-text-decoration-color,-webkit-box-shadow,-webkit-transform,-webkit-filter,-webkit-backdrop-filter;-webkit-transition-timing-function:cubic-bezier(.4,0,.2,1);transition-timing-function:cubic-bezier(.4,0,.2,1);-webkit-transition-timing-function:cubic-bezier(0,0,.2,1);transition-timing-function:cubic-bezier(0,0,.2,1);width:0}.hover.sc-stencila-code-expression-default-h .actions.sc-stencila-code-expression-default .secondaryAction.sc-stencila-code-expression-default,.isCodeVisible.sc-stencila-code-expression-default-h .actions.sc-stencila-code-expression-default .secondaryAction.sc-stencila-code-expression-default,.sc-stencila-code-expression-default-h:focus .actions.sc-stencila-code-expression-default .secondaryAction.sc-stencila-code-expression-default,.sc-stencila-code-expression-default-h:focus-within .actions.sc-stencila-code-expression-default .secondaryAction.sc-stencila-code-expression-default,.sc-stencila-code-expression-default-h:hover .actions.sc-stencila-code-expression-default .secondaryAction.sc-stencila-code-expression-default,stencila-code-expression.hover.sc-stencila-code-expression-default .actions.sc-stencila-code-expression-default .secondaryAction.sc-stencila-code-expression-default,stencila-code-expression.isCodeVisible.sc-stencila-code-expression-default .actions.sc-stencila-code-expression-default .secondaryAction.sc-stencila-code-expression-default,stencila-code-expression.sc-stencila-code-expression-default:focus .actions.sc-stencila-code-expression-default .secondaryAction.sc-stencila-code-expression-default,stencila-code-expression.sc-stencila-code-expression-default:focus-within .actions.sc-stencila-code-expression-default .secondaryAction.sc-stencila-code-expression-default,stencila-code-expression.sc-stencila-code-expression-default:hover .actions.sc-stencila-code-expression-default .secondaryAction.sc-stencila-code-expression-default{display:-ms-inline-flexbox;display:inline-flex;max-width:100%;width:1.25rem}.sc-stencila-code-expression-default-h .executeStatus.sc-stencila-code-expression-default,stencila-code-expression.sc-stencila-code-expression-default .executeStatus.sc-stencila-code-expression-default{--height:0.875rem;--width:0.875rem;cursor:pointer;padding:.25rem}.sc-stencila-code-expression-default-h .executeStatus.scheduled.sc-stencila-code-expression-default,stencila-code-expression.sc-stencila-code-expression-default .executeStatus.scheduled.sc-stencila-code-expression-default{cursor:wait}.sc-stencila-code-expression-default-h .text.sc-stencila-code-expression-default,stencila-code-expression.sc-stencila-code-expression-default .text.sc-stencila-code-expression-default{background-color:var(--background-editor);border-color:var(--border);color:#4a4a4a;color:var(--color-key,#4a4a4a);display:inline-block;font-family:monospace;font-family:var(--font-family-mono,monospace);font-size:.875rem;line-height:1.25rem;line-height:1;min-width:0;overflow:hidden;padding:0;-webkit-transition-duration:.15s;transition-duration:.15s;-webkit-transition-property:width;transition-property:width;-webkit-transition-timing-function:cubic-bezier(0,0,.2,1);transition-timing-function:cubic-bezier(0,0,.2,1);white-space:nowrap;width:0}.isCodeVisible.sc-stencila-code-expression-default-h .text.sc-stencila-code-expression-default,stencila-code-expression.isCodeVisible.sc-stencila-code-expression-default .text.sc-stencila-code-expression-default{border-radius:.25rem;border-width:1px;display:inline-block;margin-right:.25rem;min-width:1em;padding:.25rem .5rem;white-space:pre-line;width:auto}.sc-stencila-code-expression-default-h .sc-stencila-code-expression-default-s>[slot=errors],.sc-stencila-code-expression-default-h [slot=errors].sc-stencila-code-expression-default,stencila-code-expression.sc-stencila-code-expression-default-s>[slot=errors],stencila-code-expression .sc-stencila-code-expression-default-s>[slot=errors],stencila-code-expression.sc-stencila-code-expression-default [slot=errors].sc-stencila-code-expression-default{display:none}.sc-stencila-code-expression-default-h .sc-stencila-code-expression-default-s>[slot=errors] stencila-code-error,.sc-stencila-code-expression-default-h [slot=errors].sc-stencila-code-expression-default stencila-code-error.sc-stencila-code-expression-default,stencila-code-expression.sc-stencila-code-expression-default-s>[slot=errors] stencila-code-error,stencila-code-expression .sc-stencila-code-expression-default-s>[slot=errors] stencila-code-error,stencila-code-expression.sc-stencila-code-expression-default [slot=errors].sc-stencila-code-expression-default stencila-code-error.sc-stencila-code-expression-default{background:none;border-style:none;font-family:monospace;font-family:var(--font-family-mono,monospace);font-size:.875rem;line-height:1.25rem;line-height:1.5;padding:0}.sc-stencila-code-expression-default-h .sc-stencila-code-expression-default-s>[slot=errors] stencila-code-error stencila-details,.sc-stencila-code-expression-default-h .sc-stencila-code-expression-default-s>[slot=errors] stencila-code-error stencila-icon,.sc-stencila-code-expression-default-h [slot=errors].sc-stencila-code-expression-default stencila-code-error.sc-stencila-code-expression-default stencila-details.sc-stencila-code-expression-default,.sc-stencila-code-expression-default-h [slot=errors].sc-stencila-code-expression-default stencila-code-error.sc-stencila-code-expression-default stencila-icon.sc-stencila-code-expression-default,stencila-code-expression.sc-stencila-code-expression-default-s>[slot=errors] stencila-code-error stencila-details,stencila-code-expression .sc-stencila-code-expression-default-s>[slot=errors] stencila-code-error stencila-details,stencila-code-expression.sc-stencila-code-expression-default-s>[slot=errors] stencila-code-error stencila-icon,stencila-code-expression .sc-stencila-code-expression-default-s>[slot=errors] stencila-code-error stencila-icon,stencila-code-expression.sc-stencila-code-expression-default [slot=errors].sc-stencila-code-expression-default stencila-code-error.sc-stencila-code-expression-default stencila-details.sc-stencila-code-expression-default,stencila-code-expression.sc-stencila-code-expression-default [slot=errors].sc-stencila-code-expression-default stencila-code-error.sc-stencila-code-expression-default stencila-icon.sc-stencila-code-expression-default{display:none}.sc-stencila-code-expression-default-h.isCodeVisible .sc-stencila-code-expression-default-s>[slot=errors],.isCodeVisible.sc-stencila-code-expression-default-h [slot=errors].sc-stencila-code-expression-default,stencila-code-expression.isCodeVisible.sc-stencila-code-expression-default-s>[slot=errors],stencila-code-expression.isCodeVisible .sc-stencila-code-expression-default-s>[slot=errors],stencila-code-expression.isCodeVisible.sc-stencila-code-expression-default [slot=errors].sc-stencila-code-expression-default{display:inline-block}.sc-stencila-code-expression-default-h .divider.sc-stencila-code-expression-default,stencila-code-expression.sc-stencila-code-expression-default .divider.sc-stencila-code-expression-default{fill:var(--background);-ms-flex-item-align:center;align-self:center;background-color:var(--background-output);display:inline-block;display:none;width:.5rem}.isCodeVisible.sc-stencila-code-expression-default-h .divider.sc-stencila-code-expression-default,stencila-code-expression.isCodeVisible.sc-stencila-code-expression-default .divider.sc-stencila-code-expression-default{display:inline-block}.sc-stencila-code-expression-default-h .sc-stencila-code-expression-default-s>[slot=output],.sc-stencila-code-expression-default-h [slot=output].sc-stencila-code-expression-default,stencila-code-expression.sc-stencila-code-expression-default-s>[slot=output],stencila-code-expression .sc-stencila-code-expression-default-s>[slot=output],stencila-code-expression.sc-stencila-code-expression-default [slot=output].sc-stencila-code-expression-default{background-color:#fff;background-color:var(--color-stock,#fff);background-color:var(--background-output);border-style:none;color:#4a4a4a;color:var(--color-key,#4a4a4a);display:inline-block;font-size:1rem;line-height:1.5rem;line-height:1.5;margin:0;padding:0 .25rem 0 .5rem;-webkit-transition:padding .12s ease-out;transition:padding .12s ease-out;white-space:normal}.sc-stencila-code-expression-default-h .sc-stencila-code-expression-default-s>[slot=output]:empty,.sc-stencila-code-expression-default-h [slot=output].sc-stencila-code-expression-default:empty,stencila-code-expression.sc-stencila-code-expression-default-s>[slot=output]:empty,stencila-code-expression .sc-stencila-code-expression-default-s>[slot=output]:empty,stencila-code-expression.sc-stencila-code-expression-default [slot=output].sc-stencila-code-expression-default:empty{display:none}.sc-stencila-code-expression-default-h .sc-stencila-code-expression-default-s>[slot=output] *,.sc-stencila-code-expression-default-h [slot=output].sc-stencila-code-expression-default *.sc-stencila-code-expression-default,stencila-code-expression.sc-stencila-code-expression-default-s>[slot=output] *,stencila-code-expression .sc-stencila-code-expression-default-s>[slot=output] *,stencila-code-expression.sc-stencila-code-expression-default [slot=output].sc-stencila-code-expression-default *.sc-stencila-code-expression-default{background-color:#fff;background-color:var(--color-stock,#fff);border-style:none;color:#4a4a4a;color:var(--color-key,#4a4a4a);display:inline;font-size:1rem;line-height:1.5rem;line-height:1.5;margin:0;padding:0;white-space:normal}";var x=".sc-stencila-code-expression-material-h,stencila-code-expression.sc-stencila-code-expression-material{--background:var(--color-neutral-50,#edf2f7);--background-editor:var(--color-stock,#fff);--background-output:var(--color-stock,#fff);--border:var(--color-neutral-100,#e2e8f0);-ms-flex-align:center;align-items:center;background-color:var(--background);border-color:var(--border);border-radius:.25rem;border-style:solid;border-width:1px;display:-ms-inline-flexbox;display:inline-flex;font-size:.875rem;line-height:1.25rem;line-height:1;padding:0;position:relative;vertical-align:text-bottom}.sc-stencila-code-expression-material-h stencila-tooltip.sc-stencila-code-expression-material,stencila-code-expression.sc-stencila-code-expression-material stencila-tooltip.sc-stencila-code-expression-material{-ms-flex-align:stretch;align-items:stretch;display:-ms-inline-flexbox;display:inline-flex;line-height:1;overflow:hidden;padding:0;vertical-align:bottom}.sc-stencila-code-expression-material-h .actions.sc-stencila-code-expression-material,stencila-code-expression.sc-stencila-code-expression-material .actions.sc-stencila-code-expression-material{border-bottom-left-radius:.25rem;border-top-left-radius:.25rem;display:-ms-inline-flexbox;display:inline-flex;-ms-flex:0 1 auto;flex:0 1 auto;position:relative;white-space:nowrap}.sc-stencila-code-expression-material-h .actions.sc-stencila-code-expression-material stencila-button.sc-stencila-code-expression-material,stencila-code-expression.sc-stencila-code-expression-material .actions.sc-stencila-code-expression-material stencila-button.sc-stencila-code-expression-material{-ms-flex-align:stretch;align-items:stretch;-ms-flex-item-align:start;align-self:flex-start;cursor:default;display:-ms-inline-flexbox;display:inline-flex;-ms-flex-negative:0;flex-shrink:0;overflow:hidden;-webkit-transition-duration:.15s;transition-duration:.15s;-webkit-transition-property:color,background-color,border-color,fill,stroke,opacity,-webkit-text-decoration-color,-webkit-box-shadow,-webkit-transform,-webkit-filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,fill,stroke,opacity,-webkit-text-decoration-color,-webkit-box-shadow,-webkit-transform,-webkit-filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-text-decoration-color,-webkit-box-shadow,-webkit-transform,-webkit-filter,-webkit-backdrop-filter;-webkit-transition-property:padding,width,max-width;transition-property:padding,width,max-width;-webkit-transition-timing-function:cubic-bezier(.4,0,.2,1);transition-timing-function:cubic-bezier(.4,0,.2,1);-webkit-transition-timing-function:cubic-bezier(0,0,.2,1);transition-timing-function:cubic-bezier(0,0,.2,1)}.sc-stencila-code-expression-material-h .actions.sc-stencila-code-expression-material .secondaryAction.sc-stencila-code-expression-material,stencila-code-expression.sc-stencila-code-expression-material .actions.sc-stencila-code-expression-material .secondaryAction.sc-stencila-code-expression-material{cursor:default;display:inline-block;overflow:hidden;-webkit-transition-duration:.15s;transition-duration:.15s;-webkit-transition-property:color,background-color,border-color,fill,stroke,opacity,-webkit-text-decoration-color,-webkit-box-shadow,-webkit-transform,-webkit-filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,fill,stroke,opacity,-webkit-text-decoration-color,-webkit-box-shadow,-webkit-transform,-webkit-filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-text-decoration-color,-webkit-box-shadow,-webkit-transform,-webkit-filter,-webkit-backdrop-filter;-webkit-transition-timing-function:cubic-bezier(.4,0,.2,1);transition-timing-function:cubic-bezier(.4,0,.2,1);-webkit-transition-timing-function:cubic-bezier(0,0,.2,1);transition-timing-function:cubic-bezier(0,0,.2,1);width:0}.hover.sc-stencila-code-expression-material-h .actions.sc-stencila-code-expression-material .secondaryAction.sc-stencila-code-expression-material,.isCodeVisible.sc-stencila-code-expression-material-h .actions.sc-stencila-code-expression-material .secondaryAction.sc-stencila-code-expression-material,.sc-stencila-code-expression-material-h:focus .actions.sc-stencila-code-expression-material .secondaryAction.sc-stencila-code-expression-material,.sc-stencila-code-expression-material-h:focus-within .actions.sc-stencila-code-expression-material .secondaryAction.sc-stencila-code-expression-material,.sc-stencila-code-expression-material-h:hover .actions.sc-stencila-code-expression-material .secondaryAction.sc-stencila-code-expression-material,stencila-code-expression.hover.sc-stencila-code-expression-material .actions.sc-stencila-code-expression-material .secondaryAction.sc-stencila-code-expression-material,stencila-code-expression.isCodeVisible.sc-stencila-code-expression-material .actions.sc-stencila-code-expression-material .secondaryAction.sc-stencila-code-expression-material,stencila-code-expression.sc-stencila-code-expression-material:focus .actions.sc-stencila-code-expression-material .secondaryAction.sc-stencila-code-expression-material,stencila-code-expression.sc-stencila-code-expression-material:focus-within .actions.sc-stencila-code-expression-material .secondaryAction.sc-stencila-code-expression-material,stencila-code-expression.sc-stencila-code-expression-material:hover .actions.sc-stencila-code-expression-material .secondaryAction.sc-stencila-code-expression-material{display:-ms-inline-flexbox;display:inline-flex;max-width:100%;width:1.25rem}.sc-stencila-code-expression-material-h .executeStatus.sc-stencila-code-expression-material,stencila-code-expression.sc-stencila-code-expression-material .executeStatus.sc-stencila-code-expression-material{--height:0.875rem;--width:0.875rem;cursor:pointer;padding:.25rem}.sc-stencila-code-expression-material-h .executeStatus.scheduled.sc-stencila-code-expression-material,stencila-code-expression.sc-stencila-code-expression-material .executeStatus.scheduled.sc-stencila-code-expression-material{cursor:wait}.sc-stencila-code-expression-material-h .text.sc-stencila-code-expression-material,stencila-code-expression.sc-stencila-code-expression-material .text.sc-stencila-code-expression-material{background-color:var(--background-editor);border-color:var(--border);color:#4a4a4a;color:var(--color-key,#4a4a4a);display:inline-block;font-family:monospace;font-family:var(--font-family-mono,monospace);font-size:.875rem;line-height:1.25rem;line-height:1;min-width:0;overflow:hidden;padding:0;-webkit-transition-duration:.15s;transition-duration:.15s;-webkit-transition-property:width;transition-property:width;-webkit-transition-timing-function:cubic-bezier(0,0,.2,1);transition-timing-function:cubic-bezier(0,0,.2,1);white-space:nowrap;width:0}.isCodeVisible.sc-stencila-code-expression-material-h .text.sc-stencila-code-expression-material,stencila-code-expression.isCodeVisible.sc-stencila-code-expression-material .text.sc-stencila-code-expression-material{border-radius:.25rem;border-width:1px;display:inline-block;margin-right:.25rem;min-width:1em;padding:.25rem .5rem;white-space:pre-line;width:auto}.sc-stencila-code-expression-material-h .sc-stencila-code-expression-material-s>[slot=errors],.sc-stencila-code-expression-material-h [slot=errors].sc-stencila-code-expression-material,stencila-code-expression.sc-stencila-code-expression-material-s>[slot=errors],stencila-code-expression .sc-stencila-code-expression-material-s>[slot=errors],stencila-code-expression.sc-stencila-code-expression-material [slot=errors].sc-stencila-code-expression-material{display:none}.sc-stencila-code-expression-material-h .sc-stencila-code-expression-material-s>[slot=errors] stencila-code-error,.sc-stencila-code-expression-material-h [slot=errors].sc-stencila-code-expression-material stencila-code-error.sc-stencila-code-expression-material,stencila-code-expression.sc-stencila-code-expression-material-s>[slot=errors] stencila-code-error,stencila-code-expression .sc-stencila-code-expression-material-s>[slot=errors] stencila-code-error,stencila-code-expression.sc-stencila-code-expression-material [slot=errors].sc-stencila-code-expression-material stencila-code-error.sc-stencila-code-expression-material{background:none;border-style:none;font-family:monospace;font-family:var(--font-family-mono,monospace);font-size:.875rem;line-height:1.25rem;line-height:1.5;padding:0}.sc-stencila-code-expression-material-h .sc-stencila-code-expression-material-s>[slot=errors] stencila-code-error stencila-details,.sc-stencila-code-expression-material-h .sc-stencila-code-expression-material-s>[slot=errors] stencila-code-error stencila-icon,.sc-stencila-code-expression-material-h [slot=errors].sc-stencila-code-expression-material stencila-code-error.sc-stencila-code-expression-material stencila-details.sc-stencila-code-expression-material,.sc-stencila-code-expression-material-h [slot=errors].sc-stencila-code-expression-material stencila-code-error.sc-stencila-code-expression-material stencila-icon.sc-stencila-code-expression-material,stencila-code-expression.sc-stencila-code-expression-material-s>[slot=errors] stencila-code-error stencila-details,stencila-code-expression .sc-stencila-code-expression-material-s>[slot=errors] stencila-code-error stencila-details,stencila-code-expression.sc-stencila-code-expression-material-s>[slot=errors] stencila-code-error stencila-icon,stencila-code-expression .sc-stencila-code-expression-material-s>[slot=errors] stencila-code-error stencila-icon,stencila-code-expression.sc-stencila-code-expression-material [slot=errors].sc-stencila-code-expression-material stencila-code-error.sc-stencila-code-expression-material stencila-details.sc-stencila-code-expression-material,stencila-code-expression.sc-stencila-code-expression-material [slot=errors].sc-stencila-code-expression-material stencila-code-error.sc-stencila-code-expression-material stencila-icon.sc-stencila-code-expression-material{display:none}.sc-stencila-code-expression-material-h.isCodeVisible .sc-stencila-code-expression-material-s>[slot=errors],.isCodeVisible.sc-stencila-code-expression-material-h [slot=errors].sc-stencila-code-expression-material,stencila-code-expression.isCodeVisible.sc-stencila-code-expression-material-s>[slot=errors],stencila-code-expression.isCodeVisible .sc-stencila-code-expression-material-s>[slot=errors],stencila-code-expression.isCodeVisible.sc-stencila-code-expression-material [slot=errors].sc-stencila-code-expression-material{display:inline-block}.sc-stencila-code-expression-material-h .divider.sc-stencila-code-expression-material,stencila-code-expression.sc-stencila-code-expression-material .divider.sc-stencila-code-expression-material{fill:var(--background);-ms-flex-item-align:center;align-self:center;background-color:var(--background-output);display:inline-block;display:none;width:.5rem}.isCodeVisible.sc-stencila-code-expression-material-h .divider.sc-stencila-code-expression-material,stencila-code-expression.isCodeVisible.sc-stencila-code-expression-material .divider.sc-stencila-code-expression-material{display:inline-block}.sc-stencila-code-expression-material-h .sc-stencila-code-expression-material-s>[slot=output],.sc-stencila-code-expression-material-h [slot=output].sc-stencila-code-expression-material,stencila-code-expression.sc-stencila-code-expression-material-s>[slot=output],stencila-code-expression .sc-stencila-code-expression-material-s>[slot=output],stencila-code-expression.sc-stencila-code-expression-material [slot=output].sc-stencila-code-expression-material{background-color:#fff;background-color:var(--color-stock,#fff);background-color:var(--background-output);border-style:none;color:#4a4a4a;color:var(--color-key,#4a4a4a);display:inline-block;font-size:1rem;line-height:1.5rem;line-height:1.5;margin:0;padding:0 .25rem 0 .5rem;-webkit-transition:padding .12s ease-out;transition:padding .12s ease-out;white-space:normal}.sc-stencila-code-expression-material-h .sc-stencila-code-expression-material-s>[slot=output]:empty,.sc-stencila-code-expression-material-h [slot=output].sc-stencila-code-expression-material:empty,stencila-code-expression.sc-stencila-code-expression-material-s>[slot=output]:empty,stencila-code-expression .sc-stencila-code-expression-material-s>[slot=output]:empty,stencila-code-expression.sc-stencila-code-expression-material [slot=output].sc-stencila-code-expression-material:empty{display:none}.sc-stencila-code-expression-material-h .sc-stencila-code-expression-material-s>[slot=output] *,.sc-stencila-code-expression-material-h [slot=output].sc-stencila-code-expression-material *.sc-stencila-code-expression-material,stencila-code-expression.sc-stencila-code-expression-material-s>[slot=output] *,stencila-code-expression .sc-stencila-code-expression-material-s>[slot=output] *,stencila-code-expression.sc-stencila-code-expression-material [slot=output].sc-stencila-code-expression-material *.sc-stencila-code-expression-material{background-color:#fff;background-color:var(--color-stock,#fff);border-style:none;color:#4a4a4a;color:var(--color-key,#4a4a4a);display:inline;font-size:1rem;line-height:1.5rem;line-height:1.5;margin:0;padding:0;white-space:normal}";var f={text:"text",output:"output",errors:"errors"};var m=e("stencila_code_expression",function(){function e(e){var t=this;s(this,e);this.languageChange=i(this,"stencila-language-change",7);this.allCodeVisibilityChange=i(this,"stencila-code-visibility-change",7);this.contentChange=i(this,"stencila-content-change",7);this.codeExecuteEvent=i(this,"stencila-code-execute",7);this.codeExecuteCancelEvent=i(this,"stencila-code-execute-cancel",7);var n,c;this.hoverTimeOut=undefined;this.hoverStartedAt=Date.now();this.readOnly=false;this.languageCapabilities=l;this.executableLanguages=(c=(n=window.stencilaWebClient)===null||n===void 0?void 0:n.executableLanguages)!==null&&c!==void 0?c:{};this.isExecutable=false;this.shiftIsPressed=false;this.onSelectLanguage=function(e){t.languageChange.emit(d(e));t.programmingLanguage=e};this.hover=false;this.isCodeVisible=false;this.toggleCodeVisibility=function(e){e.preventDefault();if(e.shiftKey){t.allCodeVisibilityChange.emit({isVisible:!t.isCodeVisible})}else{t.isCodeVisible=!t.isCodeVisible}};this.selectTextSlot=function(){return t.el.querySelector(".".concat(f.text))};this.contentChangeHandler=function(e){var s;var i=e.currentTarget;t.contentChange.emit((s=i.textContent)!==null&&s!==void 0?s:"")};this.handleKeyDown=function(e){if(e.key==="Enter"&&e.ctrlKey){e.preventDefault();t.execute().catch((function(e){console.error(e)}))}};this.checkIfExecutable=function(){var e,s;if(t.programmingLanguage===undefined||!t.executeHandler||Object.keys((e=t.executableLanguages)!==null&&e!==void 0?e:{}).length<=0){t.isExecutable=false;return}var i=d(t.programmingLanguage).name;t.isExecutable=t.executeHandler!==undefined&&Object.values((s=t.executableLanguages)!==null&&s!==void 0?s:{}).some((function(e){return e.name===i}))};this.onExecuteHandler=function(e){if(e===void 0){e="Topological"}return __awaiter(t,void 0,void 0,(function(){var s,i;return __generator(this,(function(o){switch(o.label){case 0:return[4,this.getContents()];case 1:s=o.sent();if(a(this.executeStatus)){this.codeExecuteCancelEvent.emit({nodeId:this.el.id,scope:"All"});return[2,s]}this.codeExecuteEvent.emit({nodeId:this.el.id,ordering:e});if(!(this.isExecutable&&this.executeHandler))return[3,3];return[4,this.executeHandler(s)];case 2:i=o.sent();this.codeExpression=i;return[2,i];case 3:return[2,s]}}))}))};this.executeRef=function(e){return t.execute(e)};this.onMouseOutHandler=function(e){var s=e.target;var i=e.relatedTarget;if(!(s===null||s===void 0?void 0:s.contains(i))){t.removeHoverState()}};this.addHoverState=function(){window.clearTimeout(t.hoverTimeOut);if(!t.hover){t.hover=true;t.hoverStartedAt=Date.now()}};this.removeHoverState=function(){var e=Date.now()-t.hoverStartedAt;if(t.hover&&e<60){t.hoverTimeOut=window.setTimeout((function(){t.hover=false}),3e3)}else if(t.hover){t.hover=false}};this.onKeyPress=function(e){t.shiftIsPressed=e.shiftKey};this.addKeyListeners=function(){window.addEventListener("keydown",t.onKeyPress);window.addEventListener("keyup",t.onKeyPress)};this.removeKeyListeners=function(){window.removeEventListener("keydown",t.onKeyPress);window.removeEventListener("keyup",t.onKeyPress);t.shiftIsPressed=false};this.generateContent=function(){var e;return[o("span",{class:"actions"},o("stencila-menu",{menuPosition:"bottom-start"},o(r,{executeStatus:t.executeStatus,executeRequired:t.executeRequired,slot:"toggle"}),o("slot",{name:"code-dependencies"}),o("slot",{name:"code-dependents"})),o("stencila-button",{"aria-label":"Run Code",class:"run",onClick:function(e){return t.executeRef(e.shiftKey?"Single":"Topological")},color:"key",icon:a(t.executeStatus)?"stop":"play",iconOnly:true,minimal:true,size:"xsmall",tooltip:a(t.executeStatus)?"Cancel":t.shiftIsPressed?"Run only this code":"Run",onMouseEnter:t.addKeyListeners,onMouseLeave:t.removeKeyListeners}),o("stencila-button",{"aria-label":"".concat(t.isCodeVisible?"Hide":"Show"," Code"),class:"secondaryAction sourceToggle",onClick:t.toggleCodeVisibility,color:"key",icon:t.isCodeVisible?"eye-off":"eye",iconOnly:true,minimal:true,size:"xsmall",tooltip:"".concat(t.isCodeVisible?"Hide":"Show"," Code\nShift click to set for all code")}),o("span",{class:"secondaryAction"},o(p,{activeLanguage:(e=t.programmingLanguage)!==null&&e!==void 0?e:"",languageCapabilities:t.languageCapabilities,executableLanguages:t.executableLanguages,onSetLanguage:t.onSelectLanguage,disabled:t.readOnly})),o("span",{class:"text",contentEditable:!t.readOnly,spellcheck:"false",onBlur:t.removeHoverState,onInput:t.contentChangeHandler,tabIndex:t.isCodeVisible?0:-1,role:"textbox"},o("slot",{name:f.text})),o("slot",{name:f.errors})),o("svg",{class:"divider",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 8 24",preserveAspectRatio:"xMinYMin"},o("path",{d:"M8 12L1 0H0v24h1l7-12z"})),o("slot",{name:f.output})]}}e.prototype.onDiscoverExecutableLanguages=function(e){var s=e.detail;this.executableLanguages=s.languages;this.checkIfExecutable()};e.prototype.onAllCodeVisibilityChange=function(e){this.isCodeVisible=e.detail.isVisible};e.prototype.componentWillLoad=function(){this.checkIfExecutable()};e.prototype.getTextContents=function(){return __awaiter(this,void 0,void 0,(function(){var e,s;return __generator(this,(function(i){s=this.selectTextSlot();return[2,Promise.resolve((e=s===null||s===void 0?void 0:s.textContent)!==null&&e!==void 0?e:"")]}))}))};e.prototype.getContents=function(){return __awaiter(this,void 0,void 0,(function(){var e,s,i;var o;return __generator(this,(function(t){switch(t.label){case 0:s=(e=Promise).resolve;i=c;o={};return[4,this.getTextContents()];case 1:return[2,s.apply(e,[i.apply(void 0,[(o.text=t.sent(),o.programmingLanguage=this.programmingLanguage,o)])])]}}))}))};e.prototype.execute=function(e){if(e===void 0){e="Topological"}return __awaiter(this,void 0,void 0,(function(){var s,i;return __generator(this,(function(o){switch(o.label){case 0:o.trys.push([0,2,,3]);return[4,this.onExecuteHandler(e)];case 1:s=o.sent();return[2,s];case 2:i=o.sent();console.error(i);return[2,new Error("Could not execute CodeExpression")];case 3:return[2]}}))}))};e.prototype.render=function(){return o(t,{class:{hover:this.hover,isCodeVisible:this.isCodeVisible},onMouseEnter:this.addHoverState,onMouseOut:this.onMouseOutHandler,onKeyDown:this.handleKeyDown},this.generateContent())};Object.defineProperty(e.prototype,"el",{get:function(){return n(this)},enumerable:false,configurable:true});return e}());m.style={default:u,material:x}}}}));
//# sourceMappingURL=p-0b4e3c61.system.entry.js.map