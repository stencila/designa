{"version":3,"sources":["node_modules/d3-shape/src/symbol/diamond.js","node_modules/d3-shape/src/symbol/square.js","node_modules/d3-shape/src/symbol/star.js","node_modules/d3-shape/src/symbol/triangle.js","node_modules/d3-shape/src/symbol/wye.js","node_modules/d3-timer/src/timeout.js","node_modules/d3-selection/src/namespaces.js","node_modules/d3-selection/src/namespace.js","node_modules/d3-selection/src/creator.js","node_modules/d3-selection/src/selector.js","node_modules/d3-selection/src/selection/select.js","node_modules/d3-selection/src/array.js","node_modules/d3-selection/src/selectorAll.js","node_modules/d3-selection/src/selection/selectAll.js","node_modules/d3-selection/src/matcher.js","node_modules/d3-selection/src/selection/selectChild.js","node_modules/d3-selection/src/selection/selectChildren.js","node_modules/d3-selection/src/selection/filter.js","node_modules/d3-selection/src/selection/sparse.js","node_modules/d3-selection/src/selection/enter.js","node_modules/d3-selection/src/constant.js","node_modules/d3-selection/src/selection/data.js","node_modules/d3-selection/src/selection/exit.js","node_modules/d3-selection/src/selection/join.js","node_modules/d3-selection/src/selection/merge.js","node_modules/d3-selection/src/selection/order.js","node_modules/d3-selection/src/selection/sort.js","node_modules/d3-selection/src/selection/call.js","node_modules/d3-selection/src/selection/nodes.js","node_modules/d3-selection/src/selection/node.js","node_modules/d3-selection/src/selection/size.js","node_modules/d3-selection/src/selection/empty.js","node_modules/d3-selection/src/selection/each.js","node_modules/d3-selection/src/selection/attr.js","node_modules/d3-selection/src/window.js","node_modules/d3-selection/src/selection/style.js","node_modules/d3-selection/src/selection/property.js","node_modules/d3-selection/src/selection/classed.js","node_modules/d3-selection/src/selection/text.js","node_modules/d3-selection/src/selection/html.js","node_modules/d3-selection/src/selection/raise.js","node_modules/d3-selection/src/selection/lower.js","node_modules/d3-selection/src/selection/append.js","node_modules/d3-selection/src/selection/insert.js","node_modules/d3-selection/src/selection/remove.js","node_modules/d3-selection/src/selection/clone.js","node_modules/d3-selection/src/selection/datum.js","node_modules/d3-selection/src/selection/on.js","node_modules/d3-selection/src/selection/dispatch.js","node_modules/d3-selection/src/selection/iterator.js","node_modules/d3-selection/src/selection/index.js","node_modules/d3-selection/src/select.js","node_modules/d3-selection/src/sourceEvent.js","node_modules/d3-selection/src/pointer.js","node_modules/d3-drag/src/noevent.js","node_modules/d3-drag/src/nodrag.js","node_modules/d3-drag/src/constant.js","node_modules/d3-drag/src/event.js","node_modules/d3-drag/src/drag.js","node_modules/d3-polygon/src/cross.js","node_modules/d3-polygon/src/hull.js","src/components/projectGraph/utils/guards.ts","src/components/projectGraph/graphs.ts","node_modules/d3-transition/src/transition/schedule.js","node_modules/d3-transition/src/interrupt.js","node_modules/d3-transition/src/selection/interrupt.js","node_modules/d3-transition/src/transition/tween.js","node_modules/d3-transition/src/transition/interpolate.js","node_modules/d3-transition/src/transition/attr.js","node_modules/d3-transition/src/transition/attrTween.js","node_modules/d3-transition/src/transition/delay.js","node_modules/d3-transition/src/transition/duration.js","node_modules/d3-transition/src/transition/ease.js","node_modules/d3-transition/src/transition/easeVarying.js","node_modules/d3-transition/src/transition/filter.js","node_modules/d3-transition/src/transition/merge.js","node_modules/d3-transition/src/transition/on.js","node_modules/d3-transition/src/transition/remove.js","node_modules/d3-transition/src/transition/select.js","node_modules/d3-transition/src/transition/selectAll.js","node_modules/d3-transition/src/transition/selection.js","node_modules/d3-transition/src/transition/style.js","node_modules/d3-transition/src/transition/styleTween.js","node_modules/d3-transition/src/transition/text.js","node_modules/d3-transition/src/transition/textTween.js","node_modules/d3-transition/src/transition/transition.js","node_modules/d3-transition/src/transition/end.js","node_modules/d3-transition/src/transition/index.js","node_modules/d3-ease/src/cubic.js","node_modules/d3-transition/src/selection/transition.js","node_modules/d3-transition/src/selection/index.js","node_modules/d3-zoom/src/constant.js","node_modules/d3-zoom/src/event.js","node_modules/d3-zoom/src/transform.js","node_modules/d3-zoom/src/noevent.js","node_modules/d3-zoom/src/zoom.js","src/components/projectGraph/utils/index.ts","src/components/projectGraph/utils/nodes.ts","src/components/projectGraph/utils/resource.ts","src/components/projectGraph/utils/symbols.ts","src/components/projectGraph/projectGraph.css?tag=stencila-project-graph&mode=default&encapsulation=shadow","src/components/projectGraph/projectGraph.material.css?tag=stencila-project-graph&mode=material&encapsulation=shadow","src/components/projectGraph/projectGraph.tsx"],"names":["tan30","sqrt","tan30_2","symbolDiamond","[object Object]","context","size","y","x","moveTo","lineTo","closePath","symbolSquare","w","rect","ka","kr","sin","pi","kx","tau","ky","cos","symbolStar","r","i","a","c","s","sqrt3","symbolTriangle","k","symbolWye","x0","y0","x1","y1","x2","y2","timeout","callback","delay","time","t","Timer","restart","elapsed","stop","xhtml","namespaces","svg","xlink","xml","xmlns","namespace","name","prefix","indexOf","slice","hasOwnProperty","space","local","creatorInherit","document","this","ownerDocument","uri","namespaceURI","documentElement","createElement","createElementNS","creatorFixed","fullname","creator","none","selector","querySelector","selection_select","select","groups","_groups","m","length","subgroups","Array","j","group","n","subgroup","node","subnode","call","__data__","Selection","_parents","array","isArray","from","empty","selectorAll","querySelectorAll","arrayAll","apply","arguments","selection_selectAll","parents","push","matcher","matches","childMatcher","find","prototype","childFind","match","children","childFirst","firstElementChild","selection_selectChild","filter","childrenFilter","selection_selectChildren","selectAll","selection_filter","sparse","update","selection_enter","_enter","map","EnterNode","parent","datum","_next","_parent","constructor","appendChild","child","insertBefore","next","constant$2","bindIndex","enter","exit","data","groupLength","dataLength","bindKey","key","nodeByKeyValue","Map","keyValues","keyValue","has","set","get","delete","selection_data","value","bind","constant","arraylike","enterGroup","updateGroup","exitGroup","i0","i1","previous","_exit","selection_exit","selection_join","onenter","onupdate","onexit","selection","append","remove","merge","order","selection_merge","groups0","groups1","m0","m1","Math","min","merges","group0","group1","selection_order","compareDocumentPosition","parentNode","selection_sort","compare","ascending","compareNode","b","sortgroups","sortgroup","sort","NaN","selection_call","selection_nodes","selection_node","selection_size","selection_empty","selection_each","attrRemove","removeAttribute","attrRemoveNS","removeAttributeNS","attrConstant","setAttribute","attrConstantNS","setAttributeNS","attrFunction","v","attrFunctionNS","selection_attr","getAttributeNS","getAttribute","each","defaultView","styleRemove","style","removeProperty","styleConstant","priority","setProperty","styleFunction","selection_style","styleValue","getPropertyValue","getComputedStyle","propertyRemove","propertyConstant","propertyFunction","selection_property","classArray","string","trim","split","classList","ClassList","_node","_names","add","join","splice","contains","classedAdd","names","list","classedRemove","classedTrue","classedFalse","classedFunction","selection_classed","textRemove","textContent","textConstant","textFunction","selection_text","htmlRemove","innerHTML","htmlConstant","htmlFunction","selection_html","raise","nextSibling","selection_raise","lower","previousSibling","firstChild","selection_lower","selection_append","create","constantNull","selection_insert","before","removeChild","selection_remove","selection_cloneShallow","clone","cloneNode","selection_cloneDeep","selection_clone","deep","selection_datum","property","contextListener","listener","event","parseTypenames","typenames","type","onRemove","typename","on","__on","o","removeEventListener","options","onAdd","addEventListener","selection_on","dispatchEvent","params","window","CustomEvent","createEvent","initEvent","bubbles","cancelable","detail","dispatchConstant","dispatchFunction","selection_dispatch","selection_iterator","root","selection_selection","selectChild","selectChildren","nodes","attr","classed","text","html","insert","dispatch","Symbol","iterator","sourceEvent","pointer","undefined","currentTarget","ownerSVGElement","createSVGPoint","point","clientX","clientY","matrixTransform","getScreenCTM","inverse","getBoundingClientRect","left","clientLeft","top","clientTop","pageX","pageY","nonpassive","passive","nonpassivecapture","capture","nopropagation","stopImmediatePropagation","noevent$1","preventDefault","dragDisable","view","noevent","__noselect","MozUserSelect","yesdrag","noclick","setTimeout","constant$1","DragEvent","subject","target","identifier","active","dx","dy","Object","defineProperties","enumerable","configurable","_","defaultFilter","ctrlKey","button","defaultContainer","defaultSubject","d","defaultTouchable","navigator","maxTouchPoints","drag","container","touchable","gestures","listeners","mousedownx","mousedowny","mousemoving","touchending","clickDistance2","mousedowned","touchstarted","touchmoved","touchended","gesture","beforestart","mousemoved","mouseupped","nodrag","mouse","touches","changedTouches","clearTimeout","that","touch","copy","p","p0","clickDistance","cross","lexicographicOrder","computeUpperHullIndexes","points","indexes","polygonHull","sortedPoints","flippedPoints","upperIndexes","lowerIndexes","skipLeft","skipRight","hull","hasPath","resource","hasKind","graphEdgeToLinks","graph","edges","reduce","links","edge","targetNode","to","path","source","relation","graphToGroupedGraph","files","fileLinkedNodes","groupedGraph","groupLinks","fileIndexByPath","_a","file","index","fileIndex","isInterGroupLink","emptyOn","emptyTween","CREATED","SCHEDULED","STARTING","STARTED","RUNNING","ENDING","ENDED","schedule","id","timing","schedules","__transition","tween","duration","ease","timer","state","init","Error","self","start","tick","interrupt","selection_interrupt","tweenRemove","tween0","tween1","tweenFunction","transition_tween","_id","tweenValue","transition","interpolate","interpolateNumber","color","interpolateRgb","interpolateString","value1","string00","string1","interpolate0","string0","string10","transition_attr","interpolateTransform","attrTween","attrInterpolate","attrInterpolateNS","attrTweenNS","t0","_value","transition_attrTween","delayFunction","delayConstant","transition_delay","durationFunction","durationConstant","transition_duration","easeConstant","transition_ease","easeVarying","transition_easeVarying","transition_filter","Transition","_name","transition_merge","every","onFunction","on0","on1","sit","transition_on","removeFunction","transition_remove","transition_select","transition_selectAll","inherit","l","transition_selection","styleNull","styleMaybeRemove","listener0","transition_style","styleTween","styleInterpolate","transition_styleTween","transition_text","textInterpolate","textTween","transition_textTween","transition_transition","id0","id1","newId","transition_end","Promise","resolve","reject","cancel","end","selection_prototype","cubicInOut","defaultTiming","easeCubicInOut","selection_transition","now","ZoomEvent","transform","Transform","scale","translate","applyX","applyY","invert","location","invertX","invertY","rescaleX","domain","range","rescaleY","toString","identity","defaultExtent","e","SVGElement","hasAttribute","viewBox","baseVal","width","height","clientWidth","clientHeight","defaultTransform","__zoom","defaultWheelDelta","deltaY","deltaMode","defaultConstrain","extent","translateExtent","dx0","dx1","dy0","dy1","max","zoom","constrain","wheelDelta","scaleExtent","Infinity","interpolateZoom","touchstarting","touchfirst","touchDelay","wheelDelay","tapDistance","wheeled","dblclicked","collection","scaleBy","scaleTo","k0","k1","centroid","p1","translateBy","translateTo","args","g","concat","clean","__zooming","Gesture","taps","emit","touch0","touch1","pow","wheel","wheelidled","moved","dragEnable","shiftKey","t1","started","l0","l1","dp","dl","hypot","initGraph","el","elSize","svgContent","zoomFn","String","getNodeX","Number","parseInt","getNodeY","getResourceLabel","language","kind","url","getRelationLabel","auto","getResourceSymbol","symbol","symbolCircle","defaultProjectGraphCss","projectGraphMaterialCss","ProjectGraph","hostRef","drawGraph","graphRef","simulation","forceSimulation","force","forceLink","strength","iterations","distance","forceManyBody","distanceMin","distanceMax","forceCollide","forceX","forceY","forceCenter","velocityDecay","alphaDecay","click","_event","fx","fy","alpha","dragFn","hullContainer","linkContainer","_b","linkGroup","nodeContainer","_c","drawHull","fileNode","pad","hullFileNodes","rootCoords","targetX","targetY","sourceX","sourceY","line","curve","curveBasisClosed","nodeGroup","nextGraph","h","Host","ref","class"],"mappings":"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","sourcesContent":["import {sqrt} from \"../math.js\";\n\nconst tan30 = sqrt(1 / 3);\nconst tan30_2 = tan30 * 2;\n\nexport default {\n  draw(context, size) {\n    const y = sqrt(size / tan30_2);\n    const x = y * tan30;\n    context.moveTo(0, -y);\n    context.lineTo(x, 0);\n    context.lineTo(0, y);\n    context.lineTo(-x, 0);\n    context.closePath();\n  }\n};\n","import {sqrt} from \"../math.js\";\n\nexport default {\n  draw(context, size) {\n    const w = sqrt(size);\n    const x = -w / 2;\n    context.rect(x, x, w, w);\n  }\n};\n","import {sin, cos, sqrt, pi, tau} from \"../math.js\";\n\nconst ka = 0.89081309152928522810;\nconst kr = sin(pi / 10) / sin(7 * pi / 10);\nconst kx = sin(tau / 10) * kr;\nconst ky = -cos(tau / 10) * kr;\n\nexport default {\n  draw(context, size) {\n    const r = sqrt(size * ka);\n    const x = kx * r;\n    const y = ky * r;\n    context.moveTo(0, -r);\n    context.lineTo(x, y);\n    for (let i = 1; i < 5; ++i) {\n      const a = tau * i / 5;\n      const c = cos(a);\n      const s = sin(a);\n      context.lineTo(s * r, -c * r);\n      context.lineTo(c * x - s * y, s * x + c * y);\n    }\n    context.closePath();\n  }\n};\n","import {sqrt} from \"../math.js\";\n\nconst sqrt3 = sqrt(3);\n\nexport default {\n  draw(context, size) {\n    const y = -sqrt(size / (sqrt3 * 3));\n    context.moveTo(0, y * 2);\n    context.lineTo(-sqrt3 * y, -y);\n    context.lineTo(sqrt3 * y, -y);\n    context.closePath();\n  }\n};\n","import {sqrt} from \"../math.js\";\n\nconst c = -0.5;\nconst s = sqrt(3) / 2;\nconst k = 1 / sqrt(12);\nconst a = (k / 2 + 1) * 3;\n\nexport default {\n  draw(context, size) {\n    const r = sqrt(size / a);\n    const x0 = r / 2, y0 = r * k;\n    const x1 = x0, y1 = r * k + r;\n    const x2 = -x1, y2 = y1;\n    context.moveTo(x0, y0);\n    context.lineTo(x1, y1);\n    context.lineTo(x2, y2);\n    context.lineTo(c * x0 - s * y0, s * x0 + c * y0);\n    context.lineTo(c * x1 - s * y1, s * x1 + c * y1);\n    context.lineTo(c * x2 - s * y2, s * x2 + c * y2);\n    context.lineTo(c * x0 + s * y0, c * y0 - s * x0);\n    context.lineTo(c * x1 + s * y1, c * y1 - s * x1);\n    context.lineTo(c * x2 + s * y2, c * y2 - s * x2);\n    context.closePath();\n  }\n};\n","import {Timer} from \"./timer.js\";\n\nexport default function(callback, delay, time) {\n  var t = new Timer;\n  delay = delay == null ? 0 : +delay;\n  t.restart(elapsed => {\n    t.stop();\n    callback(elapsed + delay);\n  }, delay, time);\n  return t;\n}\n","export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n","import namespaces from \"./namespaces.js\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name; // eslint-disable-line no-prototype-builtins\n}\n","import namespace from \"./namespace.js\";\nimport {xhtml} from \"./namespaces.js\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n","function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n","import {Selection} from \"./index.js\";\nimport selector from \"../selector.js\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","// Given something array like (or null), returns something that is strictly an\n// array. This is used to ensure that array-like objects passed to d3.selectAll\n// or selection.selectAll are converted into proper arrays when creating a\n// selection; we dont ever want to create a selection backed by a live\n// HTMLCollection or NodeList. However, note that selection.selectAll will use a\n// static NodeList as a group, since it safely derived from querySelectorAll.\nexport default function array(x) {\n  return x == null ? [] : Array.isArray(x) ? x : Array.from(x);\n}\n","function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n","import {Selection} from \"./index.js\";\nimport array from \"../array.js\";\nimport selectorAll from \"../selectorAll.js\";\n\nfunction arrayAll(select) {\n  return function() {\n    return array(select.apply(this, arguments));\n  };\n}\n\nexport default function(select) {\n  if (typeof select === \"function\") select = arrayAll(select);\n  else select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n","export default function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n}\n\nexport function childMatcher(selector) {\n  return function(node) {\n    return node.matches(selector);\n  };\n}\n\n","import {childMatcher} from \"../matcher.js\";\n\nvar find = Array.prototype.find;\n\nfunction childFind(match) {\n  return function() {\n    return find.call(this.children, match);\n  };\n}\n\nfunction childFirst() {\n  return this.firstElementChild;\n}\n\nexport default function(match) {\n  return this.select(match == null ? childFirst\n      : childFind(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","import {childMatcher} from \"../matcher.js\";\n\nvar filter = Array.prototype.filter;\n\nfunction children() {\n  return Array.from(this.children);\n}\n\nfunction childrenFilter(match) {\n  return function() {\n    return filter.call(this.children, match);\n  };\n}\n\nexport default function(match) {\n  return this.selectAll(match == null ? children\n      : childrenFilter(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","import {Selection} from \"./index.js\";\nimport matcher from \"../matcher.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","export default function(update) {\n  return new Array(update.length);\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import {Selection} from \"./index.js\";\nimport {EnterNode} from \"./enter.js\";\nimport constant from \"../constant.js\";\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that dont fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = new Map,\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = key.call(node, node.__data__, i, group) + \"\";\n      if (nodeByKeyValue.has(keyValue)) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue.set(keyValue, node);\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = key.call(parent, data[i], i, data) + \"\";\n    if (node = nodeByKeyValue.get(keyValue)) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue.delete(keyValue);\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue.get(keyValues[i]) === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction datum(node) {\n  return node.__data__;\n}\n\nexport default function(value, key) {\n  if (!arguments.length) return Array.from(this, datum);\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = arraylike(value.call(parent, parent && parent.__data__, j, parents)),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n\n// Given some data, this returns an array-like view of it: an object that\n// exposes a length property and allows numeric indexing. Note that unlike\n// selectAll, this isnt worried about live collections because the resulting\n// array will only be used briefly while data is being bound. (It is possible to\n// cause the data to change while iterating by using a key function, but please\n// dont; wed rather avoid a gratuitous copy.)\nfunction arraylike(data) {\n  return typeof data === \"object\" && \"length\" in data\n    ? data // Array, TypedArray, NodeList, array-like\n    : Array.from(data); // Map, Set, iterable, string, or anything else\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n","export default function(onenter, onupdate, onexit) {\n  var enter = this.enter(), update = this, exit = this.exit();\n  if (typeof onenter === \"function\") {\n    enter = onenter(enter);\n    if (enter) enter = enter.selection();\n  } else {\n    enter = enter.append(onenter + \"\");\n  }\n  if (onupdate != null) {\n    update = onupdate(update);\n    if (update) update = update.selection();\n  }\n  if (onexit == null) exit.remove(); else onexit(exit);\n  return enter && update ? enter.merge(update).order() : update;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(context) {\n  var selection = context.selection ? context.selection() : context;\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && node.compareDocumentPosition(next) ^ 4) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n","export default function() {\n  return Array.from(this);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n","export default function() {\n  let size = 0;\n  for (const node of this) ++size; // eslint-disable-line no-unused-vars\n  return size;\n}\n","export default function() {\n  return !this.node();\n}\n","export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n","import namespace from \"../namespace.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n","export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n","import defaultView from \"../window.js\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : styleValue(this.node(), name);\n}\n\nexport function styleValue(node, name) {\n  return node.style.getPropertyValue(name)\n      || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\n}\n","function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n","function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n","function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n","function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n","function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n","function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n","import creator from \"../creator.js\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n","import creator from \"../creator.js\";\nimport selector from \"../selector.js\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n","function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n","function selection_cloneShallow() {\n  var clone = this.cloneNode(false), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nfunction selection_cloneDeep() {\n  var clone = this.cloneNode(true), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nexport default function(deep) {\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\n}\n","export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n","function contextListener(listener) {\n  return function(event) {\n    listener.call(this, event, this.__data__);\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, options) {\n  return function() {\n    var on = this.__on, o, listener = contextListener(value);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n        this.addEventListener(o.type, o.listener = listener, o.options = options);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, options);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, options: options};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, options) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, options));\n  return this;\n}\n","import defaultView from \"../window.js\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (typeof event === \"function\") {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n","export default function*() {\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) yield node;\n    }\n  }\n}\n","import selection_select from \"./select.js\";\nimport selection_selectAll from \"./selectAll.js\";\nimport selection_selectChild from \"./selectChild.js\";\nimport selection_selectChildren from \"./selectChildren.js\";\nimport selection_filter from \"./filter.js\";\nimport selection_data from \"./data.js\";\nimport selection_enter from \"./enter.js\";\nimport selection_exit from \"./exit.js\";\nimport selection_join from \"./join.js\";\nimport selection_merge from \"./merge.js\";\nimport selection_order from \"./order.js\";\nimport selection_sort from \"./sort.js\";\nimport selection_call from \"./call.js\";\nimport selection_nodes from \"./nodes.js\";\nimport selection_node from \"./node.js\";\nimport selection_size from \"./size.js\";\nimport selection_empty from \"./empty.js\";\nimport selection_each from \"./each.js\";\nimport selection_attr from \"./attr.js\";\nimport selection_style from \"./style.js\";\nimport selection_property from \"./property.js\";\nimport selection_classed from \"./classed.js\";\nimport selection_text from \"./text.js\";\nimport selection_html from \"./html.js\";\nimport selection_raise from \"./raise.js\";\nimport selection_lower from \"./lower.js\";\nimport selection_append from \"./append.js\";\nimport selection_insert from \"./insert.js\";\nimport selection_remove from \"./remove.js\";\nimport selection_clone from \"./clone.js\";\nimport selection_datum from \"./datum.js\";\nimport selection_on from \"./on.js\";\nimport selection_dispatch from \"./dispatch.js\";\nimport selection_iterator from \"./iterator.js\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nfunction selection_selection() {\n  return this;\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  selectChild: selection_selectChild,\n  selectChildren: selection_selectChildren,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  join: selection_join,\n  merge: selection_merge,\n  selection: selection_selection,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  clone: selection_clone,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch,\n  [Symbol.iterator]: selection_iterator\n};\n\nexport default selection;\n","import {Selection, root} from \"./selection/index.js\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([[document.querySelector(selector)]], [document.documentElement])\n      : new Selection([[selector]], root);\n}\n","export default function(event) {\n  let sourceEvent;\n  while (sourceEvent = event.sourceEvent) event = sourceEvent;\n  return event;\n}\n","import sourceEvent from \"./sourceEvent.js\";\n\nexport default function(event, node) {\n  event = sourceEvent(event);\n  if (node === undefined) node = event.currentTarget;\n  if (node) {\n    var svg = node.ownerSVGElement || node;\n    if (svg.createSVGPoint) {\n      var point = svg.createSVGPoint();\n      point.x = event.clientX, point.y = event.clientY;\n      point = point.matrixTransform(node.getScreenCTM().inverse());\n      return [point.x, point.y];\n    }\n    if (node.getBoundingClientRect) {\n      var rect = node.getBoundingClientRect();\n      return [event.clientX - rect.left - node.clientLeft, event.clientY - rect.top - node.clientTop];\n    }\n  }\n  return [event.pageX, event.pageY];\n}\n","// These are typically used in conjunction with noevent to ensure that we can\n// preventDefault on the event.\nexport const nonpassive = {passive: false};\nexport const nonpassivecapture = {capture: true, passive: false};\n\nexport function nopropagation(event) {\n  event.stopImmediatePropagation();\n}\n\nexport default function(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n","import {select} from \"d3-selection\";\nimport noevent, {nonpassivecapture} from \"./noevent.js\";\n\nexport default function(view) {\n  var root = view.document.documentElement,\n      selection = select(view).on(\"dragstart.drag\", noevent, nonpassivecapture);\n  if (\"onselectstart\" in root) {\n    selection.on(\"selectstart.drag\", noevent, nonpassivecapture);\n  } else {\n    root.__noselect = root.style.MozUserSelect;\n    root.style.MozUserSelect = \"none\";\n  }\n}\n\nexport function yesdrag(view, noclick) {\n  var root = view.document.documentElement,\n      selection = select(view).on(\"dragstart.drag\", null);\n  if (noclick) {\n    selection.on(\"click.drag\", noevent, nonpassivecapture);\n    setTimeout(function() { selection.on(\"click.drag\", null); }, 0);\n  }\n  if (\"onselectstart\" in root) {\n    selection.on(\"selectstart.drag\", null);\n  } else {\n    root.style.MozUserSelect = root.__noselect;\n    delete root.__noselect;\n  }\n}\n","export default x => () => x;\n","export default function DragEvent(type, {\n  sourceEvent,\n  subject,\n  target,\n  identifier,\n  active,\n  x, y, dx, dy,\n  dispatch\n}) {\n  Object.defineProperties(this, {\n    type: {value: type, enumerable: true, configurable: true},\n    sourceEvent: {value: sourceEvent, enumerable: true, configurable: true},\n    subject: {value: subject, enumerable: true, configurable: true},\n    target: {value: target, enumerable: true, configurable: true},\n    identifier: {value: identifier, enumerable: true, configurable: true},\n    active: {value: active, enumerable: true, configurable: true},\n    x: {value: x, enumerable: true, configurable: true},\n    y: {value: y, enumerable: true, configurable: true},\n    dx: {value: dx, enumerable: true, configurable: true},\n    dy: {value: dy, enumerable: true, configurable: true},\n    _: {value: dispatch}\n  });\n}\n\nDragEvent.prototype.on = function() {\n  var value = this._.on.apply(this._, arguments);\n  return value === this._ ? this : value;\n};\n","import {dispatch} from \"d3-dispatch\";\nimport {select, pointer} from \"d3-selection\";\nimport nodrag, {yesdrag} from \"./nodrag.js\";\nimport noevent, {nonpassive, nonpassivecapture, nopropagation} from \"./noevent.js\";\nimport constant from \"./constant.js\";\nimport DragEvent from \"./event.js\";\n\n// Ignore right-click, since that should open the context menu.\nfunction defaultFilter(event) {\n  return !event.ctrlKey && !event.button;\n}\n\nfunction defaultContainer() {\n  return this.parentNode;\n}\n\nfunction defaultSubject(event, d) {\n  return d == null ? {x: event.x, y: event.y} : d;\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\nexport default function() {\n  var filter = defaultFilter,\n      container = defaultContainer,\n      subject = defaultSubject,\n      touchable = defaultTouchable,\n      gestures = {},\n      listeners = dispatch(\"start\", \"drag\", \"end\"),\n      active = 0,\n      mousedownx,\n      mousedowny,\n      mousemoving,\n      touchending,\n      clickDistance2 = 0;\n\n  function drag(selection) {\n    selection\n        .on(\"mousedown.drag\", mousedowned)\n      .filter(touchable)\n        .on(\"touchstart.drag\", touchstarted)\n        .on(\"touchmove.drag\", touchmoved, nonpassive)\n        .on(\"touchend.drag touchcancel.drag\", touchended)\n        .style(\"touch-action\", \"none\")\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  function mousedowned(event, d) {\n    if (touchending || !filter.call(this, event, d)) return;\n    var gesture = beforestart(this, container.call(this, event, d), event, d, \"mouse\");\n    if (!gesture) return;\n    select(event.view)\n      .on(\"mousemove.drag\", mousemoved, nonpassivecapture)\n      .on(\"mouseup.drag\", mouseupped, nonpassivecapture);\n    nodrag(event.view);\n    nopropagation(event);\n    mousemoving = false;\n    mousedownx = event.clientX;\n    mousedowny = event.clientY;\n    gesture(\"start\", event);\n  }\n\n  function mousemoved(event) {\n    noevent(event);\n    if (!mousemoving) {\n      var dx = event.clientX - mousedownx, dy = event.clientY - mousedowny;\n      mousemoving = dx * dx + dy * dy > clickDistance2;\n    }\n    gestures.mouse(\"drag\", event);\n  }\n\n  function mouseupped(event) {\n    select(event.view).on(\"mousemove.drag mouseup.drag\", null);\n    yesdrag(event.view, mousemoving);\n    noevent(event);\n    gestures.mouse(\"end\", event);\n  }\n\n  function touchstarted(event, d) {\n    if (!filter.call(this, event, d)) return;\n    var touches = event.changedTouches,\n        c = container.call(this, event, d),\n        n = touches.length, i, gesture;\n\n    for (i = 0; i < n; ++i) {\n      if (gesture = beforestart(this, c, event, d, touches[i].identifier, touches[i])) {\n        nopropagation(event);\n        gesture(\"start\", event, touches[i]);\n      }\n    }\n  }\n\n  function touchmoved(event) {\n    var touches = event.changedTouches,\n        n = touches.length, i, gesture;\n\n    for (i = 0; i < n; ++i) {\n      if (gesture = gestures[touches[i].identifier]) {\n        noevent(event);\n        gesture(\"drag\", event, touches[i]);\n      }\n    }\n  }\n\n  function touchended(event) {\n    var touches = event.changedTouches,\n        n = touches.length, i, gesture;\n\n    if (touchending) clearTimeout(touchending);\n    touchending = setTimeout(function() { touchending = null; }, 500); // Ghost clicks are delayed!\n    for (i = 0; i < n; ++i) {\n      if (gesture = gestures[touches[i].identifier]) {\n        nopropagation(event);\n        gesture(\"end\", event, touches[i]);\n      }\n    }\n  }\n\n  function beforestart(that, container, event, d, identifier, touch) {\n    var dispatch = listeners.copy(),\n        p = pointer(touch || event, container), dx, dy,\n        s;\n\n    if ((s = subject.call(that, new DragEvent(\"beforestart\", {\n        sourceEvent: event,\n        target: drag,\n        identifier,\n        active,\n        x: p[0],\n        y: p[1],\n        dx: 0,\n        dy: 0,\n        dispatch\n      }), d)) == null) return;\n\n    dx = s.x - p[0] || 0;\n    dy = s.y - p[1] || 0;\n\n    return function gesture(type, event, touch) {\n      var p0 = p, n;\n      switch (type) {\n        case \"start\": gestures[identifier] = gesture, n = active++; break;\n        case \"end\": delete gestures[identifier], --active; // falls through\n        case \"drag\": p = pointer(touch || event, container), n = active; break;\n      }\n      dispatch.call(\n        type,\n        that,\n        new DragEvent(type, {\n          sourceEvent: event,\n          subject: s,\n          target: drag,\n          identifier,\n          active: n,\n          x: p[0] + dx,\n          y: p[1] + dy,\n          dx: p[0] - p0[0],\n          dy: p[1] - p0[1],\n          dispatch\n        }),\n        d\n      );\n    };\n  }\n\n  drag.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), drag) : filter;\n  };\n\n  drag.container = function(_) {\n    return arguments.length ? (container = typeof _ === \"function\" ? _ : constant(_), drag) : container;\n  };\n\n  drag.subject = function(_) {\n    return arguments.length ? (subject = typeof _ === \"function\" ? _ : constant(_), drag) : subject;\n  };\n\n  drag.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), drag) : touchable;\n  };\n\n  drag.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? drag : value;\n  };\n\n  drag.clickDistance = function(_) {\n    return arguments.length ? (clickDistance2 = (_ = +_) * _, drag) : Math.sqrt(clickDistance2);\n  };\n\n  return drag;\n}\n","// Returns the 2D cross product of AB and AC vectors, i.e., the z-component of\n// the 3D cross product in a quadrant I Cartesian coordinate system (+x is\n// right, +y is up). Returns a positive value if ABC is counter-clockwise,\n// negative if clockwise, and zero if the points are collinear.\nexport default function(a, b, c) {\n  return (b[0] - a[0]) * (c[1] - a[1]) - (b[1] - a[1]) * (c[0] - a[0]);\n}\n","import cross from \"./cross.js\";\n\nfunction lexicographicOrder(a, b) {\n  return a[0] - b[0] || a[1] - b[1];\n}\n\n// Computes the upper convex hull per the monotone chain algorithm.\n// Assumes points.length >= 3, is sorted by x, unique in y.\n// Returns an array of indices into points in left-to-right order.\nfunction computeUpperHullIndexes(points) {\n  const n = points.length,\n      indexes = [0, 1];\n  let size = 2, i;\n\n  for (i = 2; i < n; ++i) {\n    while (size > 1 && cross(points[indexes[size - 2]], points[indexes[size - 1]], points[i]) <= 0) --size;\n    indexes[size++] = i;\n  }\n\n  return indexes.slice(0, size); // remove popped points\n}\n\nexport default function(points) {\n  if ((n = points.length) < 3) return null;\n\n  var i,\n      n,\n      sortedPoints = new Array(n),\n      flippedPoints = new Array(n);\n\n  for (i = 0; i < n; ++i) sortedPoints[i] = [+points[i][0], +points[i][1], i];\n  sortedPoints.sort(lexicographicOrder);\n  for (i = 0; i < n; ++i) flippedPoints[i] = [sortedPoints[i][0], -sortedPoints[i][1]];\n\n  var upperIndexes = computeUpperHullIndexes(sortedPoints),\n      lowerIndexes = computeUpperHullIndexes(flippedPoints);\n\n  // Construct the hull polygon, removing possible duplicate endpoints.\n  var skipLeft = lowerIndexes[0] === upperIndexes[0],\n      skipRight = lowerIndexes[lowerIndexes.length - 1] === upperIndexes[upperIndexes.length - 1],\n      hull = [];\n\n  // Add upper hull in right-to-l order.\n  // Then add lower hull in left-to-right order.\n  for (i = upperIndexes.length - 1; i >= 0; --i) hull.push(points[sortedPoints[upperIndexes[i]][2]]);\n  for (i = +skipLeft; i < lowerIndexes.length - skipRight; ++i) hull.push(points[sortedPoints[lowerIndexes[i]][2]]);\n\n  return hull;\n}\n","import { SymbolResource, NodeResource, FileResource, Resource } from '../types'\n\nexport const hasPath = (\n  resource: string | number | Resource\n): resource is SymbolResource | NodeResource | FileResource => {\n  if (\n    typeof resource === 'object' &&\n    (resource.type === 'Symbol' ||\n      resource.type === 'Node' ||\n      resource.type === 'File')\n  ) {\n    return true\n  }\n\n  return false\n}\n\nexport const hasKind = (\n  resource: string | number | Resource\n): resource is SymbolResource | NodeResource => {\n  if (\n    typeof resource === 'object' &&\n    (resource.type === 'Symbol' || resource.type === 'Node')\n  ) {\n    return true\n  }\n\n  return false\n}\n","import { SimulationLinkDatum, SimulationNodeDatum } from 'd3-force'\nimport { FileResource, Graph, GraphNode, Relation } from './types'\nimport { hasPath } from './utils/guards'\n\nexport type GraphLink = SimulationLinkDatum<SimulationNodeDatum & GraphNode> & {\n  relation: Relation\n  group: string\n}\n\nexport const graphEdgeToLinks = (graph: Graph): GraphLink[] =>\n  graph.edges.reduce((links: GraphLink[], edge) => {\n    const targetNode = graph.nodes[edge.to]\n    const group = hasPath(targetNode) ? targetNode.path : 'leaf'\n\n    return [\n      ...links,\n      { source: edge.from, target: edge.to, group, relation: edge.relation },\n    ]\n  }, [])\n\ntype GroupedGraph = {\n  nodes: GraphNode[]\n  links: GraphLink[]\n  groupLinks: GraphLink[]\n  groups: (FileResource & SimulationNodeDatum)[]\n}\n\nexport const graphToGroupedGraph = (graph: Graph): GroupedGraph => {\n  const nodes = [...graph.nodes]\n\n  const files = nodes.filter((node) => node.type === 'File') as FileResource[]\n  const fileLinkedNodes = graph.nodes.filter(\n    (node) => hasPath(node) && node.type !== 'File'\n  )\n\n  const groupedGraph: GroupedGraph = {\n    nodes: graph.nodes,\n    links: graphEdgeToLinks(graph),\n    groupLinks: [],\n    groups: files,\n  }\n\n  const fileIndexByPath = (path: string): number | undefined =>\n    files.find((file) => file.path === path)?.index\n\n  for (const file of files) {\n    const fileIndex = fileIndexByPath(file.path)\n\n    if (fileIndex === undefined) break\n\n    for (const node of fileLinkedNodes) {\n      if (hasPath(node) && node.path === file.path) {\n        groupedGraph.groupLinks.push({\n          source: node.index,\n          target: file.index,\n          group: node.path,\n          relation: {\n            type: '',\n          },\n        })\n      }\n    }\n  }\n\n  return groupedGraph\n}\n\nexport const isInterGroupLink = (\n  source: GraphLink['source'],\n  target: GraphLink['target']\n): boolean => {\n  if (hasPath(source) && hasPath(target)) {\n    return (\n      (target.path !== '' || target.path !== '') && target.path === source.path\n    )\n  }\n\n  return false\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {timer, timeout} from \"d3-timer\";\n\nvar emptyOn = dispatch(\"start\", \"end\", \"cancel\", \"interrupt\");\nvar emptyTween = [];\n\nexport var CREATED = 0;\nexport var SCHEDULED = 1;\nexport var STARTING = 2;\nexport var STARTED = 3;\nexport var RUNNING = 4;\nexport var ENDING = 5;\nexport var ENDED = 6;\n\nexport default function(node, name, id, index, group, timing) {\n  var schedules = node.__transition;\n  if (!schedules) node.__transition = {};\n  else if (id in schedules) return;\n  create(node, id, {\n    name: name,\n    index: index, // For context during callback.\n    group: group, // For context during callback.\n    on: emptyOn,\n    tween: emptyTween,\n    time: timing.time,\n    delay: timing.delay,\n    duration: timing.duration,\n    ease: timing.ease,\n    timer: null,\n    state: CREATED\n  });\n}\n\nexport function init(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > CREATED) throw new Error(\"too late; already scheduled\");\n  return schedule;\n}\n\nexport function set(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > STARTED) throw new Error(\"too late; already running\");\n  return schedule;\n}\n\nexport function get(node, id) {\n  var schedule = node.__transition;\n  if (!schedule || !(schedule = schedule[id])) throw new Error(\"transition not found\");\n  return schedule;\n}\n\nfunction create(node, id, self) {\n  var schedules = node.__transition,\n      tween;\n\n  // Initialize the self timer when the transition is created.\n  // Note the actual delay is not known until the first callback!\n  schedules[id] = self;\n  self.timer = timer(schedule, 0, self.time);\n\n  function schedule(elapsed) {\n    self.state = SCHEDULED;\n    self.timer.restart(start, self.delay, self.time);\n\n    // If the elapsed delay is less than our first sleep, start immediately.\n    if (self.delay <= elapsed) start(elapsed - self.delay);\n  }\n\n  function start(elapsed) {\n    var i, j, n, o;\n\n    // If the state is not SCHEDULED, then we previously errored on start.\n    if (self.state !== SCHEDULED) return stop();\n\n    for (i in schedules) {\n      o = schedules[i];\n      if (o.name !== self.name) continue;\n\n      // While this element already has a starting transition during this frame,\n      // defer starting an interrupting transition until that transition has a\n      // chance to tick (and possibly end); see d3/d3-transition#54!\n      if (o.state === STARTED) return timeout(start);\n\n      // Interrupt the active transition, if any.\n      if (o.state === RUNNING) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"interrupt\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n\n      // Cancel any pre-empted transitions.\n      else if (+i < id) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"cancel\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n    }\n\n    // Defer the first tick to end of the current frame; see d3/d3#1576.\n    // Note the transition may be canceled after start and before the first tick!\n    // Note this must be scheduled before the start event; see d3/d3-transition#16!\n    // Assuming this is successful, subsequent callbacks go straight to tick.\n    timeout(function() {\n      if (self.state === STARTED) {\n        self.state = RUNNING;\n        self.timer.restart(tick, self.delay, self.time);\n        tick(elapsed);\n      }\n    });\n\n    // Dispatch the start event.\n    // Note this must be done before the tween are initialized.\n    self.state = STARTING;\n    self.on.call(\"start\", node, node.__data__, self.index, self.group);\n    if (self.state !== STARTING) return; // interrupted\n    self.state = STARTED;\n\n    // Initialize the tween, deleting null tween.\n    tween = new Array(n = self.tween.length);\n    for (i = 0, j = -1; i < n; ++i) {\n      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {\n        tween[++j] = o;\n      }\n    }\n    tween.length = j + 1;\n  }\n\n  function tick(elapsed) {\n    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1),\n        i = -1,\n        n = tween.length;\n\n    while (++i < n) {\n      tween[i].call(node, t);\n    }\n\n    // Dispatch the end event.\n    if (self.state === ENDING) {\n      self.on.call(\"end\", node, node.__data__, self.index, self.group);\n      stop();\n    }\n  }\n\n  function stop() {\n    self.state = ENDED;\n    self.timer.stop();\n    delete schedules[id];\n    for (var i in schedules) return; // eslint-disable-line no-unused-vars\n    delete node.__transition;\n  }\n}\n","import {STARTING, ENDING, ENDED} from \"./transition/schedule.js\";\n\nexport default function(node, name) {\n  var schedules = node.__transition,\n      schedule,\n      active,\n      empty = true,\n      i;\n\n  if (!schedules) return;\n\n  name = name == null ? null : name + \"\";\n\n  for (i in schedules) {\n    if ((schedule = schedules[i]).name !== name) { empty = false; continue; }\n    active = schedule.state > STARTING && schedule.state < ENDING;\n    schedule.state = ENDED;\n    schedule.timer.stop();\n    schedule.on.call(active ? \"interrupt\" : \"cancel\", node, node.__data__, schedule.index, schedule.group);\n    delete schedules[i];\n  }\n\n  if (empty) delete node.__transition;\n}\n","import interrupt from \"../interrupt.js\";\n\nexport default function(name) {\n  return this.each(function() {\n    interrupt(this, name);\n  });\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction tweenRemove(id, name) {\n  var tween0, tween1;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = tween0 = tween;\n      for (var i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1 = tween1.slice();\n          tween1.splice(i, 1);\n          break;\n        }\n      }\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nfunction tweenFunction(id, name, value) {\n  var tween0, tween1;\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = (tween0 = tween).slice();\n      for (var t = {name: name, value: value}, i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1[i] = t;\n          break;\n        }\n      }\n      if (i === n) tween1.push(t);\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nexport default function(name, value) {\n  var id = this._id;\n\n  name += \"\";\n\n  if (arguments.length < 2) {\n    var tween = get(this.node(), id).tween;\n    for (var i = 0, n = tween.length, t; i < n; ++i) {\n      if ((t = tween[i]).name === name) {\n        return t.value;\n      }\n    }\n    return null;\n  }\n\n  return this.each((value == null ? tweenRemove : tweenFunction)(id, name, value));\n}\n\nexport function tweenValue(transition, name, value) {\n  var id = transition._id;\n\n  transition.each(function() {\n    var schedule = set(this, id);\n    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);\n  });\n\n  return function(node) {\n    return get(node, id).value[name];\n  };\n}\n","import {color} from \"d3-color\";\nimport {interpolateNumber, interpolateRgb, interpolateString} from \"d3-interpolate\";\n\nexport default function(a, b) {\n  var c;\n  return (typeof b === \"number\" ? interpolateNumber\n      : b instanceof color ? interpolateRgb\n      : (c = color(b)) ? (b = c, interpolateRgb)\n      : interpolateString)(a, b);\n}\n","import {interpolateTransformSvg as interpolateTransform} from \"d3-interpolate\";\nimport {namespace} from \"d3-selection\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttribute(name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrConstantNS(fullname, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttributeNS(fullname.space, fullname.local);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttribute(name);\n    string0 = this.getAttribute(name);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction attrFunctionNS(fullname, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttributeNS(fullname.space, fullname.local);\n    string0 = this.getAttributeNS(fullname.space, fullname.local);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name), i = fullname === \"transform\" ? interpolateTransform : interpolate;\n  return this.attrTween(name, typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)(fullname, i, tweenValue(this, \"attr.\" + name, value))\n      : value == null ? (fullname.local ? attrRemoveNS : attrRemove)(fullname)\n      : (fullname.local ? attrConstantNS : attrConstant)(fullname, i, value));\n}\n","import {namespace} from \"d3-selection\";\n\nfunction attrInterpolate(name, i) {\n  return function(t) {\n    this.setAttribute(name, i.call(this, t));\n  };\n}\n\nfunction attrInterpolateNS(fullname, i) {\n  return function(t) {\n    this.setAttributeNS(fullname.space, fullname.local, i.call(this, t));\n  };\n}\n\nfunction attrTweenNS(fullname, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolateNS(fullname, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nfunction attrTween(name, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolate(name, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value) {\n  var key = \"attr.\" + name;\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  var fullname = namespace(name);\n  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));\n}\n","import {get, init} from \"./schedule.js\";\n\nfunction delayFunction(id, value) {\n  return function() {\n    init(this, id).delay = +value.apply(this, arguments);\n  };\n}\n\nfunction delayConstant(id, value) {\n  return value = +value, function() {\n    init(this, id).delay = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? delayFunction\n          : delayConstant)(id, value))\n      : get(this.node(), id).delay;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction durationFunction(id, value) {\n  return function() {\n    set(this, id).duration = +value.apply(this, arguments);\n  };\n}\n\nfunction durationConstant(id, value) {\n  return value = +value, function() {\n    set(this, id).duration = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? durationFunction\n          : durationConstant)(id, value))\n      : get(this.node(), id).duration;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction easeConstant(id, value) {\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    set(this, id).ease = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each(easeConstant(id, value))\n      : get(this.node(), id).ease;\n}\n","import {set} from \"./schedule.js\";\n\nfunction easeVarying(id, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (typeof v !== \"function\") throw new Error;\n    set(this, id).ease = v;\n  };\n}\n\nexport default function(value) {\n  if (typeof value !== \"function\") throw new Error;\n  return this.each(easeVarying(this._id, value));\n}\n","import {matcher} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, this._name, this._id);\n}\n","import {Transition} from \"./index.js\";\n\nexport default function(transition) {\n  if (transition._id !== this._id) throw new Error;\n\n  for (var groups0 = this._groups, groups1 = transition._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Transition(merges, this._parents, this._name, this._id);\n}\n","import {get, set, init} from \"./schedule.js\";\n\nfunction start(name) {\n  return (name + \"\").trim().split(/^|\\s+/).every(function(t) {\n    var i = t.indexOf(\".\");\n    if (i >= 0) t = t.slice(0, i);\n    return !t || t === \"start\";\n  });\n}\n\nfunction onFunction(id, name, listener) {\n  var on0, on1, sit = start(name) ? init : set;\n  return function() {\n    var schedule = sit(this, id),\n        on = schedule.on;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and were done!\n    // Otherwise, copy-on-write.\n    if (on !== on0) (on1 = (on0 = on).copy()).on(name, listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, listener) {\n  var id = this._id;\n\n  return arguments.length < 2\n      ? get(this.node(), id).on.on(name)\n      : this.each(onFunction(id, name, listener));\n}\n","function removeFunction(id) {\n  return function() {\n    var parent = this.parentNode;\n    for (var i in this.__transition) if (+i !== id) return;\n    if (parent) parent.removeChild(this);\n  };\n}\n\nexport default function() {\n  return this.on(\"end.remove\", removeFunction(this._id));\n}\n","import {selector} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n        schedule(subgroup[i], name, id, i, subgroup, get(node, id));\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, name, id);\n}\n","import {selectorAll} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        for (var children = select.call(node, node.__data__, i, group), child, inherit = get(node, id), k = 0, l = children.length; k < l; ++k) {\n          if (child = children[k]) {\n            schedule(child, name, id, k, children, inherit);\n          }\n        }\n        subgroups.push(children);\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, parents, name, id);\n}\n","import {selection} from \"d3-selection\";\n\nvar Selection = selection.prototype.constructor;\n\nexport default function() {\n  return new Selection(this._groups, this._parents);\n}\n","import {interpolateTransformCss as interpolateTransform} from \"d3-interpolate\";\nimport {style} from \"d3-selection\";\nimport {set} from \"./schedule.js\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction styleNull(name, interpolate) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        string1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, string10 = string1);\n  };\n}\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = style(this, name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction styleFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        value1 = value(this),\n        string1 = value1 + \"\";\n    if (value1 == null) string1 = value1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction styleMaybeRemove(id, name) {\n  var on0, on1, listener0, key = \"style.\" + name, event = \"end.\" + key, remove;\n  return function() {\n    var schedule = set(this, id),\n        on = schedule.on,\n        listener = schedule.value[key] == null ? remove || (remove = styleRemove(name)) : undefined;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and were done!\n    // Otherwise, copy-on-write.\n    if (on !== on0 || listener0 !== listener) (on1 = (on0 = on).copy()).on(event, listener0 = listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, value, priority) {\n  var i = (name += \"\") === \"transform\" ? interpolateTransform : interpolate;\n  return value == null ? this\n      .styleTween(name, styleNull(name, i))\n      .on(\"end.style.\" + name, styleRemove(name))\n    : typeof value === \"function\" ? this\n      .styleTween(name, styleFunction(name, i, tweenValue(this, \"style.\" + name, value)))\n      .each(styleMaybeRemove(this._id, name))\n    : this\n      .styleTween(name, styleConstant(name, i, value), priority)\n      .on(\"end.style.\" + name, null);\n}\n","function styleInterpolate(name, i, priority) {\n  return function(t) {\n    this.style.setProperty(name, i.call(this, t), priority);\n  };\n}\n\nfunction styleTween(name, value, priority) {\n  var t, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t = (i0 = i) && styleInterpolate(name, i, priority);\n    return t;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value, priority) {\n  var key = \"style.\" + (name += \"\");\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, styleTween(name, value, priority == null ? \"\" : priority));\n}\n","import {tweenValue} from \"./tween.js\";\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var value1 = value(this);\n    this.textContent = value1 == null ? \"\" : value1;\n  };\n}\n\nexport default function(value) {\n  return this.tween(\"text\", typeof value === \"function\"\n      ? textFunction(tweenValue(this, \"text\", value))\n      : textConstant(value == null ? \"\" : value + \"\"));\n}\n","function textInterpolate(i) {\n  return function(t) {\n    this.textContent = i.call(this, t);\n  };\n}\n\nfunction textTween(value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && textInterpolate(i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(value) {\n  var key = \"text\";\n  if (arguments.length < 1) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, textTween(value));\n}\n","import {Transition, newId} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function() {\n  var name = this._name,\n      id0 = this._id,\n      id1 = newId();\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        var inherit = get(node, id0);\n        schedule(node, name, id1, i, group, {\n          time: inherit.time + inherit.delay + inherit.duration,\n          delay: 0,\n          duration: inherit.duration,\n          ease: inherit.ease\n        });\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id1);\n}\n","import {set} from \"./schedule.js\";\n\nexport default function() {\n  var on0, on1, that = this, id = that._id, size = that.size();\n  return new Promise(function(resolve, reject) {\n    var cancel = {value: reject},\n        end = {value: function() { if (--size === 0) resolve(); }};\n\n    that.each(function() {\n      var schedule = set(this, id),\n          on = schedule.on;\n\n      // If this node shared a dispatch with the previous node,\n      // just assign the updated shared dispatch and were done!\n      // Otherwise, copy-on-write.\n      if (on !== on0) {\n        on1 = (on0 = on).copy();\n        on1._.cancel.push(cancel);\n        on1._.interrupt.push(cancel);\n        on1._.end.push(end);\n      }\n\n      schedule.on = on1;\n    });\n\n    // The selection was empty, resolve end immediately\n    if (size === 0) resolve();\n  });\n}\n","import {selection} from \"d3-selection\";\nimport transition_attr from \"./attr.js\";\nimport transition_attrTween from \"./attrTween.js\";\nimport transition_delay from \"./delay.js\";\nimport transition_duration from \"./duration.js\";\nimport transition_ease from \"./ease.js\";\nimport transition_easeVarying from \"./easeVarying.js\";\nimport transition_filter from \"./filter.js\";\nimport transition_merge from \"./merge.js\";\nimport transition_on from \"./on.js\";\nimport transition_remove from \"./remove.js\";\nimport transition_select from \"./select.js\";\nimport transition_selectAll from \"./selectAll.js\";\nimport transition_selection from \"./selection.js\";\nimport transition_style from \"./style.js\";\nimport transition_styleTween from \"./styleTween.js\";\nimport transition_text from \"./text.js\";\nimport transition_textTween from \"./textTween.js\";\nimport transition_transition from \"./transition.js\";\nimport transition_tween from \"./tween.js\";\nimport transition_end from \"./end.js\";\n\nvar id = 0;\n\nexport function Transition(groups, parents, name, id) {\n  this._groups = groups;\n  this._parents = parents;\n  this._name = name;\n  this._id = id;\n}\n\nexport default function transition(name) {\n  return selection().transition(name);\n}\n\nexport function newId() {\n  return ++id;\n}\n\nvar selection_prototype = selection.prototype;\n\nTransition.prototype = transition.prototype = {\n  constructor: Transition,\n  select: transition_select,\n  selectAll: transition_selectAll,\n  selectChild: selection_prototype.selectChild,\n  selectChildren: selection_prototype.selectChildren,\n  filter: transition_filter,\n  merge: transition_merge,\n  selection: transition_selection,\n  transition: transition_transition,\n  call: selection_prototype.call,\n  nodes: selection_prototype.nodes,\n  node: selection_prototype.node,\n  size: selection_prototype.size,\n  empty: selection_prototype.empty,\n  each: selection_prototype.each,\n  on: transition_on,\n  attr: transition_attr,\n  attrTween: transition_attrTween,\n  style: transition_style,\n  styleTween: transition_styleTween,\n  text: transition_text,\n  textTween: transition_textTween,\n  remove: transition_remove,\n  tween: transition_tween,\n  delay: transition_delay,\n  duration: transition_duration,\n  ease: transition_ease,\n  easeVarying: transition_easeVarying,\n  end: transition_end,\n  [Symbol.iterator]: selection_prototype[Symbol.iterator]\n};\n","export function cubicIn(t) {\n  return t * t * t;\n}\n\nexport function cubicOut(t) {\n  return --t * t * t + 1;\n}\n\nexport function cubicInOut(t) {\n  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\n}\n","import {Transition, newId} from \"../transition/index.js\";\nimport schedule from \"../transition/schedule.js\";\nimport {easeCubicInOut} from \"d3-ease\";\nimport {now} from \"d3-timer\";\n\nvar defaultTiming = {\n  time: null, // Set on use.\n  delay: 0,\n  duration: 250,\n  ease: easeCubicInOut\n};\n\nfunction inherit(node, id) {\n  var timing;\n  while (!(timing = node.__transition) || !(timing = timing[id])) {\n    if (!(node = node.parentNode)) {\n      throw new Error(`transition ${id} not found`);\n    }\n  }\n  return timing;\n}\n\nexport default function(name) {\n  var id,\n      timing;\n\n  if (name instanceof Transition) {\n    id = name._id, name = name._name;\n  } else {\n    id = newId(), (timing = defaultTiming).time = now(), name = name == null ? null : name + \"\";\n  }\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        schedule(node, name, id, i, group, timing || inherit(node, id));\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id);\n}\n","import {selection} from \"d3-selection\";\nimport selection_interrupt from \"./interrupt.js\";\nimport selection_transition from \"./transition.js\";\n\nselection.prototype.interrupt = selection_interrupt;\nselection.prototype.transition = selection_transition;\n","export default x => () => x;\n","export default function ZoomEvent(type, {\n  sourceEvent,\n  target,\n  transform,\n  dispatch\n}) {\n  Object.defineProperties(this, {\n    type: {value: type, enumerable: true, configurable: true},\n    sourceEvent: {value: sourceEvent, enumerable: true, configurable: true},\n    target: {value: target, enumerable: true, configurable: true},\n    transform: {value: transform, enumerable: true, configurable: true},\n    _: {value: dispatch}\n  });\n}\n","export function Transform(k, x, y) {\n  this.k = k;\n  this.x = x;\n  this.y = y;\n}\n\nTransform.prototype = {\n  constructor: Transform,\n  scale: function(k) {\n    return k === 1 ? this : new Transform(this.k * k, this.x, this.y);\n  },\n  translate: function(x, y) {\n    return x === 0 & y === 0 ? this : new Transform(this.k, this.x + this.k * x, this.y + this.k * y);\n  },\n  apply: function(point) {\n    return [point[0] * this.k + this.x, point[1] * this.k + this.y];\n  },\n  applyX: function(x) {\n    return x * this.k + this.x;\n  },\n  applyY: function(y) {\n    return y * this.k + this.y;\n  },\n  invert: function(location) {\n    return [(location[0] - this.x) / this.k, (location[1] - this.y) / this.k];\n  },\n  invertX: function(x) {\n    return (x - this.x) / this.k;\n  },\n  invertY: function(y) {\n    return (y - this.y) / this.k;\n  },\n  rescaleX: function(x) {\n    return x.copy().domain(x.range().map(this.invertX, this).map(x.invert, x));\n  },\n  rescaleY: function(y) {\n    return y.copy().domain(y.range().map(this.invertY, this).map(y.invert, y));\n  },\n  toString: function() {\n    return \"translate(\" + this.x + \",\" + this.y + \") scale(\" + this.k + \")\";\n  }\n};\n\nexport var identity = new Transform(1, 0, 0);\n\ntransform.prototype = Transform.prototype;\n\nexport default function transform(node) {\n  while (!node.__zoom) if (!(node = node.parentNode)) return identity;\n  return node.__zoom;\n}\n","export function nopropagation(event) {\n  event.stopImmediatePropagation();\n}\n\nexport default function(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {dragDisable, dragEnable} from \"d3-drag\";\nimport {interpolateZoom} from \"d3-interpolate\";\nimport {select, pointer} from \"d3-selection\";\nimport {interrupt} from \"d3-transition\";\nimport constant from \"./constant.js\";\nimport ZoomEvent from \"./event.js\";\nimport {Transform, identity} from \"./transform.js\";\nimport noevent, {nopropagation} from \"./noevent.js\";\n\n// Ignore right-click, since that should open the context menu.\n// except for pinch-to-zoom, which is sent as a wheel+ctrlKey event\nfunction defaultFilter(event) {\n  return (!event.ctrlKey || event.type === 'wheel') && !event.button;\n}\n\nfunction defaultExtent() {\n  var e = this;\n  if (e instanceof SVGElement) {\n    e = e.ownerSVGElement || e;\n    if (e.hasAttribute(\"viewBox\")) {\n      e = e.viewBox.baseVal;\n      return [[e.x, e.y], [e.x + e.width, e.y + e.height]];\n    }\n    return [[0, 0], [e.width.baseVal.value, e.height.baseVal.value]];\n  }\n  return [[0, 0], [e.clientWidth, e.clientHeight]];\n}\n\nfunction defaultTransform() {\n  return this.__zoom || identity;\n}\n\nfunction defaultWheelDelta(event) {\n  return -event.deltaY * (event.deltaMode === 1 ? 0.05 : event.deltaMode ? 1 : 0.002) * (event.ctrlKey ? 10 : 1);\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\nfunction defaultConstrain(transform, extent, translateExtent) {\n  var dx0 = transform.invertX(extent[0][0]) - translateExtent[0][0],\n      dx1 = transform.invertX(extent[1][0]) - translateExtent[1][0],\n      dy0 = transform.invertY(extent[0][1]) - translateExtent[0][1],\n      dy1 = transform.invertY(extent[1][1]) - translateExtent[1][1];\n  return transform.translate(\n    dx1 > dx0 ? (dx0 + dx1) / 2 : Math.min(0, dx0) || Math.max(0, dx1),\n    dy1 > dy0 ? (dy0 + dy1) / 2 : Math.min(0, dy0) || Math.max(0, dy1)\n  );\n}\n\nexport default function() {\n  var filter = defaultFilter,\n      extent = defaultExtent,\n      constrain = defaultConstrain,\n      wheelDelta = defaultWheelDelta,\n      touchable = defaultTouchable,\n      scaleExtent = [0, Infinity],\n      translateExtent = [[-Infinity, -Infinity], [Infinity, Infinity]],\n      duration = 250,\n      interpolate = interpolateZoom,\n      listeners = dispatch(\"start\", \"zoom\", \"end\"),\n      touchstarting,\n      touchfirst,\n      touchending,\n      touchDelay = 500,\n      wheelDelay = 150,\n      clickDistance2 = 0,\n      tapDistance = 10;\n\n  function zoom(selection) {\n    selection\n        .property(\"__zoom\", defaultTransform)\n        .on(\"wheel.zoom\", wheeled, {passive: false})\n        .on(\"mousedown.zoom\", mousedowned)\n        .on(\"dblclick.zoom\", dblclicked)\n      .filter(touchable)\n        .on(\"touchstart.zoom\", touchstarted)\n        .on(\"touchmove.zoom\", touchmoved)\n        .on(\"touchend.zoom touchcancel.zoom\", touchended)\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  zoom.transform = function(collection, transform, point, event) {\n    var selection = collection.selection ? collection.selection() : collection;\n    selection.property(\"__zoom\", defaultTransform);\n    if (collection !== selection) {\n      schedule(collection, transform, point, event);\n    } else {\n      selection.interrupt().each(function() {\n        gesture(this, arguments)\n          .event(event)\n          .start()\n          .zoom(null, typeof transform === \"function\" ? transform.apply(this, arguments) : transform)\n          .end();\n      });\n    }\n  };\n\n  zoom.scaleBy = function(selection, k, p, event) {\n    zoom.scaleTo(selection, function() {\n      var k0 = this.__zoom.k,\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return k0 * k1;\n    }, p, event);\n  };\n\n  zoom.scaleTo = function(selection, k, p, event) {\n    zoom.transform(selection, function() {\n      var e = extent.apply(this, arguments),\n          t0 = this.__zoom,\n          p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p,\n          p1 = t0.invert(p0),\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return constrain(translate(scale(t0, k1), p0, p1), e, translateExtent);\n    }, p, event);\n  };\n\n  zoom.translateBy = function(selection, x, y, event) {\n    zoom.transform(selection, function() {\n      return constrain(this.__zoom.translate(\n        typeof x === \"function\" ? x.apply(this, arguments) : x,\n        typeof y === \"function\" ? y.apply(this, arguments) : y\n      ), extent.apply(this, arguments), translateExtent);\n    }, null, event);\n  };\n\n  zoom.translateTo = function(selection, x, y, p, event) {\n    zoom.transform(selection, function() {\n      var e = extent.apply(this, arguments),\n          t = this.__zoom,\n          p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p;\n      return constrain(identity.translate(p0[0], p0[1]).scale(t.k).translate(\n        typeof x === \"function\" ? -x.apply(this, arguments) : -x,\n        typeof y === \"function\" ? -y.apply(this, arguments) : -y\n      ), e, translateExtent);\n    }, p, event);\n  };\n\n  function scale(transform, k) {\n    k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], k));\n    return k === transform.k ? transform : new Transform(k, transform.x, transform.y);\n  }\n\n  function translate(transform, p0, p1) {\n    var x = p0[0] - p1[0] * transform.k, y = p0[1] - p1[1] * transform.k;\n    return x === transform.x && y === transform.y ? transform : new Transform(transform.k, x, y);\n  }\n\n  function centroid(extent) {\n    return [(+extent[0][0] + +extent[1][0]) / 2, (+extent[0][1] + +extent[1][1]) / 2];\n  }\n\n  function schedule(transition, transform, point, event) {\n    transition\n        .on(\"start.zoom\", function() { gesture(this, arguments).event(event).start(); })\n        .on(\"interrupt.zoom end.zoom\", function() { gesture(this, arguments).event(event).end(); })\n        .tween(\"zoom\", function() {\n          var that = this,\n              args = arguments,\n              g = gesture(that, args).event(event),\n              e = extent.apply(that, args),\n              p = point == null ? centroid(e) : typeof point === \"function\" ? point.apply(that, args) : point,\n              w = Math.max(e[1][0] - e[0][0], e[1][1] - e[0][1]),\n              a = that.__zoom,\n              b = typeof transform === \"function\" ? transform.apply(that, args) : transform,\n              i = interpolate(a.invert(p).concat(w / a.k), b.invert(p).concat(w / b.k));\n          return function(t) {\n            if (t === 1) t = b; // Avoid rounding error on end.\n            else { var l = i(t), k = w / l[2]; t = new Transform(k, p[0] - l[0] * k, p[1] - l[1] * k); }\n            g.zoom(null, t);\n          };\n        });\n  }\n\n  function gesture(that, args, clean) {\n    return (!clean && that.__zooming) || new Gesture(that, args);\n  }\n\n  function Gesture(that, args) {\n    this.that = that;\n    this.args = args;\n    this.active = 0;\n    this.sourceEvent = null;\n    this.extent = extent.apply(that, args);\n    this.taps = 0;\n  }\n\n  Gesture.prototype = {\n    event: function(event) {\n      if (event) this.sourceEvent = event;\n      return this;\n    },\n    start: function() {\n      if (++this.active === 1) {\n        this.that.__zooming = this;\n        this.emit(\"start\");\n      }\n      return this;\n    },\n    zoom: function(key, transform) {\n      if (this.mouse && key !== \"mouse\") this.mouse[1] = transform.invert(this.mouse[0]);\n      if (this.touch0 && key !== \"touch\") this.touch0[1] = transform.invert(this.touch0[0]);\n      if (this.touch1 && key !== \"touch\") this.touch1[1] = transform.invert(this.touch1[0]);\n      this.that.__zoom = transform;\n      this.emit(\"zoom\");\n      return this;\n    },\n    end: function() {\n      if (--this.active === 0) {\n        delete this.that.__zooming;\n        this.emit(\"end\");\n      }\n      return this;\n    },\n    emit: function(type) {\n      var d = select(this.that).datum();\n      listeners.call(\n        type,\n        this.that,\n        new ZoomEvent(type, {\n          sourceEvent: this.sourceEvent,\n          target: zoom,\n          type,\n          transform: this.that.__zoom,\n          dispatch: listeners\n        }),\n        d\n      );\n    }\n  };\n\n  function wheeled(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var g = gesture(this, args).event(event),\n        t = this.__zoom,\n        k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], t.k * Math.pow(2, wheelDelta.apply(this, arguments)))),\n        p = pointer(event);\n\n    // If the mouse is in the same location as before, reuse it.\n    // If there were recent wheel events, reset the wheel idle timeout.\n    if (g.wheel) {\n      if (g.mouse[0][0] !== p[0] || g.mouse[0][1] !== p[1]) {\n        g.mouse[1] = t.invert(g.mouse[0] = p);\n      }\n      clearTimeout(g.wheel);\n    }\n\n    // If this wheel event wont trigger a transform change, ignore it.\n    else if (t.k === k) return;\n\n    // Otherwise, capture the mouse point and location at the start.\n    else {\n      g.mouse = [p, t.invert(p)];\n      interrupt(this);\n      g.start();\n    }\n\n    noevent(event);\n    g.wheel = setTimeout(wheelidled, wheelDelay);\n    g.zoom(\"mouse\", constrain(translate(scale(t, k), g.mouse[0], g.mouse[1]), g.extent, translateExtent));\n\n    function wheelidled() {\n      g.wheel = null;\n      g.end();\n    }\n  }\n\n  function mousedowned(event, ...args) {\n    if (touchending || !filter.apply(this, arguments)) return;\n    var currentTarget = event.currentTarget,\n        g = gesture(this, args, true).event(event),\n        v = select(event.view).on(\"mousemove.zoom\", mousemoved, true).on(\"mouseup.zoom\", mouseupped, true),\n        p = pointer(event, currentTarget),\n        x0 = event.clientX,\n        y0 = event.clientY;\n\n    dragDisable(event.view);\n    nopropagation(event);\n    g.mouse = [p, this.__zoom.invert(p)];\n    interrupt(this);\n    g.start();\n\n    function mousemoved(event) {\n      noevent(event);\n      if (!g.moved) {\n        var dx = event.clientX - x0, dy = event.clientY - y0;\n        g.moved = dx * dx + dy * dy > clickDistance2;\n      }\n      g.event(event)\n       .zoom(\"mouse\", constrain(translate(g.that.__zoom, g.mouse[0] = pointer(event, currentTarget), g.mouse[1]), g.extent, translateExtent));\n    }\n\n    function mouseupped(event) {\n      v.on(\"mousemove.zoom mouseup.zoom\", null);\n      dragEnable(event.view, g.moved);\n      noevent(event);\n      g.event(event).end();\n    }\n  }\n\n  function dblclicked(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var t0 = this.__zoom,\n        p0 = pointer(event.changedTouches ? event.changedTouches[0] : event, this),\n        p1 = t0.invert(p0),\n        k1 = t0.k * (event.shiftKey ? 0.5 : 2),\n        t1 = constrain(translate(scale(t0, k1), p0, p1), extent.apply(this, args), translateExtent);\n\n    noevent(event);\n    if (duration > 0) select(this).transition().duration(duration).call(schedule, t1, p0, event);\n    else select(this).call(zoom.transform, t1, p0, event);\n  }\n\n  function touchstarted(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var touches = event.touches,\n        n = touches.length,\n        g = gesture(this, args, event.changedTouches.length === n).event(event),\n        started, i, t, p;\n\n    nopropagation(event);\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = pointer(t, this);\n      p = [p, this.__zoom.invert(p), t.identifier];\n      if (!g.touch0) g.touch0 = p, started = true, g.taps = 1 + !!touchstarting;\n      else if (!g.touch1 && g.touch0[2] !== p[2]) g.touch1 = p, g.taps = 0;\n    }\n\n    if (touchstarting) touchstarting = clearTimeout(touchstarting);\n\n    if (started) {\n      if (g.taps < 2) touchfirst = p[0], touchstarting = setTimeout(function() { touchstarting = null; }, touchDelay);\n      interrupt(this);\n      g.start();\n    }\n  }\n\n  function touchmoved(event, ...args) {\n    if (!this.__zooming) return;\n    var g = gesture(this, args).event(event),\n        touches = event.changedTouches,\n        n = touches.length, i, t, p, l;\n\n    noevent(event);\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = pointer(t, this);\n      if (g.touch0 && g.touch0[2] === t.identifier) g.touch0[0] = p;\n      else if (g.touch1 && g.touch1[2] === t.identifier) g.touch1[0] = p;\n    }\n    t = g.that.__zoom;\n    if (g.touch1) {\n      var p0 = g.touch0[0], l0 = g.touch0[1],\n          p1 = g.touch1[0], l1 = g.touch1[1],\n          dp = (dp = p1[0] - p0[0]) * dp + (dp = p1[1] - p0[1]) * dp,\n          dl = (dl = l1[0] - l0[0]) * dl + (dl = l1[1] - l0[1]) * dl;\n      t = scale(t, Math.sqrt(dp / dl));\n      p = [(p0[0] + p1[0]) / 2, (p0[1] + p1[1]) / 2];\n      l = [(l0[0] + l1[0]) / 2, (l0[1] + l1[1]) / 2];\n    }\n    else if (g.touch0) p = g.touch0[0], l = g.touch0[1];\n    else return;\n\n    g.zoom(\"touch\", constrain(translate(t, p, l), g.extent, translateExtent));\n  }\n\n  function touchended(event, ...args) {\n    if (!this.__zooming) return;\n    var g = gesture(this, args).event(event),\n        touches = event.changedTouches,\n        n = touches.length, i, t;\n\n    nopropagation(event);\n    if (touchending) clearTimeout(touchending);\n    touchending = setTimeout(function() { touchending = null; }, touchDelay);\n    for (i = 0; i < n; ++i) {\n      t = touches[i];\n      if (g.touch0 && g.touch0[2] === t.identifier) delete g.touch0;\n      else if (g.touch1 && g.touch1[2] === t.identifier) delete g.touch1;\n    }\n    if (g.touch1 && !g.touch0) g.touch0 = g.touch1, delete g.touch1;\n    if (g.touch0) g.touch0[1] = this.__zoom.invert(g.touch0[0]);\n    else {\n      g.end();\n      // If this was a dbltap, reroute to the (optional) dblclick.zoom handler.\n      if (g.taps === 2) {\n        t = pointer(t, this);\n        if (Math.hypot(touchfirst[0] - t[0], touchfirst[1] - t[1]) < tapDistance) {\n          var p = select(this).on(\"dblclick.zoom\");\n          if (p) p.apply(this, arguments);\n        }\n      }\n    }\n  }\n\n  zoom.wheelDelta = function(_) {\n    return arguments.length ? (wheelDelta = typeof _ === \"function\" ? _ : constant(+_), zoom) : wheelDelta;\n  };\n\n  zoom.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), zoom) : filter;\n  };\n\n  zoom.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), zoom) : touchable;\n  };\n\n  zoom.extent = function(_) {\n    return arguments.length ? (extent = typeof _ === \"function\" ? _ : constant([[+_[0][0], +_[0][1]], [+_[1][0], +_[1][1]]]), zoom) : extent;\n  };\n\n  zoom.scaleExtent = function(_) {\n    return arguments.length ? (scaleExtent[0] = +_[0], scaleExtent[1] = +_[1], zoom) : [scaleExtent[0], scaleExtent[1]];\n  };\n\n  zoom.translateExtent = function(_) {\n    return arguments.length ? (translateExtent[0][0] = +_[0][0], translateExtent[1][0] = +_[1][0], translateExtent[0][1] = +_[0][1], translateExtent[1][1] = +_[1][1], zoom) : [[translateExtent[0][0], translateExtent[0][1]], [translateExtent[1][0], translateExtent[1][1]]];\n  };\n\n  zoom.constrain = function(_) {\n    return arguments.length ? (constrain = _, zoom) : constrain;\n  };\n\n  zoom.duration = function(_) {\n    return arguments.length ? (duration = +_, zoom) : duration;\n  };\n\n  zoom.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, zoom) : interpolate;\n  };\n\n  zoom.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? zoom : value;\n  };\n\n  zoom.clickDistance = function(_) {\n    return arguments.length ? (clickDistance2 = (_ = +_) * _, zoom) : Math.sqrt(clickDistance2);\n  };\n\n  zoom.tapDistance = function(_) {\n    return arguments.length ? (tapDistance = +_, zoom) : tapDistance;\n  };\n\n  return zoom;\n}\n","import { SimulationNodeDatum } from 'd3-force'\nimport { select } from 'd3-selection'\nimport { zoom } from 'd3-zoom'\nimport { Resource } from '../types'\n\nexport type GraphDatum = SimulationNodeDatum & Resource\n\nexport const initGraph = (el: HTMLDivElement) => {\n  const elSize = el.getBoundingClientRect()\n  const height = elSize.height >= 120 ? elSize.height : 600\n  const width = elSize.width >= 100 ? elSize.width : 600\n\n  const svg = select(el)\n    .append('svg')\n    .attr('viewBox', [-width / 2, -height / 2, width, height].join(' '))\n\n  const svgContent = svg.append('g')\n\n  const zoomFn = zoom<SVGSVGElement, unknown>().on('zoom', ({ transform }) => {\n    svgContent.attr('transform', transform)\n  })\n\n  svg.call(zoomFn)\n\n  svg\n    .append('svg:defs')\n    .selectAll('marker')\n    .data(['end'])\n    .enter()\n    .append('svg:marker')\n    .attr('id', String)\n    .attr('viewBox', '0 -6 12 12')\n    .attr('refX', 24)\n    .attr('refY', 0)\n    .attr('markerWidth', 6)\n    .attr('markerHeight', 6)\n    .attr('orient', 'auto')\n    .append('svg:path')\n    .attr('d', 'M0,-6L12,0L0,6')\n\n  return {\n    height,\n    width,\n    svg: svgContent,\n  }\n}\n","import { SimulationNodeDatum } from 'd3-force'\n\ntype NodeType = string | number | SimulationNodeDatum\n\nexport const getNodeX = (node: NodeType): number => {\n  if (typeof node === 'number') {\n    return node\n  } else if (typeof node === 'string') {\n    return Number.parseInt(node, 10)\n  }\n\n  return node.x ?? 0\n}\n\nexport const getNodeY = (node: NodeType): number => {\n  if (typeof node === 'number') {\n    return node\n  } else if (typeof node === 'string') {\n    return Number.parseInt(node, 10)\n  }\n\n  return node.y ?? 0\n}\n","import { Relation, Resource } from '../types'\n\nexport const getResourceLabel = (resource: Resource): string => {\n  switch (resource.type) {\n    case 'Module': {\n      return `${resource.language} ${resource.name}`\n    }\n    case 'Source': {\n      return `${resource.type} ${resource.name}`\n    }\n    case 'Symbol': {\n      return `${resource.kind} ${resource.name}`\n    }\n    case 'Node': {\n      return resource.kind\n    }\n    case 'File': {\n      return resource.path\n    }\n    case 'Url': {\n      return resource.url\n    }\n  }\n}\n\nexport const getRelationLabel = (relation: Relation): string => {\n  switch (relation.type) {\n    case 'Assign':\n    case 'Read':\n    case 'Use': {\n      return `${relation.type}s`\n    }\n    case 'Convert':\n    case 'Import': {\n      return `${relation.type}s${relation.auto ? ' (auto)' : ''}`\n    }\n    default: {\n      return `${relation.type}s`\n    }\n  }\n}\n","import {\n  symbol,\n  symbolCircle,\n  symbolDiamond,\n  symbolSquare,\n  symbolStar,\n  symbolTriangle,\n  symbolWye,\n} from 'd3-shape'\nimport { Resource } from '../types'\n\nexport const getResourceSymbol = (resource: Resource, size = 512) => {\n  switch (resource.type) {\n    case 'Node': {\n      return symbol(symbolTriangle, size)\n    }\n    case 'Symbol': {\n      return symbol(symbolDiamond, size)\n    }\n    case 'Source': {\n      return symbol(symbolStar, size)\n    }\n    case 'File': {\n      return symbol(symbolWye, size)\n    }\n    case 'Url': {\n      return symbol(symbolSquare, size)\n    }\n    case 'Module':\n    default: {\n      return symbol(symbolCircle, size)\n    }\n  }\n}\n",":host,\nstencila-project-graph,\n.projectGraph {\n  display: block;\n  height: 100%;\n  width: 100%;\n\n  --graph-background: #fff;\n  --graphColor-text: var(--color-key, #000);\n  --graphColor-link: var(--color-neutral-100);\n  --graphColor-default: var(--color-neutral-300);\n  --graphColor-file: #ffec6f;\n  --graphColor-source: #ccebc5;\n  --graphColor-symbol: #bc80bd;\n  --graphColor-module: #d9d9d9;\n  --graphColor-node: #fccde5;\n  --graphColor-url: #80b1d3;\n  --graphColor-file: #b3de69;\n  --graphColor-file: #fdb462;\n  --graphColor-file: #fb7f72;\n  --graphColor-file: #bebada;\n}\n\n.hullContainer path {\n  fill: var(--graphColor-file);\n  opacity: 0.2;\n}\n\n.linkContainer line {\n  stroke: var(--graphColor-link);\n  stroke-width: 2;\n}\n\n.groupLinkContainer text,\n.groupLinkContainer line {\n  opacity: 0;\n}\n\n.groupLinkContainer line {\n  stroke: var(--graphColor-symbol);\n}\n\n.projectGraph:hover .groupLinkContainer text,\n.projectGraph:hover .groupLinkContainer line {\n  opacity: 1;\n}\n\n.linkContainer text {\n  font-size: 0.5rem;\n}\n\nsvg {\n  cursor: move;\n  height: 100%;\n  width: 100%;\n}\n\nsvg text {\n  fill: var(--color-key);\n  font-size: 0.75rem;\n  font-family: var(--font-family-mono);\n  text-anchor: middle;\n}\n\nsvg text.textBackdrop {\n  stroke: var(--graph-background);\n  stroke-width: 2px;\n}\n\nsvg circle,\nsvg path {\n  fill: var(--graphColor-default);\n}\n\nsvg g {\n  cursor: grab;\n}\n\nsvg g:active {\n  cursor: grabbing;\n}\n\nsvg g.File text,\nsvg g.Source text {\n  font-size: 1rem;\n  font-weight: bold;\n}\n\nsvg path.File {\n  fill: var(--graphColor-file);\n}\n\nsvg path.Source {\n  stroke: var(--graphColor-source);\n  stroke-width: 1;\n}\n\nsvg path.Symbol {\n  fill: var(--graphColor-symbol);\n}\n\nsvg path.Module {\n  fill: var(--graphColor-module);\n}\n\nsvg path.Node {\n  fill: var(--graphColor-node);\n}\n\nsvg path.Url {\n  fill: var(--graphColor-url);\n}\n",null,"import { Component, h, Host, Prop, Watch } from '@stencil/core'\nimport { D3DragEvent, drag } from 'd3-drag'\nimport {\n  forceCenter,\n  forceCollide,\n  forceLink,\n  forceManyBody,\n  forceSimulation,\n  forceX,\n  forceY,\n} from 'd3-force'\nimport { polygonHull } from 'd3-polygon'\nimport { Selection } from 'd3-selection'\nimport { curveBasisClosed, line } from 'd3-shape'\nimport { graphToGroupedGraph, isInterGroupLink } from './graphs'\nimport { FileResource, Graph, SimulationGraphNode } from './types'\nimport { GraphDatum, initGraph } from './utils'\nimport { hasKind } from './utils/guards'\nimport { getNodeX, getNodeY } from './utils/nodes'\nimport { getRelationLabel, getResourceLabel } from './utils/resource'\nimport { getResourceSymbol } from './utils/symbols'\n\ntype NodeDragEvent = D3DragEvent<SVGGElement, GraphDatum, GraphDatum>\n\n@Component({\n  tag: 'stencila-project-graph',\n  styleUrls: {\n    default: 'projectGraph.css',\n    material: 'projectGraph.material.css',\n  },\n  shadow: true,\n})\nexport class ProjectGraph {\n  private el?: HTMLDivElement\n\n  /**\n   * The project graph data to render\n   */\n  @Prop() graph: Graph\n\n  @Watch('graph')\n  updateGraph(nextGraph: Graph): void {\n    this.drawGraph(nextGraph)\n  }\n\n  private graphRef: {\n    height: number\n    width: number\n    svg: Selection<SVGGElement, unknown, null, undefined>\n  }\n\n  private nodeContainer:\n    | Selection<SVGGElement, unknown, null, unknown>\n    | undefined\n\n  private linkContainer:\n    | Selection<SVGGElement, unknown, null, unknown>\n    | undefined\n\n  private hullContainer:\n    | Selection<SVGGElement, unknown, null, unknown>\n    | undefined\n\n  private drawGraph = (graph: Graph) => {\n    const { svg } = this.graphRef\n\n    const groupedGraph = graphToGroupedGraph(graph)\n\n    const simulation = forceSimulation(groupedGraph.nodes)\n      .force(\n        'link',\n        forceLink(groupedGraph.links)\n          .strength((d) =>\n            isInterGroupLink(d.source, d.target) ||\n            (hasKind(d.source) && d.source.kind === 'Link') ||\n            (hasKind(d.target) && d.target.kind === 'Link')\n              ? 1\n              : 0.375\n          )\n          .iterations(2)\n          .distance((d) =>\n            (hasKind(d.source) && d.source.kind === 'Link') ||\n            (hasKind(d.target) && d.target.kind === 'Link')\n              ? 0\n              : 30\n          )\n          .iterations(2)\n      )\n      .force(\n        'link:groups',\n        forceLink(groupedGraph.groupLinks)\n          .strength((d) =>\n            (hasKind(d.source) && d.source.kind === 'Link') ||\n            (hasKind(d.target) && d.target.kind === 'Link')\n              ? 1\n              : 0.375\n          )\n          .iterations(3)\n      )\n      .force(\n        'charge',\n        forceManyBody<SimulationGraphNode>()\n          .strength((d) => {\n            return d.type === 'File' ? -100 : -1500\n          })\n          .distanceMin(10)\n          .distanceMax(1500)\n      )\n      .force('collision', forceCollide(64).strength(1).iterations(4))\n      .force('x', forceX().strength(0.02))\n      .force('y', forceY().strength(0.02))\n      .force('center', forceCenter())\n      .velocityDecay(0.4)\n      .alphaDecay(0.05)\n\n    const click = (_event: Event, d: GraphDatum) => {\n      delete d.fx\n      delete d.fy\n      simulation.alpha(0.5).restart()\n    }\n\n    const dragFn = drag<SVGGElement, GraphDatum, GraphDatum>().on(\n      'drag',\n      (event: NodeDragEvent, d: GraphDatum) => {\n        // d.fx = clamp(event.x, 0, width)\n        // d.fy = clamp(event.y, 0, height)\n        d.fx = event.x\n        d.fy = event.y\n\n        simulation.alpha(0.05).restart()\n      }\n    )\n\n    const hullContainer =\n      this.hullContainer ?? svg.append('g').attr('class', 'hullContainer')\n\n    if (!this.hullContainer) {\n      this.hullContainer = hullContainer\n    }\n\n    const linkContainer =\n      this.linkContainer ?? svg.append('g').attr('class', 'linkContainer')\n\n    if (!this.linkContainer) {\n      this.linkContainer = linkContainer\n    }\n\n    const links = linkContainer\n      .selectAll('g')\n      .data(groupedGraph.links)\n      .join((enter) => {\n        const linkGroup = enter.append('g')\n\n        linkGroup.append('line').attr('marker-end', 'url(#end)')\n\n        linkGroup.append('text').text((d) => {\n          return getRelationLabel(d.relation)\n        })\n\n        return linkGroup\n      })\n\n    const nodeContainer = this.nodeContainer ?? svg.append('g')\n\n    if (!this.nodeContainer) {\n      this.nodeContainer = nodeContainer\n    }\n\n    // Hulls are the container shapes surrounding clusters of nodes\n    // @see https://github.com/d3/d3-polygon/blob/main/README.md#polygonhull\n    const drawHull = (\n      fileNode: string | number | undefined | FileResource\n    ): string => {\n      if (\n        fileNode === undefined ||\n        typeof fileNode === 'string' ||\n        typeof fileNode === 'number'\n      ) {\n        return ''\n      }\n\n      // Padding amount to use when drawing shape around symbols\n      const pad = 32\n\n      const hullFileNodes = groupedGraph.groupLinks.filter(\n        (node) => node.group === fileNode.path\n      )\n\n      const rootCoords: [number, number][] =\n        hullFileNodes.length === 0\n          ? []\n          : [\n              [-pad, -pad],\n              [pad, -pad],\n              [pad, pad],\n              [0, pad],\n            ]\n\n      // The target is always the File node being linked to\n      const targetX = getNodeX(fileNode)\n      const targetY = getNodeY(fileNode)\n\n      const hull = polygonHull(\n        hullFileNodes.reduce((nodes: [number, number][], node) => {\n          const sourceX = getNodeX(node.source)\n          const sourceY = getNodeY(node.source)\n\n          return [\n            ...nodes,\n            [sourceX - targetX - pad, sourceY - targetY - pad],\n            [sourceX - targetX - pad, sourceY - targetY + pad],\n            [sourceX - targetX + pad, sourceY - targetY - pad],\n            [sourceX - targetX + pad, sourceY - targetY + pad],\n          ]\n        }, rootCoords)\n      )\n\n      return hull ? line().curve(curveBasisClosed)(hull) ?? '' : ''\n    }\n\n    const hull = hullContainer\n      .selectAll('path')\n      .data(groupedGraph.groups)\n      .join('path')\n      .attr('d', (d) => drawHull(d) ?? '')\n\n    const node = nodeContainer\n      .selectAll<SVGGElement, GraphDatum>('g')\n      .data<GraphDatum>(groupedGraph.nodes)\n      .join((enter) => {\n        const nodeGroup = enter.append('g')\n\n        nodeGroup\n          .append('path')\n          .attr('d', (d) =>\n            getResourceSymbol(d)(d.type === 'File' ? 1024 : 512)\n          )\n          .attr('class', (d) => {\n            return hasKind(d) ? `${d.type} ${d.kind}` : d.type\n          })\n\n        nodeGroup\n          .append('text')\n          .attr('class', 'textBackdrop')\n          .attr('dy', '.35em')\n          .text(getResourceLabel)\n          .append('text')\n          .exit()\n\n        nodeGroup\n          .append('text')\n          .attr('dy', '.35em')\n          .text(getResourceLabel)\n          .exit()\n\n        nodeGroup.append('title').text((d) => d.type)\n\n        return nodeGroup\n      })\n      .attr('class', (d) => (hasKind(d) ? `${d.type} ${d.kind}` : d.type))\n      .on('click', click)\n      .call(dragFn)\n\n    simulation.on('tick', () => {\n      // Position link lines\n      links\n        .select('line')\n        .attr('x1', ({ source }) =>\n          typeof source === 'object' ? source.x ?? 0 : source\n        )\n        .attr('y1', ({ source }) =>\n          typeof source === 'object' ? source.y ?? 0 : source\n        )\n        .attr('x2', ({ target }) =>\n          typeof target === 'object' ? target.x ?? 0 : target\n        )\n        .attr('y2', ({ target }) =>\n          typeof target === 'object' ? target.y ?? 0 : target\n        )\n\n      // Position link line labels\n      links.select('text').attr('transform', (d) => {\n        if (\n          typeof d.source === 'object' &&\n          typeof d.source.y === 'number' &&\n          typeof d.source.x === 'number' &&\n          typeof d.target === 'object' &&\n          typeof d.target.y === 'number' &&\n          typeof d.target.x === 'number'\n        ) {\n          return `translate(${d.source.x - (d.source.x - d.target.x) / 2}, ${\n            d.source.y - (d.source.y - d.target.y) / 2\n          })`\n        }\n\n        return ''\n      })\n\n      node.attr('transform', ({ x, y }) => `translate(${x ?? 0}, ${y ?? 0})`)\n\n      // Update File node grouping container shape\n      hull\n        .attr('transform', (d) => `translate(${d.x ?? 0}, ${d.y ?? 0})`)\n        .attr('d', (d) => drawHull(d) ?? '')\n    })\n  }\n\n  componentDidLoad() {\n    if (this.el) {\n      this.graphRef = initGraph(this.el)\n      this.drawGraph(this.graph)\n    }\n  }\n\n  public render() {\n    return (\n      <Host>\n        <div ref={(el) => (this.el = el)} class=\"projectGraph\"></div>\n      </Host>\n    )\n  }\n}\n"]}