var __generator=this&&this.__generator||function(t,n){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(t){return function(n){return s([t,n])}}function s(a){if(r)throw new TypeError("Generator is already executing.");while(e)try{if(r=1,i&&(o=a[0]&2?i["return"]:a[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;if(i=0,o)a=[a[0]&2,o.value];switch(a[0]){case 0:case 1:o=a;break;case 4:e.label++;return{value:a[1],done:false};case 5:e.label++;i=a[1];a=[0];continue;case 7:a=e.ops.pop();e.trys.pop();continue;default:if(!(o=e.trys,o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){e.label=a[1];break}if(a[0]===6&&e.label<o[1]){e.label=o[1];o=a;break}if(o&&e.label<o[2]){e.label=o[2];e.ops.push(a);break}if(o[2])e.ops.pop();e.trys.pop();continue}a=n.call(t,e)}catch(u){a=[6,u];i=0}finally{r=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};var __spreadArray=this&&this.__spreadArray||function(t,n,e){if(e||arguments.length===2)for(var r=0,i=n.length,o;r<i;r++){if(o||!(r in n)){if(!o)o=Array.prototype.slice.call(n,0,r);o[r]=n[r]}}return t.concat(o||Array.prototype.slice.call(n))};System.register(["./p-6cc918a4.system.js","./p-b47cb0bd.system.js"],(function(t){"use strict";var n,e,r,i,o,a,u,s,l,c,f,h,p,v,d,g,y,m,_,w,b,x,k,A,C,T,z,S,E,M;return{setters:[function(t){n=t.r;e=t.h;r=t.e},function(t){i=t.f;o=t.c;a=t.s;u=t.t;s=t.p;l=t.Z;c=t.a5;f=t.a6;h=t.E;p=t.F;v=t.G;d=t.H;g=t.O;y=t.N;m=t.Y;_=t.P;w=t.T;b=t.a7;x=t._;k=t.a2;A=t.a1;C=t.a0;T=t.a3;z=t.a4;S=t.$;E=t.l;M=t.W}],execute:function(){var N,j;var L=i(1/3);var P=L*2;var B={draw:function(t,n){var e=i(n/P);var r=e*L;t.moveTo(0,-e);t.lineTo(r,0);t.lineTo(0,e);t.lineTo(-r,0);t.closePath()}};var D={draw:function(t,n){var e=i(n);var r=-e/2;t.rect(r,r,e,e)}};var G=.8908130915292852;var I=a(s/10)/a(7*s/10);var Y=a(u/10)*I;var X=-o(u/10)*I;var V={draw:function(t,n){var e=i(n*G);var r=Y*e;var s=X*e;t.moveTo(0,-e);t.lineTo(r,s);for(var l=1;l<5;++l){var c=u*l/5;var f=o(c);var h=a(c);t.lineTo(h*e,-f*e);t.lineTo(f*r-h*s,h*r+f*s)}t.closePath()}};var O=i(3);var U={draw:function(t,n){var e=-i(n/(O*3));t.moveTo(0,e*2);t.lineTo(-O*e,-e);t.lineTo(O*e,-e);t.closePath()}};var q=-.5;var F=i(3)/2;var R=1/i(12);var H=(R/2+1)*3;var K={draw:function(t,n){var e=i(n/H);var r=e/2,o=e*R;var a=r,u=e*R+e;var s=-a,l=u;t.moveTo(r,o);t.lineTo(a,u);t.lineTo(s,l);t.lineTo(q*r-F*o,F*r+q*o);t.lineTo(q*a-F*u,F*a+q*u);t.lineTo(q*s-F*l,F*s+q*l);t.lineTo(q*r+F*o,q*o-F*r);t.lineTo(q*a+F*u,q*u-F*a);t.lineTo(q*s+F*l,q*l-F*s);t.closePath()}};function W(t,n,e){var r=new l;n=n==null?0:+n;r.restart((function(e){r.stop();t(e+n)}),n,e);return r}var Z="http://www.w3.org/1999/xhtml";var $={svg:"http://www.w3.org/2000/svg",xhtml:Z,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function J(t){var n=t+="",e=n.indexOf(":");if(e>=0&&(n=t.slice(0,e))!=="xmlns")t=t.slice(e+1);return $.hasOwnProperty(n)?{space:$[n],local:t}:t}function Q(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===Z&&n.documentElement.namespaceURI===Z?n.createElement(t):n.createElementNS(e,t)}}function tt(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function nt(t){var n=J(t);return(n.local?tt:Q)(n)}function et(){}function rt(t){return t==null?et:function(){return this.querySelector(t)}}function it(t){if(typeof t!=="function")t=rt(t);for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i){for(var o=n[i],a=o.length,u=r[i]=new Array(a),s,l,c=0;c<a;++c){if((s=o[c])&&(l=t.call(s,s.__data__,c,o))){if("__data__"in s)l.__data__=s.__data__;u[c]=l}}}return new Hn(r,this._parents)}function ot(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function at(){return[]}function ut(t){return t==null?at:function(){return this.querySelectorAll(t)}}function st(t){return function(){return ot(t.apply(this,arguments))}}function lt(t){if(typeof t==="function")t=st(t);else t=ut(t);for(var n=this._groups,e=n.length,r=[],i=[],o=0;o<e;++o){for(var a=n[o],u=a.length,s,l=0;l<u;++l){if(s=a[l]){r.push(t.call(s,s.__data__,l,a));i.push(s)}}}return new Hn(r,i)}function ct(t){return function(){return this.matches(t)}}function ft(t){return function(n){return n.matches(t)}}var ht=Array.prototype.find;function pt(t){return function(){return ht.call(this.children,t)}}function vt(){return this.firstElementChild}function dt(t){return this.select(t==null?vt:pt(typeof t==="function"?t:ft(t)))}var gt=Array.prototype.filter;function yt(){return Array.from(this.children)}function mt(t){return function(){return gt.call(this.children,t)}}function _t(t){return this.selectAll(t==null?yt:mt(typeof t==="function"?t:ft(t)))}function wt(t){if(typeof t!=="function")t=ct(t);for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i){for(var o=n[i],a=o.length,u=r[i]=[],s,l=0;l<a;++l){if((s=o[l])&&t.call(s,s.__data__,l,o)){u.push(s)}}}return new Hn(r,this._parents)}function bt(t){return new Array(t.length)}function xt(){return new Hn(this._enter||this._groups.map(bt),this._parents)}function kt(t,n){this.ownerDocument=t.ownerDocument;this.namespaceURI=t.namespaceURI;this._next=null;this._parent=t;this.__data__=n}kt.prototype={constructor:kt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function At(t){return function(){return t}}function Ct(t,n,e,r,i,o){var a=0,u,s=n.length,l=o.length;for(;a<l;++a){if(u=n[a]){u.__data__=o[a];r[a]=u}else{e[a]=new kt(t,o[a])}}for(;a<s;++a){if(u=n[a]){i[a]=u}}}function Tt(t,n,e,r,i,o,a){var u,s,l=new Map,c=n.length,f=o.length,h=new Array(c),p;for(u=0;u<c;++u){if(s=n[u]){h[u]=p=a.call(s,s.__data__,u,n)+"";if(l.has(p)){i[u]=s}else{l.set(p,s)}}}for(u=0;u<f;++u){p=a.call(t,o[u],u,o)+"";if(s=l.get(p)){r[u]=s;s.__data__=o[u];l.delete(p)}else{e[u]=new kt(t,o[u])}}for(u=0;u<c;++u){if((s=n[u])&&l.get(h[u])===s){i[u]=s}}}function zt(t){return t.__data__}function St(t,n){if(!arguments.length)return Array.from(this,zt);var e=n?Tt:Ct,r=this._parents,i=this._groups;if(typeof t!=="function")t=At(t);for(var o=i.length,a=new Array(o),u=new Array(o),s=new Array(o),l=0;l<o;++l){var c=r[l],f=i[l],h=f.length,p=Et(t.call(c,c&&c.__data__,l,r)),v=p.length,d=u[l]=new Array(v),g=a[l]=new Array(v),y=s[l]=new Array(h);e(c,f,d,g,y,p,n);for(var m=0,_=0,w,b;m<v;++m){if(w=d[m]){if(m>=_)_=m+1;while(!(b=g[_])&&++_<v);w._next=b||null}}}a=new Hn(a,r);a._enter=u;a._exit=s;return a}function Et(t){return typeof t==="object"&&"length"in t?t:Array.from(t)}function Mt(){return new Hn(this._exit||this._groups.map(bt),this._parents)}function Nt(t,n,e){var r=this.enter(),i=this,o=this.exit();if(typeof t==="function"){r=t(r);if(r)r=r.selection()}else{r=r.append(t+"")}if(n!=null){i=n(i);if(i)i=i.selection()}if(e==null)o.remove();else e(o);return r&&i?r.merge(i).order():i}function jt(t){var n=t.selection?t.selection():t;for(var e=this._groups,r=n._groups,i=e.length,o=r.length,a=Math.min(i,o),u=new Array(i),s=0;s<a;++s){for(var l=e[s],c=r[s],f=l.length,h=u[s]=new Array(f),p,v=0;v<f;++v){if(p=l[v]||c[v]){h[v]=p}}}for(;s<i;++s){u[s]=e[s]}return new Hn(u,this._parents)}function Lt(){for(var t=this._groups,n=-1,e=t.length;++n<e;){for(var r=t[n],i=r.length-1,o=r[i],a;--i>=0;){if(a=r[i]){if(o&&a.compareDocumentPosition(o)^4)o.parentNode.insertBefore(a,o);o=a}}}return this}function Pt(t){if(!t)t=Bt;function n(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o){for(var a=e[o],u=a.length,s=i[o]=new Array(u),l,c=0;c<u;++c){if(l=a[c]){s[c]=l}}s.sort(n)}return new Hn(i,this._parents).order()}function Bt(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function Dt(){var t=arguments[0];arguments[0]=this;t.apply(null,arguments);return this}function Gt(){return Array.from(this)}function It(){for(var t=this._groups,n=0,e=t.length;n<e;++n){for(var r=t[n],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}}return null}function Yt(){var t=0;for(var n=0,e=this;n<e.length;n++){var r=e[n];++t}return t}function Xt(){return!this.node()}function Vt(t){for(var n=this._groups,e=0,r=n.length;e<r;++e){for(var i=n[e],o=0,a=i.length,u;o<a;++o){if(u=i[o])t.call(u,u.__data__,o,i)}}return this}function Ot(t){return function(){this.removeAttribute(t)}}function Ut(t){return function(){this.removeAttributeNS(t.space,t.local)}}function qt(t,n){return function(){this.setAttribute(t,n)}}function Ft(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function Rt(t,n){return function(){var e=n.apply(this,arguments);if(e==null)this.removeAttribute(t);else this.setAttribute(t,e)}}function Ht(t,n){return function(){var e=n.apply(this,arguments);if(e==null)this.removeAttributeNS(t.space,t.local);else this.setAttributeNS(t.space,t.local,e)}}function Kt(t,n){var e=J(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((n==null?e.local?Ut:Ot:typeof n==="function"?e.local?Ht:Rt:e.local?Ft:qt)(e,n))}function Wt(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Zt(t){return function(){this.style.removeProperty(t)}}function $t(t,n,e){return function(){this.style.setProperty(t,n,e)}}function Jt(t,n,e){return function(){var r=n.apply(this,arguments);if(r==null)this.style.removeProperty(t);else this.style.setProperty(t,r,e)}}function Qt(t,n,e){return arguments.length>1?this.each((n==null?Zt:typeof n==="function"?Jt:$t)(t,n,e==null?"":e)):tn(this.node(),t)}function tn(t,n){return t.style.getPropertyValue(n)||Wt(t).getComputedStyle(t,null).getPropertyValue(n)}function nn(t){return function(){delete this[t]}}function en(t,n){return function(){this[t]=n}}function rn(t,n){return function(){var e=n.apply(this,arguments);if(e==null)delete this[t];else this[t]=e}}function on(t,n){return arguments.length>1?this.each((n==null?nn:typeof n==="function"?rn:en)(t,n)):this.node()[t]}function an(t){return t.trim().split(/^|\s+/)}function un(t){return t.classList||new sn(t)}function sn(t){this._node=t;this._names=an(t.getAttribute("class")||"")}sn.prototype={add:function(t){var n=this._names.indexOf(t);if(n<0){this._names.push(t);this._node.setAttribute("class",this._names.join(" "))}},remove:function(t){var n=this._names.indexOf(t);if(n>=0){this._names.splice(n,1);this._node.setAttribute("class",this._names.join(" "))}},contains:function(t){return this._names.indexOf(t)>=0}};function ln(t,n){var e=un(t),r=-1,i=n.length;while(++r<i)e.add(n[r])}function cn(t,n){var e=un(t),r=-1,i=n.length;while(++r<i)e.remove(n[r])}function fn(t){return function(){ln(this,t)}}function hn(t){return function(){cn(this,t)}}function pn(t,n){return function(){(n.apply(this,arguments)?ln:cn)(this,t)}}function vn(t,n){var e=an(t+"");if(arguments.length<2){var r=un(this.node()),i=-1,o=e.length;while(++i<o)if(!r.contains(e[i]))return false;return true}return this.each((typeof n==="function"?pn:n?fn:hn)(e,n))}function dn(){this.textContent=""}function gn(t){return function(){this.textContent=t}}function yn(t){return function(){var n=t.apply(this,arguments);this.textContent=n==null?"":n}}function mn(t){return arguments.length?this.each(t==null?dn:(typeof t==="function"?yn:gn)(t)):this.node().textContent}function _n(){this.innerHTML=""}function wn(t){return function(){this.innerHTML=t}}function bn(t){return function(){var n=t.apply(this,arguments);this.innerHTML=n==null?"":n}}function xn(t){return arguments.length?this.each(t==null?_n:(typeof t==="function"?bn:wn)(t)):this.node().innerHTML}function kn(){if(this.nextSibling)this.parentNode.appendChild(this)}function An(){return this.each(kn)}function Cn(){if(this.previousSibling)this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Tn(){return this.each(Cn)}function zn(t){var n=typeof t==="function"?t:nt(t);return this.select((function(){return this.appendChild(n.apply(this,arguments))}))}function Sn(){return null}function En(t,n){var e=typeof t==="function"?t:nt(t),r=n==null?Sn:typeof n==="function"?n:rt(n);return this.select((function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)}))}function Mn(){var t=this.parentNode;if(t)t.removeChild(this)}function Nn(){return this.each(Mn)}function jn(){var t=this.cloneNode(false),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function Ln(){var t=this.cloneNode(true),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function Pn(t){return this.select(t?Ln:jn)}function Bn(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Dn(t){return function(n){t.call(this,n,this.__data__)}}function Gn(t){return t.trim().split(/^|\s+/).map((function(t){var n="",e=t.indexOf(".");if(e>=0)n=t.slice(e+1),t=t.slice(0,e);return{type:t,name:n}}))}function In(t){return function(){var n=this.__on;if(!n)return;for(var e=0,r=-1,i=n.length,o;e<i;++e){if(o=n[e],(!t.type||o.type===t.type)&&o.name===t.name){this.removeEventListener(o.type,o.listener,o.options)}else{n[++r]=o}}if(++r)n.length=r;else delete this.__on}}function Yn(t,n,e){return function(){var r=this.__on,i,o=Dn(n);if(r)for(var a=0,u=r.length;a<u;++a){if((i=r[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options);this.addEventListener(i.type,i.listener=o,i.options=e);i.value=n;return}}this.addEventListener(t.type,o,e);i={type:t.type,name:t.name,value:n,listener:o,options:e};if(!r)this.__on=[i];else r.push(i)}}function Xn(t,n,e){var r=Gn(t+""),i,o=r.length,a;if(arguments.length<2){var u=this.node().__on;if(u)for(var s=0,l=u.length,c;s<l;++s){for(i=0,c=u[s];i<o;++i){if((a=r[i]).type===c.type&&a.name===c.name){return c.value}}}return}u=n?Yn:In;for(i=0;i<o;++i)this.each(u(r[i],n,e));return this}function Vn(t,n,e){var r=Wt(t),i=r.CustomEvent;if(typeof i==="function"){i=new i(n,e)}else{i=r.document.createEvent("Event");if(e)i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail;else i.initEvent(n,false,false)}t.dispatchEvent(i)}function On(t,n){return function(){return Vn(this,t,n)}}function Un(t,n){return function(){return Vn(this,t,n.apply(this,arguments))}}function qn(t,n){return this.each((typeof n==="function"?Un:On)(t,n))}function Fn(){var t,n,e,r,i,o,a;return __generator(this,(function(u){switch(u.label){case 0:t=this._groups,n=0,e=t.length;u.label=1;case 1:if(!(n<e))return[3,6];r=t[n],i=0,o=r.length;u.label=2;case 2:if(!(i<o))return[3,5];if(!(a=r[i]))return[3,4];return[4,a];case 3:u.sent();u.label=4;case 4:++i;return[3,2];case 5:++n;return[3,1];case 6:return[2]}}))}var Rn=[null];function Hn(t,n){this._groups=t;this._parents=n}function Kn(){return new Hn([[document.documentElement]],Rn)}function Wn(){return this}Hn.prototype=Kn.prototype=(N={constructor:Hn,select:it,selectAll:lt,selectChild:dt,selectChildren:_t,filter:wt,data:St,enter:xt,exit:Mt,join:Nt,merge:jt,selection:Wn,order:Lt,sort:Pt,call:Dt,nodes:Gt,node:It,size:Yt,empty:Xt,each:Vt,attr:Kt,style:Qt,property:on,classed:vn,text:mn,html:xn,raise:An,lower:Tn,append:zn,insert:En,remove:Nn,clone:Pn,datum:Bn,on:Xn,dispatch:qn},N[Symbol.iterator]=Fn,N);function Zn(t){return typeof t==="string"?new Hn([[document.querySelector(t)]],[document.documentElement]):new Hn([[t]],Rn)}function $n(t){var n;while(n=t.sourceEvent)t=n;return t}function Jn(t,n){t=$n(t);if(n===undefined)n=t.currentTarget;if(n){var e=n.ownerSVGElement||n;if(e.createSVGPoint){var r=e.createSVGPoint();r.x=t.clientX,r.y=t.clientY;r=r.matrixTransform(n.getScreenCTM().inverse());return[r.x,r.y]}if(n.getBoundingClientRect){var i=n.getBoundingClientRect();return[t.clientX-i.left-n.clientLeft,t.clientY-i.top-n.clientTop]}}return[t.pageX,t.pageY]}var Qn={passive:false};var te={capture:true,passive:false};function ne(t){t.stopImmediatePropagation()}function ee(t){t.preventDefault();t.stopImmediatePropagation()}function re(t){var n=t.document.documentElement,e=Zn(t).on("dragstart.drag",ee,te);if("onselectstart"in n){e.on("selectstart.drag",ee,te)}else{n.__noselect=n.style.MozUserSelect;n.style.MozUserSelect="none"}}function ie(t,n){var e=t.document.documentElement,r=Zn(t).on("dragstart.drag",null);if(n){r.on("click.drag",ee,te);setTimeout((function(){r.on("click.drag",null)}),0)}if("onselectstart"in e){r.on("selectstart.drag",null)}else{e.style.MozUserSelect=e.__noselect;delete e.__noselect}}var oe=function(t){return function(){return t}};function ae(t,n){var e=n.sourceEvent,r=n.subject,i=n.target,o=n.identifier,a=n.active,u=n.x,s=n.y,l=n.dx,c=n.dy,f=n.dispatch;Object.defineProperties(this,{type:{value:t,enumerable:true,configurable:true},sourceEvent:{value:e,enumerable:true,configurable:true},subject:{value:r,enumerable:true,configurable:true},target:{value:i,enumerable:true,configurable:true},identifier:{value:o,enumerable:true,configurable:true},active:{value:a,enumerable:true,configurable:true},x:{value:u,enumerable:true,configurable:true},y:{value:s,enumerable:true,configurable:true},dx:{value:l,enumerable:true,configurable:true},dy:{value:c,enumerable:true,configurable:true},_:{value:f}})}ae.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function ue(t){return!t.ctrlKey&&!t.button}function se(){return this.parentNode}function le(t,n){return n==null?{x:t.x,y:t.y}:n}function ce(){return navigator.maxTouchPoints||"ontouchstart"in this}function fe(){var t=ue,n=se,e=le,r=ce,i={},o=c("start","drag","end"),a=0,u,s,l,f,h=0;function p(t){t.on("mousedown.drag",v).filter(r).on("touchstart.drag",y).on("touchmove.drag",m,Qn).on("touchend.drag touchcancel.drag",_).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(e,r){if(f||!t.call(this,e,r))return;var i=w(this,n.call(this,e,r),e,r,"mouse");if(!i)return;Zn(e.view).on("mousemove.drag",d,te).on("mouseup.drag",g,te);re(e.view);ne(e);l=false;u=e.clientX;s=e.clientY;i("start",e)}function d(t){ee(t);if(!l){var n=t.clientX-u,e=t.clientY-s;l=n*n+e*e>h}i.mouse("drag",t)}function g(t){Zn(t.view).on("mousemove.drag mouseup.drag",null);ie(t.view,l);ee(t);i.mouse("end",t)}function y(e,r){if(!t.call(this,e,r))return;var i=e.changedTouches,o=n.call(this,e,r),a=i.length,u,s;for(u=0;u<a;++u){if(s=w(this,o,e,r,i[u].identifier,i[u])){ne(e);s("start",e,i[u])}}}function m(t){var n=t.changedTouches,e=n.length,r,o;for(r=0;r<e;++r){if(o=i[n[r].identifier]){ee(t);o("drag",t,n[r])}}}function _(t){var n=t.changedTouches,e=n.length,r,o;if(f)clearTimeout(f);f=setTimeout((function(){f=null}),500);for(r=0;r<e;++r){if(o=i[n[r].identifier]){ne(t);o("end",t,n[r])}}}function w(t,n,r,u,s,l){var c=o.copy(),f=Jn(l||r,n),h,v,d;if((d=e.call(t,new ae("beforestart",{sourceEvent:r,target:p,identifier:s,active:a,x:f[0],y:f[1],dx:0,dy:0,dispatch:c}),u))==null)return;h=d.x-f[0]||0;v=d.y-f[1]||0;return function e(r,o,l){var g=f,y;switch(r){case"start":i[s]=e,y=a++;break;case"end":delete i[s],--a;case"drag":f=Jn(l||o,n),y=a;break}c.call(r,t,new ae(r,{sourceEvent:o,subject:d,target:p,identifier:s,active:y,x:f[0]+h,y:f[1]+v,dx:f[0]-g[0],dy:f[1]-g[1],dispatch:c}),u)}}p.filter=function(n){return arguments.length?(t=typeof n==="function"?n:oe(!!n),p):t};p.container=function(t){return arguments.length?(n=typeof t==="function"?t:oe(t),p):n};p.subject=function(t){return arguments.length?(e=typeof t==="function"?t:oe(t),p):e};p.touchable=function(t){return arguments.length?(r=typeof t==="function"?t:oe(!!t),p):r};p.on=function(){var t=o.on.apply(o,arguments);return t===o?p:t};p.clickDistance=function(t){return arguments.length?(h=(t=+t)*t,p):Math.sqrt(h)};return p}function he(t,n,e){return(n[0]-t[0])*(e[1]-t[1])-(n[1]-t[1])*(e[0]-t[0])}function pe(t,n){return t[0]-n[0]||t[1]-n[1]}function ve(t){var n=t.length,e=[0,1];var r=2,i;for(i=2;i<n;++i){while(r>1&&he(t[e[r-2]],t[e[r-1]],t[i])<=0)--r;e[r++]=i}return e.slice(0,r)}function de(t){if((e=t.length)<3)return null;var n,e,r=new Array(e),i=new Array(e);for(n=0;n<e;++n)r[n]=[+t[n][0],+t[n][1],n];r.sort(pe);for(n=0;n<e;++n)i[n]=[r[n][0],-r[n][1]];var o=ve(r),a=ve(i);var u=a[0]===o[0],s=a[a.length-1]===o[o.length-1],l=[];for(n=o.length-1;n>=0;--n)l.push(t[r[o[n]][2]]);for(n=+u;n<a.length-s;++n)l.push(t[r[a[n]][2]]);return l}var ge=function(t){if(typeof t==="object"&&(t.type==="Symbol"||t.type==="Node"||t.type==="File")){return true}return false};var ye=function(t){if(typeof t==="object"&&(t.type==="Symbol"||t.type==="Node")){return true}return false};var me=function(t){return t.edges.reduce((function(n,e){var r=t.nodes[e.to];var i=ge(r)?r.path:"leaf";return __spreadArray(__spreadArray([],n,true),[{source:e.from,target:e.to,group:i,relation:e.relation}],false)}),[])};var _e=function(t){var n=__spreadArray([],t.nodes,true);var e=n.filter((function(t){return t.type==="File"}));var r=t.nodes.filter((function(t){return ge(t)&&t.type!=="File"}));var i={nodes:t.nodes,links:me(t),groupLinks:[],groups:e};var o=function(t){var n;return(n=e.find((function(n){return n.path===t})))===null||n===void 0?void 0:n.index};for(var a=0,u=e;a<u.length;a++){var s=u[a];var l=o(s.path);if(l===undefined)break;for(var c=0,f=r;c<f.length;c++){var h=f[c];if(ge(h)&&h.path===s.path){i.groupLinks.push({source:h.index,target:s.index,group:h.path,relation:{type:""}})}}}return i};var we=function(t,n){if(ge(t)&&ge(n)){return(n.path!==""||n.path!=="")&&n.path===t.path}return false};var be=c("start","end","cancel","interrupt");var xe=[];var ke=0;var Ae=1;var Ce=2;var Te=3;var ze=4;var Se=5;var Ee=6;function Me(t,n,e,r,i,o){var a=t.__transition;if(!a)t.__transition={};else if(e in a)return;Pe(t,e,{name:n,index:r,group:i,on:be,tween:xe,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:ke})}function Ne(t,n){var e=Le(t,n);if(e.state>ke)throw new Error("too late; already scheduled");return e}function je(t,n){var e=Le(t,n);if(e.state>Te)throw new Error("too late; already running");return e}function Le(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}function Pe(t,n,e){var r=t.__transition,i;r[n]=e;e.timer=f(o,0,e.time);function o(t){e.state=Ae;e.timer.restart(a,e.delay,e.time);if(e.delay<=t)a(t-e.delay)}function a(o){var l,c,f,h;if(e.state!==Ae)return s();for(l in r){h=r[l];if(h.name!==e.name)continue;if(h.state===Te)return W(a);if(h.state===ze){h.state=Ee;h.timer.stop();h.on.call("interrupt",t,t.__data__,h.index,h.group);delete r[l]}else if(+l<n){h.state=Ee;h.timer.stop();h.on.call("cancel",t,t.__data__,h.index,h.group);delete r[l]}}W((function(){if(e.state===Te){e.state=ze;e.timer.restart(u,e.delay,e.time);u(o)}}));e.state=Ce;e.on.call("start",t,t.__data__,e.index,e.group);if(e.state!==Ce)return;e.state=Te;i=new Array(f=e.tween.length);for(l=0,c=-1;l<f;++l){if(h=e.tween[l].value.call(t,t.__data__,e.index,e.group)){i[++c]=h}}i.length=c+1}function u(n){var r=n<e.duration?e.ease.call(null,n/e.duration):(e.timer.restart(s),e.state=Se,1),o=-1,a=i.length;while(++o<a){i[o].call(t,r)}if(e.state===Se){e.on.call("end",t,t.__data__,e.index,e.group);s()}}function s(){e.state=Ee;e.timer.stop();delete r[n];for(var i in r)return;delete t.__transition}}function Be(t,n){var e=t.__transition,r,i,o=true,a;if(!e)return;n=n==null?null:n+"";for(a in e){if((r=e[a]).name!==n){o=false;continue}i=r.state>Ce&&r.state<Se;r.state=Ee;r.timer.stop();r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group);delete e[a]}if(o)delete t.__transition}function De(t){return this.each((function(){Be(this,t)}))}function Ge(t,n){var e,r;return function(){var i=je(this,t),o=i.tween;if(o!==e){r=e=o;for(var a=0,u=r.length;a<u;++a){if(r[a].name===n){r=r.slice();r.splice(a,1);break}}}i.tween=r}}function Ie(t,n,e){var r,i;if(typeof e!=="function")throw new Error;return function(){var o=je(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var u={name:n,value:e},s=0,l=i.length;s<l;++s){if(i[s].name===n){i[s]=u;break}}if(s===l)i.push(u)}o.tween=i}}function Ye(t,n){var e=this._id;t+="";if(arguments.length<2){var r=Le(this.node(),e).tween;for(var i=0,o=r.length,a;i<o;++i){if((a=r[i]).name===t){return a.value}}return null}return this.each((n==null?Ge:Ie)(e,t,n))}function Xe(t,n,e){var r=t._id;t.each((function(){var t=je(this,r);(t.value||(t.value={}))[n]=e.apply(this,arguments)}));return function(t){return Le(t,r).value[n]}}function Ve(t,n){var e;return(typeof n==="number"?h:n instanceof p?v:(e=p(n))?(n=e,v):d)(t,n)}function Oe(t){return function(){this.removeAttribute(t)}}function Ue(t){return function(){this.removeAttributeNS(t.space,t.local)}}function qe(t,n,e){var r,i=e+"",o;return function(){var a=this.getAttribute(t);return a===i?null:a===r?o:o=n(r=a,e)}}function Fe(t,n,e){var r,i=e+"",o;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?o:o=n(r=a,e)}}function Re(t,n,e){var r,i,o;return function(){var a,u=e(this),s;if(u==null)return void this.removeAttribute(t);a=this.getAttribute(t);s=u+"";return a===s?null:a===r&&s===i?o:(i=s,o=n(r=a,u))}}function He(t,n,e){var r,i,o;return function(){var a,u=e(this),s;if(u==null)return void this.removeAttributeNS(t.space,t.local);a=this.getAttributeNS(t.space,t.local);s=u+"";return a===s?null:a===r&&s===i?o:(i=s,o=n(r=a,u))}}function Ke(t,n){var e=J(t),r=e==="transform"?g:Ve;return this.attrTween(t,typeof n==="function"?(e.local?He:Re)(e,r,Xe(this,"attr."+t,n)):n==null?(e.local?Ue:Oe)(e):(e.local?Fe:qe)(e,r,n))}function We(t,n){return function(e){this.setAttribute(t,n.call(this,e))}}function Ze(t,n){return function(e){this.setAttributeNS(t.space,t.local,n.call(this,e))}}function $e(t,n){var e,r;function i(){var i=n.apply(this,arguments);if(i!==r)e=(r=i)&&Ze(t,i);return e}i._value=n;return i}function Je(t,n){var e,r;function i(){var i=n.apply(this,arguments);if(i!==r)e=(r=i)&&We(t,i);return e}i._value=n;return i}function Qe(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!=="function")throw new Error;var r=J(t);return this.tween(e,(r.local?$e:Je)(r,n))}function tr(t,n){return function(){Ne(this,t).delay=+n.apply(this,arguments)}}function nr(t,n){return n=+n,function(){Ne(this,t).delay=n}}function er(t){var n=this._id;return arguments.length?this.each((typeof t==="function"?tr:nr)(n,t)):Le(this.node(),n).delay}function rr(t,n){return function(){je(this,t).duration=+n.apply(this,arguments)}}function ir(t,n){return n=+n,function(){je(this,t).duration=n}}function or(t){var n=this._id;return arguments.length?this.each((typeof t==="function"?rr:ir)(n,t)):Le(this.node(),n).duration}function ar(t,n){if(typeof n!=="function")throw new Error;return function(){je(this,t).ease=n}}function ur(t){var n=this._id;return arguments.length?this.each(ar(n,t)):Le(this.node(),n).ease}function sr(t,n){return function(){var e=n.apply(this,arguments);if(typeof e!=="function")throw new Error;je(this,t).ease=e}}function lr(t){if(typeof t!=="function")throw new Error;return this.each(sr(this._id,t))}function cr(t){if(typeof t!=="function")t=ct(t);for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i){for(var o=n[i],a=o.length,u=r[i]=[],s,l=0;l<a;++l){if((s=o[l])&&t.call(s,s.__data__,l,o)){u.push(s)}}}return new Yr(r,this._parents,this._name,this._id)}function fr(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),a=new Array(r),u=0;u<o;++u){for(var s=n[u],l=e[u],c=s.length,f=a[u]=new Array(c),h,p=0;p<c;++p){if(h=s[p]||l[p]){f[p]=h}}}for(;u<r;++u){a[u]=n[u]}return new Yr(a,this._parents,this._name,this._id)}function hr(t){return(t+"").trim().split(/^|\s+/).every((function(t){var n=t.indexOf(".");if(n>=0)t=t.slice(0,n);return!t||t==="start"}))}function pr(t,n,e){var r,i,o=hr(n)?Ne:je;return function(){var a=o(this,t),u=a.on;if(u!==r)(i=(r=u).copy()).on(n,e);a.on=i}}function vr(t,n){var e=this._id;return arguments.length<2?Le(this.node(),e).on.on(t):this.each(pr(e,t,n))}function dr(t){return function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;if(n)n.removeChild(this)}}function gr(){return this.on("end.remove",dr(this._id))}function yr(t){var n=this._name,e=this._id;if(typeof t!=="function")t=rt(t);for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a){for(var u=r[a],s=u.length,l=o[a]=new Array(s),c,f,h=0;h<s;++h){if((c=u[h])&&(f=t.call(c,c.__data__,h,u))){if("__data__"in c)f.__data__=c.__data__;l[h]=f;Me(l[h],n,e,h,l,Le(c,e))}}}return new Yr(o,this._parents,n,e)}function mr(t){var n=this._name,e=this._id;if(typeof t!=="function")t=ut(t);for(var r=this._groups,i=r.length,o=[],a=[],u=0;u<i;++u){for(var s=r[u],l=s.length,c,f=0;f<l;++f){if(c=s[f]){for(var h=t.call(c,c.__data__,f,s),p,v=Le(c,e),d=0,g=h.length;d<g;++d){if(p=h[d]){Me(p,n,e,d,h,v)}}o.push(h);a.push(c)}}}return new Yr(o,a,n,e)}var _r=Kn.prototype.constructor;function wr(){return new _r(this._groups,this._parents)}function br(t,n){var e,r,i;return function(){var o=tn(this,t),a=(this.style.removeProperty(t),tn(this,t));return o===a?null:o===e&&a===r?i:i=n(e=o,r=a)}}function xr(t){return function(){this.style.removeProperty(t)}}function kr(t,n,e){var r,i=e+"",o;return function(){var a=tn(this,t);return a===i?null:a===r?o:o=n(r=a,e)}}function Ar(t,n,e){var r,i,o;return function(){var a=tn(this,t),u=e(this),s=u+"";if(u==null)s=u=(this.style.removeProperty(t),tn(this,t));return a===s?null:a===r&&s===i?o:(i=s,o=n(r=a,u))}}function Cr(t,n){var e,r,i,o="style."+n,a="end."+o,u;return function(){var s=je(this,t),l=s.on,c=s.value[o]==null?u||(u=xr(n)):undefined;if(l!==e||i!==c)(r=(e=l).copy()).on(a,i=c);s.on=r}}function Tr(t,n,e){var r=(t+="")==="transform"?y:Ve;return n==null?this.styleTween(t,br(t,r)).on("end.style."+t,xr(t)):typeof n==="function"?this.styleTween(t,Ar(t,r,Xe(this,"style."+t,n))).each(Cr(this._id,t)):this.styleTween(t,kr(t,r,n),e).on("end.style."+t,null)}function zr(t,n,e){return function(r){this.style.setProperty(t,n.call(this,r),e)}}function Sr(t,n,e){var r,i;function o(){var o=n.apply(this,arguments);if(o!==i)r=(i=o)&&zr(t,o,e);return r}o._value=n;return o}function Er(t,n,e){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(n==null)return this.tween(r,null);if(typeof n!=="function")throw new Error;return this.tween(r,Sr(t,n,e==null?"":e))}function Mr(t){return function(){this.textContent=t}}function Nr(t){return function(){var n=t(this);this.textContent=n==null?"":n}}function jr(t){return this.tween("text",typeof t==="function"?Nr(Xe(this,"text",t)):Mr(t==null?"":t+""))}function Lr(t){return function(n){this.textContent=t.call(this,n)}}function Pr(t){var n,e;function r(){var r=t.apply(this,arguments);if(r!==e)n=(e=r)&&Lr(r);return n}r._value=t;return r}function Br(t){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!=="function")throw new Error;return this.tween(n,Pr(t))}function Dr(){var t=this._name,n=this._id,e=Xr();for(var r=this._groups,i=r.length,o=0;o<i;++o){for(var a=r[o],u=a.length,s,l=0;l<u;++l){if(s=a[l]){var c=Le(s,n);Me(s,t,e,l,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}}}return new Yr(r,this._parents,t,e)}function Gr(){var t,n,e=this,r=e._id,i=e.size();return new Promise((function(o,a){var u={value:a},s={value:function(){if(--i===0)o()}};e.each((function(){var e=je(this,r),i=e.on;if(i!==t){n=(t=i).copy();n._.cancel.push(u);n._.interrupt.push(u);n._.end.push(s)}e.on=n}));if(i===0)o()}))}var Ir=0;function Yr(t,n,e,r){this._groups=t;this._parents=n;this._name=e;this._id=r}function Xr(){return++Ir}var Vr=Kn.prototype;Yr.prototype=(j={constructor:Yr,select:yr,selectAll:mr,selectChild:Vr.selectChild,selectChildren:Vr.selectChildren,filter:cr,merge:fr,selection:wr,transition:Dr,call:Vr.call,nodes:Vr.nodes,node:Vr.node,size:Vr.size,empty:Vr.empty,each:Vr.each,on:vr,attr:Ke,attrTween:Qe,style:Tr,styleTween:Er,text:jr,textTween:Br,remove:gr,tween:Ye,delay:er,duration:or,ease:ur,easeVarying:lr,end:Gr},j[Symbol.iterator]=Vr[Symbol.iterator],j);function Or(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Ur={time:null,delay:0,duration:250,ease:Or};function qr(t,n){var e;while(!(e=t.__transition)||!(e=e[n])){if(!(t=t.parentNode)){throw new Error("transition ".concat(n," not found"))}}return e}function Fr(t){var n,e;if(t instanceof Yr){n=t._id,t=t._name}else{n=Xr(),(e=Ur).time=m(),t=t==null?null:t+""}for(var r=this._groups,i=r.length,o=0;o<i;++o){for(var a=r[o],u=a.length,s,l=0;l<u;++l){if(s=a[l]){Me(s,t,n,l,a,e||qr(s,n))}}}return new Yr(r,this._parents,t,n)}Kn.prototype.interrupt=De;Kn.prototype.transition=Fr;var Rr=function(t){return function(){return t}};function Hr(t,n){var e=n.sourceEvent,r=n.target,i=n.transform,o=n.dispatch;Object.defineProperties(this,{type:{value:t,enumerable:true,configurable:true},sourceEvent:{value:e,enumerable:true,configurable:true},target:{value:r,enumerable:true,configurable:true},transform:{value:i,enumerable:true,configurable:true},_:{value:o}})}function Kr(t,n,e){this.k=t;this.x=n;this.y=e}Kr.prototype={constructor:Kr,scale:function(t){return t===1?this:new Kr(this.k*t,this.x,this.y)},translate:function(t,n){return t===0&n===0?this:new Kr(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Wr=new Kr(1,0,0);function Zr(t){t.stopImmediatePropagation()}function $r(t){t.preventDefault();t.stopImmediatePropagation()}function Jr(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Qr(){var t=this;if(t instanceof SVGElement){t=t.ownerSVGElement||t;if(t.hasAttribute("viewBox")){t=t.viewBox.baseVal;return[[t.x,t.y],[t.x+t.width,t.y+t.height]]}return[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}return[[0,0],[t.clientWidth,t.clientHeight]]}function ti(){return this.__zoom||Wr}function ni(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function ei(){return navigator.maxTouchPoints||"ontouchstart"in this}function ri(t,n,e){var r=t.invertX(n[0][0])-e[0][0],i=t.invertX(n[1][0])-e[1][0],o=t.invertY(n[0][1])-e[0][1],a=t.invertY(n[1][1])-e[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function ii(){var t=Jr,n=Qr,e=ri,r=ni,i=ei,o=[0,Infinity],a=[[-Infinity,-Infinity],[Infinity,Infinity]],u=250,s=_,l=c("start","zoom","end"),f,h,p,v=500,d=150,g=0,y=10;function m(t){t.property("__zoom",ti).on("wheel.zoom",T,{passive:false}).on("mousedown.zoom",z).on("dblclick.zoom",S).filter(i).on("touchstart.zoom",E).on("touchmove.zoom",M).on("touchend.zoom touchcancel.zoom",N).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(t,n,e,r){var i=t.selection?t.selection():t;i.property("__zoom",ti);if(t!==i){k(t,n,e,r)}else{i.interrupt().each((function(){A(this,arguments).event(r).start().zoom(null,typeof n==="function"?n.apply(this,arguments):n).end()}))}};m.scaleBy=function(t,n,e,r){m.scaleTo(t,(function(){var t=this.__zoom.k,e=typeof n==="function"?n.apply(this,arguments):n;return t*e}),e,r)};m.scaleTo=function(t,r,i,o){m.transform(t,(function(){var t=n.apply(this,arguments),o=this.__zoom,u=i==null?x(t):typeof i==="function"?i.apply(this,arguments):i,s=o.invert(u),l=typeof r==="function"?r.apply(this,arguments):r;return e(b(w(o,l),u,s),t,a)}),i,o)};m.translateBy=function(t,r,i,o){m.transform(t,(function(){return e(this.__zoom.translate(typeof r==="function"?r.apply(this,arguments):r,typeof i==="function"?i.apply(this,arguments):i),n.apply(this,arguments),a)}),null,o)};m.translateTo=function(t,r,i,o,u){m.transform(t,(function(){var t=n.apply(this,arguments),u=this.__zoom,s=o==null?x(t):typeof o==="function"?o.apply(this,arguments):o;return e(Wr.translate(s[0],s[1]).scale(u.k).translate(typeof r==="function"?-r.apply(this,arguments):-r,typeof i==="function"?-i.apply(this,arguments):-i),t,a)}),o,u)};function w(t,n){n=Math.max(o[0],Math.min(o[1],n));return n===t.k?t:new Kr(n,t.x,t.y)}function b(t,n,e){var r=n[0]-e[0]*t.k,i=n[1]-e[1]*t.k;return r===t.x&&i===t.y?t:new Kr(t.k,r,i)}function x(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function k(t,e,r,i){t.on("start.zoom",(function(){A(this,arguments).event(i).start()})).on("interrupt.zoom end.zoom",(function(){A(this,arguments).event(i).end()})).tween("zoom",(function(){var t=this,o=arguments,a=A(t,o).event(i),u=n.apply(t,o),l=r==null?x(u):typeof r==="function"?r.apply(t,o):r,c=Math.max(u[1][0]-u[0][0],u[1][1]-u[0][1]),f=t.__zoom,h=typeof e==="function"?e.apply(t,o):e,p=s(f.invert(l).concat(c/f.k),h.invert(l).concat(c/h.k));return function(t){if(t===1)t=h;else{var n=p(t),e=c/n[2];t=new Kr(e,l[0]-n[0]*e,l[1]-n[1]*e)}a.zoom(null,t)}}))}function A(t,n,e){return!e&&t.__zooming||new C(t,n)}function C(t,e){this.that=t;this.args=e;this.active=0;this.sourceEvent=null;this.extent=n.apply(t,e);this.taps=0}C.prototype={event:function(t){if(t)this.sourceEvent=t;return this},start:function(){if(++this.active===1){this.that.__zooming=this;this.emit("start")}return this},zoom:function(t,n){if(this.mouse&&t!=="mouse")this.mouse[1]=n.invert(this.mouse[0]);if(this.touch0&&t!=="touch")this.touch0[1]=n.invert(this.touch0[0]);if(this.touch1&&t!=="touch")this.touch1[1]=n.invert(this.touch1[0]);this.that.__zoom=n;this.emit("zoom");return this},end:function(){if(--this.active===0){delete this.that.__zooming;this.emit("end")}return this},emit:function(t){var n=Zn(this.that).datum();l.call(t,this.that,new Hr(t,{sourceEvent:this.sourceEvent,target:m,type:t,transform:this.that.__zoom,dispatch:l}),n)}};function T(n){var i=[];for(var u=1;u<arguments.length;u++){i[u-1]=arguments[u]}if(!t.apply(this,arguments))return;var s=A(this,i).event(n),l=this.__zoom,c=Math.max(o[0],Math.min(o[1],l.k*Math.pow(2,r.apply(this,arguments)))),f=Jn(n);if(s.wheel){if(s.mouse[0][0]!==f[0]||s.mouse[0][1]!==f[1]){s.mouse[1]=l.invert(s.mouse[0]=f)}clearTimeout(s.wheel)}else if(l.k===c)return;else{s.mouse=[f,l.invert(f)];Be(this);s.start()}$r(n);s.wheel=setTimeout(h,d);s.zoom("mouse",e(b(w(l,c),s.mouse[0],s.mouse[1]),s.extent,a));function h(){s.wheel=null;s.end()}}function z(n){var r=[];for(var i=1;i<arguments.length;i++){r[i-1]=arguments[i]}if(p||!t.apply(this,arguments))return;var o=n.currentTarget,u=A(this,r,true).event(n),s=Zn(n.view).on("mousemove.zoom",h,true).on("mouseup.zoom",v,true),l=Jn(n,o),c=n.clientX,f=n.clientY;re(n.view);Zr(n);u.mouse=[l,this.__zoom.invert(l)];Be(this);u.start();function h(t){$r(t);if(!u.moved){var n=t.clientX-c,r=t.clientY-f;u.moved=n*n+r*r>g}u.event(t).zoom("mouse",e(b(u.that.__zoom,u.mouse[0]=Jn(t,o),u.mouse[1]),u.extent,a))}function v(t){s.on("mousemove.zoom mouseup.zoom",null);ie(t.view,u.moved);$r(t);u.event(t).end()}}function S(r){var i=[];for(var o=1;o<arguments.length;o++){i[o-1]=arguments[o]}if(!t.apply(this,arguments))return;var s=this.__zoom,l=Jn(r.changedTouches?r.changedTouches[0]:r,this),c=s.invert(l),f=s.k*(r.shiftKey?.5:2),h=e(b(w(s,f),l,c),n.apply(this,i),a);$r(r);if(u>0)Zn(this).transition().duration(u).call(k,h,l,r);else Zn(this).call(m.transform,h,l,r)}function E(n){var e=[];for(var r=1;r<arguments.length;r++){e[r-1]=arguments[r]}if(!t.apply(this,arguments))return;var i=n.touches,o=i.length,a=A(this,e,n.changedTouches.length===o).event(n),u,s,l,c;Zr(n);for(s=0;s<o;++s){l=i[s],c=Jn(l,this);c=[c,this.__zoom.invert(c),l.identifier];if(!a.touch0)a.touch0=c,u=true,a.taps=1+!!f;else if(!a.touch1&&a.touch0[2]!==c[2])a.touch1=c,a.taps=0}if(f)f=clearTimeout(f);if(u){if(a.taps<2)h=c[0],f=setTimeout((function(){f=null}),v);Be(this);a.start()}}function M(t){var n=[];for(var r=1;r<arguments.length;r++){n[r-1]=arguments[r]}if(!this.__zooming)return;var i=A(this,n).event(t),o=t.changedTouches,u=o.length,s,l,c,f;$r(t);for(s=0;s<u;++s){l=o[s],c=Jn(l,this);if(i.touch0&&i.touch0[2]===l.identifier)i.touch0[0]=c;else if(i.touch1&&i.touch1[2]===l.identifier)i.touch1[0]=c}l=i.that.__zoom;if(i.touch1){var h=i.touch0[0],p=i.touch0[1],v=i.touch1[0],d=i.touch1[1],g=(g=v[0]-h[0])*g+(g=v[1]-h[1])*g,y=(y=d[0]-p[0])*y+(y=d[1]-p[1])*y;l=w(l,Math.sqrt(g/y));c=[(h[0]+v[0])/2,(h[1]+v[1])/2];f=[(p[0]+d[0])/2,(p[1]+d[1])/2]}else if(i.touch0)c=i.touch0[0],f=i.touch0[1];else return;i.zoom("touch",e(b(l,c,f),i.extent,a))}function N(t){var n=[];for(var e=1;e<arguments.length;e++){n[e-1]=arguments[e]}if(!this.__zooming)return;var r=A(this,n).event(t),i=t.changedTouches,o=i.length,a,u;Zr(t);if(p)clearTimeout(p);p=setTimeout((function(){p=null}),v);for(a=0;a<o;++a){u=i[a];if(r.touch0&&r.touch0[2]===u.identifier)delete r.touch0;else if(r.touch1&&r.touch1[2]===u.identifier)delete r.touch1}if(r.touch1&&!r.touch0)r.touch0=r.touch1,delete r.touch1;if(r.touch0)r.touch0[1]=this.__zoom.invert(r.touch0[0]);else{r.end();if(r.taps===2){u=Jn(u,this);if(Math.hypot(h[0]-u[0],h[1]-u[1])<y){var s=Zn(this).on("dblclick.zoom");if(s)s.apply(this,arguments)}}}}m.wheelDelta=function(t){return arguments.length?(r=typeof t==="function"?t:Rr(+t),m):r};m.filter=function(n){return arguments.length?(t=typeof n==="function"?n:Rr(!!n),m):t};m.touchable=function(t){return arguments.length?(i=typeof t==="function"?t:Rr(!!t),m):i};m.extent=function(t){return arguments.length?(n=typeof t==="function"?t:Rr([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),m):n};m.scaleExtent=function(t){return arguments.length?(o[0]=+t[0],o[1]=+t[1],m):[o[0],o[1]]};m.translateExtent=function(t){return arguments.length?(a[0][0]=+t[0][0],a[1][0]=+t[1][0],a[0][1]=+t[0][1],a[1][1]=+t[1][1],m):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]};m.constrain=function(t){return arguments.length?(e=t,m):e};m.duration=function(t){return arguments.length?(u=+t,m):u};m.interpolate=function(t){return arguments.length?(s=t,m):s};m.on=function(){var t=l.on.apply(l,arguments);return t===l?m:t};m.clickDistance=function(t){return arguments.length?(g=(t=+t)*t,m):Math.sqrt(g)};m.tapDistance=function(t){return arguments.length?(y=+t,m):y};return m}var oi=function(t){var n=t.getBoundingClientRect();var e=n.height>=120?n.height:600;var r=n.width>=100?n.width:600;var i=Zn(t).append("svg").attr("viewBox",[-r/2,-e/2,r,e].join(" "));var o=i.append("g");var a=ii().on("zoom",(function(t){var n=t.transform;o.attr("transform",n)}));i.call(a);i.append("svg:defs").selectAll("marker").data(["end"]).enter().append("svg:marker").attr("id",String).attr("viewBox","0 -6 12 12").attr("refX",24).attr("refY",0).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto").append("svg:path").attr("d","M0,-6L12,0L0,6");return{height:e,width:r,svg:o}};var ai=function(t){var n;if(typeof t==="number"){return t}else if(typeof t==="string"){return Number.parseInt(t,10)}return(n=t.x)!==null&&n!==void 0?n:0};var ui=function(t){var n;if(typeof t==="number"){return t}else if(typeof t==="string"){return Number.parseInt(t,10)}return(n=t.y)!==null&&n!==void 0?n:0};var si=function(t){switch(t.type){case"Module":{return"".concat(t.language," ").concat(t.name)}case"Source":{return"".concat(t.type," ").concat(t.name)}case"Symbol":{return"".concat(t.kind," ").concat(t.name)}case"Node":{return t.kind}case"File":{return t.path}case"Url":{return t.url}}};var li=function(t){switch(t.type){case"Assign":case"Read":case"Use":{return"".concat(t.type,"s")}case"Convert":case"Import":{return"".concat(t.type,"s").concat(t.auto?" (auto)":"")}default:{return"".concat(t.type,"s")}}};var ci=function(t,n){if(n===void 0){n=512}switch(t.type){case"Node":{return w(U,n)}case"Symbol":{return w(B,n)}case"Source":{return w(V,n)}case"File":{return w(K,n)}case"Url":{return w(D,n)}case"Module":default:{return w(b,n)}}};var fi=":host,stencila-project-graph,.projectGraph{display:block;height:100%;width:100%;--graph-background:#fff;--graphColor-text:var(--color-key, #000);--graphColor-link:var(--color-neutral-100);--graphColor-default:var(--color-neutral-300);--graphColor-file:#ffec6f;--graphColor-source:#ccebc5;--graphColor-symbol:#bc80bd;--graphColor-module:#d9d9d9;--graphColor-node:#fccde5;--graphColor-url:#80b1d3;--graphColor-file:#b3de69;--graphColor-file:#fdb462;--graphColor-file:#fb7f72;--graphColor-file:#bebada}.hullContainer path{fill:var(--graphColor-file);opacity:0.2}.linkContainer line{stroke:var(--graphColor-link);stroke-width:2}.groupLinkContainer text,.groupLinkContainer line{opacity:0}.groupLinkContainer line{stroke:var(--graphColor-symbol)}.projectGraph:hover .groupLinkContainer text,.projectGraph:hover .groupLinkContainer line{opacity:1}.linkContainer text{font-size:0.5rem}svg{cursor:move;height:100%;width:100%}svg text{fill:var(--color-key);font-size:0.75rem;font-family:var(--font-family-mono);text-anchor:middle}svg text.textBackdrop{stroke:var(--graph-background);stroke-width:2px}svg circle,svg path{fill:var(--graphColor-default)}svg g{cursor:-webkit-grab;cursor:grab}svg g:active{cursor:-webkit-grabbing;cursor:grabbing}svg g.File text,svg g.Source text{font-size:1rem;font-weight:bold}svg path.File{fill:var(--graphColor-file)}svg path.Source{stroke:var(--graphColor-source);stroke-width:1}svg path.Symbol{fill:var(--graphColor-symbol)}svg path.Module{fill:var(--graphColor-module)}svg path.Node{fill:var(--graphColor-node)}svg path.Url{fill:var(--graphColor-url)}";var hi="";var pi=t("stencila_project_graph",function(){function t(t){var e=this;n(this,t);this.drawGraph=function(t){var n,r,i;var o=e.graphRef.svg;var a=_e(t);var u=x(a.nodes).force("link",k(a.links).strength((function(t){return we(t.source,t.target)||ye(t.source)&&t.source.kind==="Link"||ye(t.target)&&t.target.kind==="Link"?1:.375})).iterations(2).distance((function(t){return ye(t.source)&&t.source.kind==="Link"||ye(t.target)&&t.target.kind==="Link"?0:30})).iterations(2)).force("link:groups",k(a.groupLinks).strength((function(t){return ye(t.source)&&t.source.kind==="Link"||ye(t.target)&&t.target.kind==="Link"?1:.375})).iterations(3)).force("charge",A().strength((function(t){return t.type==="File"?-100:-1500})).distanceMin(10).distanceMax(1500)).force("collision",C(64).strength(1).iterations(4)).force("x",T().strength(.02)).force("y",z().strength(.02)).force("center",S()).velocityDecay(.4).alphaDecay(.05);var s=function(t,n){delete n.fx;delete n.fy;u.alpha(.5).restart()};var l=fe().on("drag",(function(t,n){n.fx=t.x;n.fy=t.y;u.alpha(.05).restart()}));var c=(n=e.hullContainer)!==null&&n!==void 0?n:o.append("g").attr("class","hullContainer");if(!e.hullContainer){e.hullContainer=c}var f=(r=e.linkContainer)!==null&&r!==void 0?r:o.append("g").attr("class","linkContainer");if(!e.linkContainer){e.linkContainer=f}var h=f.selectAll("g").data(a.links).join((function(t){var n=t.append("g");n.append("line").attr("marker-end","url(#end)");n.append("text").text((function(t){return li(t.relation)}));return n}));var p=(i=e.nodeContainer)!==null&&i!==void 0?i:o.append("g");if(!e.nodeContainer){e.nodeContainer=p}var v=function(t){var n;if(t===undefined||typeof t==="string"||typeof t==="number"){return""}var e=32;var r=a.groupLinks.filter((function(n){return n.group===t.path}));var i=r.length===0?[]:[[-e,-e],[e,-e],[e,e],[0,e]];var o=ai(t);var u=ui(t);var s=de(r.reduce((function(t,n){var r=ai(n.source);var i=ui(n.source);return __spreadArray(__spreadArray([],t,true),[[r-o-e,i-u-e],[r-o-e,i-u+e],[r-o+e,i-u-e],[r-o+e,i-u+e]],false)}),i));return s?(n=E().curve(M)(s))!==null&&n!==void 0?n:"":""};var d=c.selectAll("path").data(a.groups).join("path").attr("d",(function(t){var n;return(n=v(t))!==null&&n!==void 0?n:""}));var g=p.selectAll("g").data(a.nodes).join((function(t){var n=t.append("g");n.append("path").attr("d",(function(t){return ci(t)(t.type==="File"?1024:512)})).attr("class",(function(t){return ye(t)?"".concat(t.type," ").concat(t.kind):t.type}));n.append("text").attr("class","textBackdrop").attr("dy",".35em").text(si).append("text").exit();n.append("text").attr("dy",".35em").text(si).exit();n.append("title").text((function(t){return t.type}));return n})).attr("class",(function(t){return ye(t)?"".concat(t.type," ").concat(t.kind):t.type})).on("click",s).call(l);u.on("tick",(function(){h.select("line").attr("x1",(function(t){var n=t.source;var e;return typeof n==="object"?(e=n.x)!==null&&e!==void 0?e:0:n})).attr("y1",(function(t){var n=t.source;var e;return typeof n==="object"?(e=n.y)!==null&&e!==void 0?e:0:n})).attr("x2",(function(t){var n=t.target;var e;return typeof n==="object"?(e=n.x)!==null&&e!==void 0?e:0:n})).attr("y2",(function(t){var n=t.target;var e;return typeof n==="object"?(e=n.y)!==null&&e!==void 0?e:0:n}));h.select("text").attr("transform",(function(t){if(typeof t.source==="object"&&typeof t.source.y==="number"&&typeof t.source.x==="number"&&typeof t.target==="object"&&typeof t.target.y==="number"&&typeof t.target.x==="number"){return"translate(".concat(t.source.x-(t.source.x-t.target.x)/2,", ").concat(t.source.y-(t.source.y-t.target.y)/2,")")}return""}));g.attr("transform",(function(t){var n=t.x,e=t.y;return"translate(".concat(n!==null&&n!==void 0?n:0,", ").concat(e!==null&&e!==void 0?e:0,")")}));d.attr("transform",(function(t){var n,e;return"translate(".concat((n=t.x)!==null&&n!==void 0?n:0,", ").concat((e=t.y)!==null&&e!==void 0?e:0,")")})).attr("d",(function(t){var n;return(n=v(t))!==null&&n!==void 0?n:""}))}))}}t.prototype.updateGraph=function(t){this.drawGraph(t)};t.prototype.componentDidLoad=function(){if(this.el){this.graphRef=oi(this.el);this.drawGraph(this.graph)}};t.prototype.render=function(){var t=this;return e(r,null,e("div",{ref:function(n){return t.el=n},class:"projectGraph"}))};Object.defineProperty(t,"watchers",{get:function(){return{graph:["updateGraph"]}},enumerable:false,configurable:true});return t}());pi.style={default:fi,material:hi}}}}));
//# sourceMappingURL=p-caab088e.system.entry.js.map