import{h as e,F as a,r as t,f as r,e as i,c as l}from"./p-42c7aa22.js";import{g as n}from"./p-725b0d42.js";const s=e=>{if(e instanceof HTMLInputElement){if(e.type==="checkbox"){return e.checked}else if(e.type==="number"){return Number.parseFloat(e.value)}else{return e.value}}if(e instanceof HTMLSelectElement){return e.value}};const c=e=>e==="Validator"||e==="ArrayValidator"||e==="BooleanValidator"||e==="ConstantValidator"||e==="EnumValidator"||e==="IntegerValidator"||e==="NumberValidator"||e==="StringValidator"||e==="TupleValidator";const o=e=>{var a,t;return{default:(t=(a=e===null||e===void 0?void 0:e.getAttribute("placeholder"))===null||a===void 0?void 0:a.toLowerCase())!==null&&t!==void 0?t:undefined}};const m=({valueEl:t})=>{const r=o(t);return e(a,null,e("label",null,"Default value",e("input",{type:"checkbox",name:"default",checked:r.default==="true"})))};const d=()=>e(a,null,e("label",null,"Value",e("input",{name:"value"})));const p=e=>{var a,t,r,i;return{default:(t=(a=e===null||e===void 0?void 0:e.getAttribute("placeholder"))!==null&&a!==void 0?a:e===null||e===void 0?void 0:e.getAttribute("value"))!==null&&t!==void 0?t:undefined,minimum:(r=e===null||e===void 0?void 0:e.getAttribute("min"))!==null&&r!==void 0?r:undefined,maximum:(i=e===null||e===void 0?void 0:e.getAttribute("max"))!==null&&i!==void 0?i:undefined}};const u=({valueEl:t})=>{const r=p(t);return e(a,null,e("label",null,"Default value",e("input",{type:"number",name:"default",step:"1",value:r.default})),e("label",null,"Minimum",e("input",{type:"number",name:"minimum",step:"1",value:r.minimum})),e("label",null,"Maximum",e("input",{type:"number",name:"maximum",step:"1",value:r.maximum})))};const f=e=>{var a,t,r,i;return{default:(t=(a=e===null||e===void 0?void 0:e.getAttribute("placeholder"))!==null&&a!==void 0?a:e===null||e===void 0?void 0:e.getAttribute("value"))!==null&&t!==void 0?t:undefined,minimum:(r=e===null||e===void 0?void 0:e.getAttribute("min"))!==null&&r!==void 0?r:undefined,maximum:(i=e===null||e===void 0?void 0:e.getAttribute("max"))!==null&&i!==void 0?i:undefined}};const b=({valueEl:t})=>{const r=f(t);return e(a,null,e("label",null,"Default value",e("input",{type:"number",name:"default",step:"any",value:r.default})),e("label",null,"Minimum",e("input",{type:"number",name:"minimum",step:"any",value:r.minimum})),e("label",null,"Maximum",e("input",{type:"number",name:"maximum",step:"any",value:r.maximum})))};const v=e=>{var a,t,r,i;return{default:(a=e===null||e===void 0?void 0:e.getAttribute("placeholder"))!==null&&a!==void 0?a:undefined,minLength:(t=e===null||e===void 0?void 0:e.getAttribute("minLength"))!==null&&t!==void 0?t:undefined,maxLength:(r=e===null||e===void 0?void 0:e.getAttribute("maxLength"))!==null&&r!==void 0?r:undefined,pattern:(i=e===null||e===void 0?void 0:e.getAttribute("pattern"))!==null&&i!==void 0?i:undefined}};const h=({valueEl:t})=>{const r=v(t);return e(a,null,e("label",null,"Default value",e("input",{type:"text",name:"default",value:r.default})),e("label",null,"Minimum length",e("input",{type:"number",step:"1",name:"minLength",value:r.minLength,min:"0"})),e("label",null,"Maximum length",e("input",{type:"number",step:"1",name:"maxLength",value:r.maxLength})),e("label",null,"Pattern (RegEx)",e("input",{type:"text",name:"pattern",value:r.pattern})))};const k=e=>{const a=e.target;a.reportValidity()};const y=a=>t=>{switch(t){case"NumberValidator":{return e(b,{valueEl:a})}case"IntegerValidator":{return e(u,{valueEl:a})}case"StringValidator":{return e(h,{valueEl:a})}case"ConstantValidator":{return e(d,{valueEl:a})}case"BooleanValidator":{return e(m,{valueEl:a})}}};const g=a=>e("stencila-menu",{autoClose:false,menuPosition:"bottom-start"},e("stencila-button",{iconOnly:true,icon:"equalizer",size:"xsmall",slot:"toggle","aria-label":"Toggle menu",color:"key",minimal:true}),e("form",{onChange:a.onValidatorChange,onInput:k,onFocusin:k},e("label",null,"Type",e("select",{name:"validator"},e("option",{disabled:true,selected:a.type===undefined},"Selectâ€¦"),e("option",{value:"BooleanValidator",selected:a.type==="BooleanValidator"},"Boolean"),e("option",{value:"IntegerValidator",selected:a.type==="IntegerValidator"},"Integer"),e("option",{value:"NumberValidator",selected:a.type==="NumberValidator"},"Number"),e("option",{value:"StringValidator",selected:a.type==="StringValidator"},"String"),e("option",{value:"EnumValidator",selected:a.type==="EnumValidator"},"Enum"))),y(a.valueElRef)(a.type)));const w=".sc-stencila-parameter-default-h,stencila-parameter.sc-stencila-parameter-default{--background:var(--color-stock,#fff);--background-buttons:var(--color-neutral-50,#edf2f7);--border:var(--color-neutral-100,#e2e8f0);background-color:var(--background);border-color:var(--border);border-radius:.25rem;border-style:solid;border-width:1px;color:#4a4a4a;color:var(--color-key,#4a4a4a);display:-ms-inline-flexbox;display:inline-flex;font-size:.875rem;line-height:1.25rem;line-height:1;padding:0;vertical-align:text-bottom;white-space:nowrap}.sc-stencila-parameter-default-h .actions.sc-stencila-parameter-default,stencila-parameter.sc-stencila-parameter-default .actions.sc-stencila-parameter-default{background-color:var(--background-buttons);cursor:default;display:inline-block;overflow:hidden;-webkit-transition-duration:.15s;transition-duration:.15s;-webkit-transition-property:color,background-color,border-color,fill,stroke,opacity,-webkit-text-decoration-color,-webkit-box-shadow,-webkit-transform,-webkit-filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,fill,stroke,opacity,-webkit-text-decoration-color,-webkit-box-shadow,-webkit-transform,-webkit-filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-text-decoration-color,-webkit-box-shadow,-webkit-transform,-webkit-filter,-webkit-backdrop-filter;-webkit-transition-timing-function:cubic-bezier(.4,0,.2,1);transition-timing-function:cubic-bezier(.4,0,.2,1);-webkit-transition-timing-function:cubic-bezier(0,0,.2,1);transition-timing-function:cubic-bezier(0,0,.2,1);width:0}[mode=edit].hover.sc-stencila-parameter-default-h .actions.sc-stencila-parameter-default,[mode=edit].sc-stencila-parameter-default-h:focus .actions.sc-stencila-parameter-default,[mode=edit].sc-stencila-parameter-default-h:focus-within .actions.sc-stencila-parameter-default,[mode=edit].sc-stencila-parameter-default-h:hover .actions.sc-stencila-parameter-default,stencila-parameter[mode=edit].hover.sc-stencila-parameter-default .actions.sc-stencila-parameter-default,stencila-parameter[mode=edit].sc-stencila-parameter-default:focus .actions.sc-stencila-parameter-default,stencila-parameter[mode=edit].sc-stencila-parameter-default:focus-within .actions.sc-stencila-parameter-default,stencila-parameter[mode=edit].sc-stencila-parameter-default:hover .actions.sc-stencila-parameter-default{display:-ms-inline-flexbox;display:inline-flex;max-width:100%;width:100%}.sc-stencila-parameter-default-h .actions.sc-stencila-parameter-default form.sc-stencila-parameter-default,stencila-parameter.sc-stencila-parameter-default .actions.sc-stencila-parameter-default form.sc-stencila-parameter-default{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;padding:.5rem}.sc-stencila-parameter-default-h .actions.sc-stencila-parameter-default form.sc-stencila-parameter-default label.sc-stencila-parameter-default,stencila-parameter.sc-stencila-parameter-default .actions.sc-stencila-parameter-default form.sc-stencila-parameter-default label.sc-stencila-parameter-default{color:var(--color-neutral-600);display:block;font-family:sans-serif;font-family:var(--font-family-body,sans-serif);font-size:.75rem;line-height:1rem}.sc-stencila-parameter-default-h .actions.sc-stencila-parameter-default form.sc-stencila-parameter-default label.sc-stencila-parameter-default:not(:first-of-type),stencila-parameter.sc-stencila-parameter-default .actions.sc-stencila-parameter-default form.sc-stencila-parameter-default label.sc-stencila-parameter-default:not(:first-of-type){margin-top:.5rem}.sc-stencila-parameter-default-h .actions.sc-stencila-parameter-default form.sc-stencila-parameter-default label.sc-stencila-parameter-default input.sc-stencila-parameter-default,.sc-stencila-parameter-default-h .actions.sc-stencila-parameter-default form.sc-stencila-parameter-default label.sc-stencila-parameter-default select.sc-stencila-parameter-default,stencila-parameter.sc-stencila-parameter-default .actions.sc-stencila-parameter-default form.sc-stencila-parameter-default label.sc-stencila-parameter-default input.sc-stencila-parameter-default,stencila-parameter.sc-stencila-parameter-default .actions.sc-stencila-parameter-default form.sc-stencila-parameter-default label.sc-stencila-parameter-default select.sc-stencila-parameter-default{border-color:var(--border);border-radius:.25rem;border-style:solid;border-width:1px;display:block;font-family:monospace;font-family:var(--font-family-mono,monospace);font-size:.875rem;line-height:1.25rem;margin-top:.25rem;width:100%}.sc-stencila-parameter-default-h .name.sc-stencila-parameter-default,stencila-parameter.sc-stencila-parameter-default .name.sc-stencila-parameter-default{background-color:var(--background-buttons);cursor:text;font-family:monospace;font-family:var(--font-family-mono,monospace);padding:.25rem}.sc-stencila-parameter-default-h .name.sc-stencila-parameter-default-s>label,stencila-parameter .name.sc-stencila-parameter-default-s>label{cursor:text}.sc-stencila-parameter-default-h .value.sc-stencila-parameter-default,stencila-parameter.sc-stencila-parameter-default .value.sc-stencila-parameter-default{background-color:var(--background);font-family:monospace;font-family:var(--font-family-mono,monospace);margin:0;padding:0 .25rem}.sc-stencila-parameter-default-h .value.sc-stencila-parameter-default-s>input,.sc-stencila-parameter-default-h .value.sc-stencila-parameter-default-s>select,stencila-parameter .value.sc-stencila-parameter-default-s>input,stencila-parameter .value.sc-stencila-parameter-default-s>select{border-width:0;display:inline-block;font-family:monospace;font-family:var(--font-family-mono,monospace)}.sc-stencila-parameter-default-h .sc-stencila-parameter-default-s>input,.sc-stencila-parameter-default-h input.sc-stencila-parameter-default,stencila-parameter.sc-stencila-parameter-default-s>input,stencila-parameter .sc-stencila-parameter-default-s>input,stencila-parameter.sc-stencila-parameter-default input.sc-stencila-parameter-default{min-width:4rem}.sc-stencila-parameter-default-h .sc-stencila-parameter-default-s>input:invalid,.sc-stencila-parameter-default-h input.sc-stencila-parameter-default:invalid,stencila-parameter.sc-stencila-parameter-default-s>input:invalid,stencila-parameter .sc-stencila-parameter-default-s>input:invalid,stencila-parameter.sc-stencila-parameter-default input.sc-stencila-parameter-default:invalid{border-radius:.25rem;-webkit-box-shadow:0 0 0 2px var(--color-danger-500);box-shadow:0 0 0 2px var(--color-danger-500)}";const x=".sc-stencila-parameter-material-h,stencila-parameter.sc-stencila-parameter-material{--background:var(--color-stock,#fff);--background-buttons:var(--color-neutral-50,#edf2f7);--border:var(--color-neutral-100,#e2e8f0);background-color:var(--background);border-color:var(--border);border-radius:.25rem;border-style:solid;border-width:1px;color:#4a4a4a;color:var(--color-key,#4a4a4a);display:-ms-inline-flexbox;display:inline-flex;font-size:.875rem;line-height:1.25rem;line-height:1;padding:0;vertical-align:text-bottom;white-space:nowrap}.sc-stencila-parameter-material-h .actions.sc-stencila-parameter-material,stencila-parameter.sc-stencila-parameter-material .actions.sc-stencila-parameter-material{background-color:var(--background-buttons);cursor:default;display:inline-block;overflow:hidden;-webkit-transition-duration:.15s;transition-duration:.15s;-webkit-transition-property:color,background-color,border-color,fill,stroke,opacity,-webkit-text-decoration-color,-webkit-box-shadow,-webkit-transform,-webkit-filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,fill,stroke,opacity,-webkit-text-decoration-color,-webkit-box-shadow,-webkit-transform,-webkit-filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-text-decoration-color,-webkit-box-shadow,-webkit-transform,-webkit-filter,-webkit-backdrop-filter;-webkit-transition-timing-function:cubic-bezier(.4,0,.2,1);transition-timing-function:cubic-bezier(.4,0,.2,1);-webkit-transition-timing-function:cubic-bezier(0,0,.2,1);transition-timing-function:cubic-bezier(0,0,.2,1);width:0}[mode=edit].hover.sc-stencila-parameter-material-h .actions.sc-stencila-parameter-material,[mode=edit].sc-stencila-parameter-material-h:focus .actions.sc-stencila-parameter-material,[mode=edit].sc-stencila-parameter-material-h:focus-within .actions.sc-stencila-parameter-material,[mode=edit].sc-stencila-parameter-material-h:hover .actions.sc-stencila-parameter-material,stencila-parameter[mode=edit].hover.sc-stencila-parameter-material .actions.sc-stencila-parameter-material,stencila-parameter[mode=edit].sc-stencila-parameter-material:focus .actions.sc-stencila-parameter-material,stencila-parameter[mode=edit].sc-stencila-parameter-material:focus-within .actions.sc-stencila-parameter-material,stencila-parameter[mode=edit].sc-stencila-parameter-material:hover .actions.sc-stencila-parameter-material{display:-ms-inline-flexbox;display:inline-flex;max-width:100%;width:100%}.sc-stencila-parameter-material-h .actions.sc-stencila-parameter-material form.sc-stencila-parameter-material,stencila-parameter.sc-stencila-parameter-material .actions.sc-stencila-parameter-material form.sc-stencila-parameter-material{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;padding:.5rem}.sc-stencila-parameter-material-h .actions.sc-stencila-parameter-material form.sc-stencila-parameter-material label.sc-stencila-parameter-material,stencila-parameter.sc-stencila-parameter-material .actions.sc-stencila-parameter-material form.sc-stencila-parameter-material label.sc-stencila-parameter-material{color:var(--color-neutral-600);display:block;font-family:sans-serif;font-family:var(--font-family-body,sans-serif);font-size:.75rem;line-height:1rem}.sc-stencila-parameter-material-h .actions.sc-stencila-parameter-material form.sc-stencila-parameter-material label.sc-stencila-parameter-material:not(:first-of-type),stencila-parameter.sc-stencila-parameter-material .actions.sc-stencila-parameter-material form.sc-stencila-parameter-material label.sc-stencila-parameter-material:not(:first-of-type){margin-top:.5rem}.sc-stencila-parameter-material-h .actions.sc-stencila-parameter-material form.sc-stencila-parameter-material label.sc-stencila-parameter-material input.sc-stencila-parameter-material,.sc-stencila-parameter-material-h .actions.sc-stencila-parameter-material form.sc-stencila-parameter-material label.sc-stencila-parameter-material select.sc-stencila-parameter-material,stencila-parameter.sc-stencila-parameter-material .actions.sc-stencila-parameter-material form.sc-stencila-parameter-material label.sc-stencila-parameter-material input.sc-stencila-parameter-material,stencila-parameter.sc-stencila-parameter-material .actions.sc-stencila-parameter-material form.sc-stencila-parameter-material label.sc-stencila-parameter-material select.sc-stencila-parameter-material{border-color:var(--border);border-radius:.25rem;border-style:solid;border-width:1px;display:block;font-family:monospace;font-family:var(--font-family-mono,monospace);font-size:.875rem;line-height:1.25rem;margin-top:.25rem;width:100%}.sc-stencila-parameter-material-h .name.sc-stencila-parameter-material,stencila-parameter.sc-stencila-parameter-material .name.sc-stencila-parameter-material{background-color:var(--background-buttons);cursor:text;font-family:monospace;font-family:var(--font-family-mono,monospace);padding:.25rem}.sc-stencila-parameter-material-h .name.sc-stencila-parameter-material-s>label,stencila-parameter .name.sc-stencila-parameter-material-s>label{cursor:text}.sc-stencila-parameter-material-h .value.sc-stencila-parameter-material,stencila-parameter.sc-stencila-parameter-material .value.sc-stencila-parameter-material{background-color:var(--background);font-family:monospace;font-family:var(--font-family-mono,monospace);margin:0;padding:0 .25rem}.sc-stencila-parameter-material-h .value.sc-stencila-parameter-material-s>input,.sc-stencila-parameter-material-h .value.sc-stencila-parameter-material-s>select,stencila-parameter .value.sc-stencila-parameter-material-s>input,stencila-parameter .value.sc-stencila-parameter-material-s>select{border-width:0;display:inline-block;font-family:monospace;font-family:var(--font-family-mono,monospace)}.sc-stencila-parameter-material-h .sc-stencila-parameter-material-s>input,.sc-stencila-parameter-material-h input.sc-stencila-parameter-material,stencila-parameter.sc-stencila-parameter-material-s>input,stencila-parameter .sc-stencila-parameter-material-s>input,stencila-parameter.sc-stencila-parameter-material input.sc-stencila-parameter-material{min-width:4rem}.sc-stencila-parameter-material-h .sc-stencila-parameter-material-s>input:invalid,.sc-stencila-parameter-material-h input.sc-stencila-parameter-material:invalid,stencila-parameter.sc-stencila-parameter-material-s>input:invalid,stencila-parameter .sc-stencila-parameter-material-s>input:invalid,stencila-parameter.sc-stencila-parameter-material input.sc-stencila-parameter-material:invalid{border-radius:.25rem;-webkit-box-shadow:0 0 0 2px var(--color-danger-500);box-shadow:0 0 0 2px var(--color-danger-500)}";const V=class{constructor(e){t(this,e);this.parameterChange=r(this,"stencila-parameter-change",7);this.validatorChange=r(this,"stencila-validator-change",7);this.labelSlotRef=undefined;this.valueSlotRef=undefined;this.mode="edit";this.paramName="";this.onParamChange=e=>{const a=e.currentTarget;const t=this.validateValue(a);if(t){this.parameterChange.emit({property:"value",value:s(a)})}};this.onParamNameChange=e=>{const a=e.currentTarget;this.parameterChange.emit({property:"name",value:a.textContent})};this.onValidatorChange=e=>{const a=e.target;const t=s(a);if(a.name==="validator"&&typeof t==="string"&&a.value!==this.validator&&c(t)){this.validator=t;this.validatorChange.emit({type:"validator",value:t})}else{this.validatorChange.emit({type:"property",name:a.name,value:t})}};this.validateValue=e=>e.reportValidity();this.getValidatorFromMetaEl=()=>{var e,a;const t=this.el.querySelector('meta[itemprop="validator"]');const r=(a=(e=t===null||t===void 0?void 0:t.getAttribute("itemtype"))===null||e===void 0?void 0:e.split("/"))!==null&&a!==void 0?a:[];const i=r[r.length-1];return c(i)?i:undefined}}componentWillLoad(){if(this.validator===undefined){this.validator=this.getValidatorFromMetaEl()}this.labelSlotRef=n(this.el)("name")[0];const e=n(this.el)("value");this.valueSlotRef=e[0];for(const a of e){a.addEventListener("input",this.onParamChange);a.addEventListener("focus",this.onParamChange)}}disconnectedCallback(){const e=n(this.el)("value");for(const a of e){a.removeEventListener("input",this.onParamChange);a.removeEventListener("focus",this.onParamChange)}}render(){var a,t;const r=(t=(a=this.labelSlotRef)===null||a===void 0?void 0:a.textContent)!==null&&t!==void 0?t:"parameter";return e(i,null,e("span",{class:"actions"},this.mode==="edit"&&e(g,{type:this.validator,onValidatorChange:this.onValidatorChange,valueElRef:this.valueSlotRef}),e("span",{class:"name",contentEditable:this.mode==="edit",onClick:e=>{if(this.mode==="edit"){e.preventDefault()}},onInput:this.onParamNameChange,ref:e=>this.labelSlotRef=e},e("slot",{name:"name"}))),e("form",{class:"value",title:r},e("slot",{name:"value"})))}get el(){return l(this)}};V.style={default:w,material:x};export{V as stencila_parameter};
//# sourceMappingURL=p-b32857bf.entry.js.map