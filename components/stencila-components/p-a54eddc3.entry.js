import{r as t,h as n,e as r}from"./p-42c7aa22.js";import{f as i,c as e,s as u,t as o,p as s,Z as f,a5 as c,a6 as a,E as h,F as l,G as v,H as d,O as p,N as y,Y as g,P as m,T as w,a7 as b,_ as k,a2 as x,a1 as C,a0 as A,a3 as z,a4 as j,$ as E,l as M,W as $}from"./p-a62c3f64.js";const _=i(1/3);const S=_*2;const L={draw(t,n){const r=i(n/S);const e=r*_;t.moveTo(0,-r);t.lineTo(e,0);t.lineTo(0,r);t.lineTo(-e,0);t.closePath()}};const T={draw(t,n){const r=i(n);const e=-r/2;t.rect(e,e,r,r)}};const F=.8908130915292852;const N=u(s/10)/u(7*s/10);const G=u(o/10)*N;const B=-e(o/10)*N;const I={draw(t,n){const r=i(n*F);const s=G*r;const f=B*r;t.moveTo(0,-r);t.lineTo(s,f);for(let i=1;i<5;++i){const n=o*i/5;const c=e(n);const a=u(n);t.lineTo(a*r,-c*r);t.lineTo(c*s-a*f,a*s+c*f)}t.closePath()}};const X=i(3);const Y={draw(t,n){const r=-i(n/(X*3));t.moveTo(0,r*2);t.lineTo(-X*r,-r);t.lineTo(X*r,-r);t.closePath()}};const U=-.5;const O=i(3)/2;const q=1/i(12);const H=(q/2+1)*3;const P={draw(t,n){const r=i(n/H);const e=r/2,u=r*q;const o=e,s=r*q+r;const f=-o,c=s;t.moveTo(e,u);t.lineTo(o,s);t.lineTo(f,c);t.lineTo(U*e-O*u,O*e+U*u);t.lineTo(U*o-O*s,O*o+U*s);t.lineTo(U*f-O*c,O*f+U*c);t.lineTo(U*e+O*u,U*u-O*e);t.lineTo(U*o+O*s,U*s-O*o);t.lineTo(U*f+O*c,U*c-O*f);t.closePath()}};function V(t,n,r){var i=new f;n=n==null?0:+n;i.restart((r=>{i.stop();t(r+n)}),n,r);return i}var W="http://www.w3.org/1999/xhtml";const D={svg:"http://www.w3.org/2000/svg",xhtml:W,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function R(t){var n=t+="",r=n.indexOf(":");if(r>=0&&(n=t.slice(0,r))!=="xmlns")t=t.slice(r+1);return D.hasOwnProperty(n)?{space:D[n],local:t}:t}function Z(t){return function(){var n=this.ownerDocument,r=this.namespaceURI;return r===W&&n.documentElement.namespaceURI===W?n.createElement(t):n.createElementNS(r,t)}}function J(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function K(t){var n=R(t);return(n.local?J:Z)(n)}function Q(){}function tt(t){return t==null?Q:function(){return this.querySelector(t)}}function nt(t){if(typeof t!=="function")t=tt(t);for(var n=this._groups,r=n.length,i=new Array(r),e=0;e<r;++e){for(var u=n[e],o=u.length,s=i[e]=new Array(o),f,c,a=0;a<o;++a){if((f=u[a])&&(c=t.call(f,f.__data__,a,u))){if("__data__"in f)c.__data__=f.__data__;s[a]=c}}}return new Hn(i,this._parents)}function rt(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function it(){return[]}function et(t){return t==null?it:function(){return this.querySelectorAll(t)}}function ut(t){return function(){return rt(t.apply(this,arguments))}}function ot(t){if(typeof t==="function")t=ut(t);else t=et(t);for(var n=this._groups,r=n.length,i=[],e=[],u=0;u<r;++u){for(var o=n[u],s=o.length,f,c=0;c<s;++c){if(f=o[c]){i.push(t.call(f,f.__data__,c,o));e.push(f)}}}return new Hn(i,e)}function st(t){return function(){return this.matches(t)}}function ft(t){return function(n){return n.matches(t)}}var ct=Array.prototype.find;function at(t){return function(){return ct.call(this.children,t)}}function ht(){return this.firstElementChild}function lt(t){return this.select(t==null?ht:at(typeof t==="function"?t:ft(t)))}var vt=Array.prototype.filter;function dt(){return Array.from(this.children)}function pt(t){return function(){return vt.call(this.children,t)}}function yt(t){return this.selectAll(t==null?dt:pt(typeof t==="function"?t:ft(t)))}function gt(t){if(typeof t!=="function")t=st(t);for(var n=this._groups,r=n.length,i=new Array(r),e=0;e<r;++e){for(var u=n[e],o=u.length,s=i[e]=[],f,c=0;c<o;++c){if((f=u[c])&&t.call(f,f.__data__,c,u)){s.push(f)}}}return new Hn(i,this._parents)}function mt(t){return new Array(t.length)}function wt(){return new Hn(this._enter||this._groups.map(mt),this._parents)}function bt(t,n){this.ownerDocument=t.ownerDocument;this.namespaceURI=t.namespaceURI;this._next=null;this._parent=t;this.__data__=n}bt.prototype={constructor:bt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function kt(t){return function(){return t}}function xt(t,n,r,i,e,u){var o=0,s,f=n.length,c=u.length;for(;o<c;++o){if(s=n[o]){s.__data__=u[o];i[o]=s}else{r[o]=new bt(t,u[o])}}for(;o<f;++o){if(s=n[o]){e[o]=s}}}function Ct(t,n,r,i,e,u,o){var s,f,c=new Map,a=n.length,h=u.length,l=new Array(a),v;for(s=0;s<a;++s){if(f=n[s]){l[s]=v=o.call(f,f.__data__,s,n)+"";if(c.has(v)){e[s]=f}else{c.set(v,f)}}}for(s=0;s<h;++s){v=o.call(t,u[s],s,u)+"";if(f=c.get(v)){i[s]=f;f.__data__=u[s];c.delete(v)}else{r[s]=new bt(t,u[s])}}for(s=0;s<a;++s){if((f=n[s])&&c.get(l[s])===f){e[s]=f}}}function At(t){return t.__data__}function zt(t,n){if(!arguments.length)return Array.from(this,At);var r=n?Ct:xt,i=this._parents,e=this._groups;if(typeof t!=="function")t=kt(t);for(var u=e.length,o=new Array(u),s=new Array(u),f=new Array(u),c=0;c<u;++c){var a=i[c],h=e[c],l=h.length,v=jt(t.call(a,a&&a.__data__,c,i)),d=v.length,p=s[c]=new Array(d),y=o[c]=new Array(d),g=f[c]=new Array(l);r(a,h,p,y,g,v,n);for(var m=0,w=0,b,k;m<d;++m){if(b=p[m]){if(m>=w)w=m+1;while(!(k=y[w])&&++w<d);b._next=k||null}}}o=new Hn(o,i);o._enter=s;o._exit=f;return o}function jt(t){return typeof t==="object"&&"length"in t?t:Array.from(t)}function Et(){return new Hn(this._exit||this._groups.map(mt),this._parents)}function Mt(t,n,r){var i=this.enter(),e=this,u=this.exit();if(typeof t==="function"){i=t(i);if(i)i=i.selection()}else{i=i.append(t+"")}if(n!=null){e=n(e);if(e)e=e.selection()}if(r==null)u.remove();else r(u);return i&&e?i.merge(e).order():e}function $t(t){var n=t.selection?t.selection():t;for(var r=this._groups,i=n._groups,e=r.length,u=i.length,o=Math.min(e,u),s=new Array(e),f=0;f<o;++f){for(var c=r[f],a=i[f],h=c.length,l=s[f]=new Array(h),v,d=0;d<h;++d){if(v=c[d]||a[d]){l[d]=v}}}for(;f<e;++f){s[f]=r[f]}return new Hn(s,this._parents)}function _t(){for(var t=this._groups,n=-1,r=t.length;++n<r;){for(var i=t[n],e=i.length-1,u=i[e],o;--e>=0;){if(o=i[e]){if(u&&o.compareDocumentPosition(u)^4)u.parentNode.insertBefore(o,u);u=o}}}return this}function St(t){if(!t)t=Lt;function n(n,r){return n&&r?t(n.__data__,r.__data__):!n-!r}for(var r=this._groups,i=r.length,e=new Array(i),u=0;u<i;++u){for(var o=r[u],s=o.length,f=e[u]=new Array(s),c,a=0;a<s;++a){if(c=o[a]){f[a]=c}}f.sort(n)}return new Hn(e,this._parents).order()}function Lt(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function Tt(){var t=arguments[0];arguments[0]=this;t.apply(null,arguments);return this}function Ft(){return Array.from(this)}function Nt(){for(var t=this._groups,n=0,r=t.length;n<r;++n){for(var i=t[n],e=0,u=i.length;e<u;++e){var o=i[e];if(o)return o}}return null}function Gt(){let t=0;for(const n of this)++t;return t}function Bt(){return!this.node()}function It(t){for(var n=this._groups,r=0,i=n.length;r<i;++r){for(var e=n[r],u=0,o=e.length,s;u<o;++u){if(s=e[u])t.call(s,s.__data__,u,e)}}return this}function Xt(t){return function(){this.removeAttribute(t)}}function Yt(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ut(t,n){return function(){this.setAttribute(t,n)}}function Ot(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function qt(t,n){return function(){var r=n.apply(this,arguments);if(r==null)this.removeAttribute(t);else this.setAttribute(t,r)}}function Ht(t,n){return function(){var r=n.apply(this,arguments);if(r==null)this.removeAttributeNS(t.space,t.local);else this.setAttributeNS(t.space,t.local,r)}}function Pt(t,n){var r=R(t);if(arguments.length<2){var i=this.node();return r.local?i.getAttributeNS(r.space,r.local):i.getAttribute(r)}return this.each((n==null?r.local?Yt:Xt:typeof n==="function"?r.local?Ht:qt:r.local?Ot:Ut)(r,n))}function Vt(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Wt(t){return function(){this.style.removeProperty(t)}}function Dt(t,n,r){return function(){this.style.setProperty(t,n,r)}}function Rt(t,n,r){return function(){var i=n.apply(this,arguments);if(i==null)this.style.removeProperty(t);else this.style.setProperty(t,i,r)}}function Zt(t,n,r){return arguments.length>1?this.each((n==null?Wt:typeof n==="function"?Rt:Dt)(t,n,r==null?"":r)):Jt(this.node(),t)}function Jt(t,n){return t.style.getPropertyValue(n)||Vt(t).getComputedStyle(t,null).getPropertyValue(n)}function Kt(t){return function(){delete this[t]}}function Qt(t,n){return function(){this[t]=n}}function tn(t,n){return function(){var r=n.apply(this,arguments);if(r==null)delete this[t];else this[t]=r}}function nn(t,n){return arguments.length>1?this.each((n==null?Kt:typeof n==="function"?tn:Qt)(t,n)):this.node()[t]}function rn(t){return t.trim().split(/^|\s+/)}function en(t){return t.classList||new un(t)}function un(t){this._node=t;this._names=rn(t.getAttribute("class")||"")}un.prototype={add:function(t){var n=this._names.indexOf(t);if(n<0){this._names.push(t);this._node.setAttribute("class",this._names.join(" "))}},remove:function(t){var n=this._names.indexOf(t);if(n>=0){this._names.splice(n,1);this._node.setAttribute("class",this._names.join(" "))}},contains:function(t){return this._names.indexOf(t)>=0}};function on(t,n){var r=en(t),i=-1,e=n.length;while(++i<e)r.add(n[i])}function sn(t,n){var r=en(t),i=-1,e=n.length;while(++i<e)r.remove(n[i])}function fn(t){return function(){on(this,t)}}function cn(t){return function(){sn(this,t)}}function an(t,n){return function(){(n.apply(this,arguments)?on:sn)(this,t)}}function hn(t,n){var r=rn(t+"");if(arguments.length<2){var i=en(this.node()),e=-1,u=r.length;while(++e<u)if(!i.contains(r[e]))return false;return true}return this.each((typeof n==="function"?an:n?fn:cn)(r,n))}function ln(){this.textContent=""}function vn(t){return function(){this.textContent=t}}function dn(t){return function(){var n=t.apply(this,arguments);this.textContent=n==null?"":n}}function pn(t){return arguments.length?this.each(t==null?ln:(typeof t==="function"?dn:vn)(t)):this.node().textContent}function yn(){this.innerHTML=""}function gn(t){return function(){this.innerHTML=t}}function mn(t){return function(){var n=t.apply(this,arguments);this.innerHTML=n==null?"":n}}function wn(t){return arguments.length?this.each(t==null?yn:(typeof t==="function"?mn:gn)(t)):this.node().innerHTML}function bn(){if(this.nextSibling)this.parentNode.appendChild(this)}function kn(){return this.each(bn)}function xn(){if(this.previousSibling)this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Cn(){return this.each(xn)}function An(t){var n=typeof t==="function"?t:K(t);return this.select((function(){return this.appendChild(n.apply(this,arguments))}))}function zn(){return null}function jn(t,n){var r=typeof t==="function"?t:K(t),i=n==null?zn:typeof n==="function"?n:tt(n);return this.select((function(){return this.insertBefore(r.apply(this,arguments),i.apply(this,arguments)||null)}))}function En(){var t=this.parentNode;if(t)t.removeChild(this)}function Mn(){return this.each(En)}function $n(){var t=this.cloneNode(false),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function _n(){var t=this.cloneNode(true),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function Sn(t){return this.select(t?_n:$n)}function Ln(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Tn(t){return function(n){t.call(this,n,this.__data__)}}function Fn(t){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0)n=t.slice(r+1),t=t.slice(0,r);return{type:t,name:n}}))}function Nn(t){return function(){var n=this.__on;if(!n)return;for(var r=0,i=-1,e=n.length,u;r<e;++r){if(u=n[r],(!t.type||u.type===t.type)&&u.name===t.name){this.removeEventListener(u.type,u.listener,u.options)}else{n[++i]=u}}if(++i)n.length=i;else delete this.__on}}function Gn(t,n,r){return function(){var i=this.__on,e,u=Tn(n);if(i)for(var o=0,s=i.length;o<s;++o){if((e=i[o]).type===t.type&&e.name===t.name){this.removeEventListener(e.type,e.listener,e.options);this.addEventListener(e.type,e.listener=u,e.options=r);e.value=n;return}}this.addEventListener(t.type,u,r);e={type:t.type,name:t.name,value:n,listener:u,options:r};if(!i)this.__on=[e];else i.push(e)}}function Bn(t,n,r){var i=Fn(t+""),e,u=i.length,o;if(arguments.length<2){var s=this.node().__on;if(s)for(var f=0,c=s.length,a;f<c;++f){for(e=0,a=s[f];e<u;++e){if((o=i[e]).type===a.type&&o.name===a.name){return a.value}}}return}s=n?Gn:Nn;for(e=0;e<u;++e)this.each(s(i[e],n,r));return this}function In(t,n,r){var i=Vt(t),e=i.CustomEvent;if(typeof e==="function"){e=new e(n,r)}else{e=i.document.createEvent("Event");if(r)e.initEvent(n,r.bubbles,r.cancelable),e.detail=r.detail;else e.initEvent(n,false,false)}t.dispatchEvent(e)}function Xn(t,n){return function(){return In(this,t,n)}}function Yn(t,n){return function(){return In(this,t,n.apply(this,arguments))}}function Un(t,n){return this.each((typeof n==="function"?Yn:Xn)(t,n))}function*On(){for(var t=this._groups,n=0,r=t.length;n<r;++n){for(var i=t[n],e=0,u=i.length,o;e<u;++e){if(o=i[e])yield o}}}var qn=[null];function Hn(t,n){this._groups=t;this._parents=n}function Pn(){return new Hn([[document.documentElement]],qn)}function Vn(){return this}Hn.prototype=Pn.prototype={constructor:Hn,select:nt,selectAll:ot,selectChild:lt,selectChildren:yt,filter:gt,data:zt,enter:wt,exit:Et,join:Mt,merge:$t,selection:Vn,order:_t,sort:St,call:Tt,nodes:Ft,node:Nt,size:Gt,empty:Bt,each:It,attr:Pt,style:Zt,property:nn,classed:hn,text:pn,html:wn,raise:kn,lower:Cn,append:An,insert:jn,remove:Mn,clone:Sn,datum:Ln,on:Bn,dispatch:Un,[Symbol.iterator]:On};function Wn(t){return typeof t==="string"?new Hn([[document.querySelector(t)]],[document.documentElement]):new Hn([[t]],qn)}function Dn(t){let n;while(n=t.sourceEvent)t=n;return t}function Rn(t,n){t=Dn(t);if(n===undefined)n=t.currentTarget;if(n){var r=n.ownerSVGElement||n;if(r.createSVGPoint){var i=r.createSVGPoint();i.x=t.clientX,i.y=t.clientY;i=i.matrixTransform(n.getScreenCTM().inverse());return[i.x,i.y]}if(n.getBoundingClientRect){var e=n.getBoundingClientRect();return[t.clientX-e.left-n.clientLeft,t.clientY-e.top-n.clientTop]}}return[t.pageX,t.pageY]}const Zn={passive:false};const Jn={capture:true,passive:false};function Kn(t){t.stopImmediatePropagation()}function Qn(t){t.preventDefault();t.stopImmediatePropagation()}function tr(t){var n=t.document.documentElement,r=Wn(t).on("dragstart.drag",Qn,Jn);if("onselectstart"in n){r.on("selectstart.drag",Qn,Jn)}else{n.__noselect=n.style.MozUserSelect;n.style.MozUserSelect="none"}}function nr(t,n){var r=t.document.documentElement,i=Wn(t).on("dragstart.drag",null);if(n){i.on("click.drag",Qn,Jn);setTimeout((function(){i.on("click.drag",null)}),0)}if("onselectstart"in r){i.on("selectstart.drag",null)}else{r.style.MozUserSelect=r.__noselect;delete r.__noselect}}const rr=t=>()=>t;function ir(t,{sourceEvent:n,subject:r,target:i,identifier:e,active:u,x:o,y:s,dx:f,dy:c,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:true,configurable:true},sourceEvent:{value:n,enumerable:true,configurable:true},subject:{value:r,enumerable:true,configurable:true},target:{value:i,enumerable:true,configurable:true},identifier:{value:e,enumerable:true,configurable:true},active:{value:u,enumerable:true,configurable:true},x:{value:o,enumerable:true,configurable:true},y:{value:s,enumerable:true,configurable:true},dx:{value:f,enumerable:true,configurable:true},dy:{value:c,enumerable:true,configurable:true},_:{value:a}})}ir.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function er(t){return!t.ctrlKey&&!t.button}function ur(){return this.parentNode}function or(t,n){return n==null?{x:t.x,y:t.y}:n}function sr(){return navigator.maxTouchPoints||"ontouchstart"in this}function fr(){var t=er,n=ur,r=or,i=sr,e={},u=c("start","drag","end"),o=0,s,f,a,h,l=0;function v(t){t.on("mousedown.drag",d).filter(i).on("touchstart.drag",g).on("touchmove.drag",m,Zn).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(r,i){if(h||!t.call(this,r,i))return;var e=b(this,n.call(this,r,i),r,i,"mouse");if(!e)return;Wn(r.view).on("mousemove.drag",p,Jn).on("mouseup.drag",y,Jn);tr(r.view);Kn(r);a=false;s=r.clientX;f=r.clientY;e("start",r)}function p(t){Qn(t);if(!a){var n=t.clientX-s,r=t.clientY-f;a=n*n+r*r>l}e.mouse("drag",t)}function y(t){Wn(t.view).on("mousemove.drag mouseup.drag",null);nr(t.view,a);Qn(t);e.mouse("end",t)}function g(r,i){if(!t.call(this,r,i))return;var e=r.changedTouches,u=n.call(this,r,i),o=e.length,s,f;for(s=0;s<o;++s){if(f=b(this,u,r,i,e[s].identifier,e[s])){Kn(r);f("start",r,e[s])}}}function m(t){var n=t.changedTouches,r=n.length,i,u;for(i=0;i<r;++i){if(u=e[n[i].identifier]){Qn(t);u("drag",t,n[i])}}}function w(t){var n=t.changedTouches,r=n.length,i,u;if(h)clearTimeout(h);h=setTimeout((function(){h=null}),500);for(i=0;i<r;++i){if(u=e[n[i].identifier]){Kn(t);u("end",t,n[i])}}}function b(t,n,i,s,f,c){var a=u.copy(),h=Rn(c||i,n),l,d,p;if((p=r.call(t,new ir("beforestart",{sourceEvent:i,target:v,identifier:f,active:o,x:h[0],y:h[1],dx:0,dy:0,dispatch:a}),s))==null)return;l=p.x-h[0]||0;d=p.y-h[1]||0;return function r(i,u,c){var y=h,g;switch(i){case"start":e[f]=r,g=o++;break;case"end":delete e[f],--o;case"drag":h=Rn(c||u,n),g=o;break}a.call(i,t,new ir(i,{sourceEvent:u,subject:p,target:v,identifier:f,active:g,x:h[0]+l,y:h[1]+d,dx:h[0]-y[0],dy:h[1]-y[1],dispatch:a}),s)}}v.filter=function(n){return arguments.length?(t=typeof n==="function"?n:rr(!!n),v):t};v.container=function(t){return arguments.length?(n=typeof t==="function"?t:rr(t),v):n};v.subject=function(t){return arguments.length?(r=typeof t==="function"?t:rr(t),v):r};v.touchable=function(t){return arguments.length?(i=typeof t==="function"?t:rr(!!t),v):i};v.on=function(){var t=u.on.apply(u,arguments);return t===u?v:t};v.clickDistance=function(t){return arguments.length?(l=(t=+t)*t,v):Math.sqrt(l)};return v}function cr(t,n,r){return(n[0]-t[0])*(r[1]-t[1])-(n[1]-t[1])*(r[0]-t[0])}function ar(t,n){return t[0]-n[0]||t[1]-n[1]}function hr(t){const n=t.length,r=[0,1];let i=2,e;for(e=2;e<n;++e){while(i>1&&cr(t[r[i-2]],t[r[i-1]],t[e])<=0)--i;r[i++]=e}return r.slice(0,i)}function lr(t){if((r=t.length)<3)return null;var n,r,i=new Array(r),e=new Array(r);for(n=0;n<r;++n)i[n]=[+t[n][0],+t[n][1],n];i.sort(ar);for(n=0;n<r;++n)e[n]=[i[n][0],-i[n][1]];var u=hr(i),o=hr(e);var s=o[0]===u[0],f=o[o.length-1]===u[u.length-1],c=[];for(n=u.length-1;n>=0;--n)c.push(t[i[u[n]][2]]);for(n=+s;n<o.length-f;++n)c.push(t[i[o[n]][2]]);return c}const vr=t=>{if(typeof t==="object"&&(t.type==="Symbol"||t.type==="Node"||t.type==="File")){return true}return false};const dr=t=>{if(typeof t==="object"&&(t.type==="Symbol"||t.type==="Node")){return true}return false};const pr=t=>t.edges.reduce(((n,r)=>{const i=t.nodes[r.to];const e=vr(i)?i.path:"leaf";return[...n,{source:r.from,target:r.to,group:e,relation:r.relation}]}),[]);const yr=t=>{const n=[...t.nodes];const r=n.filter((t=>t.type==="File"));const i=t.nodes.filter((t=>vr(t)&&t.type!=="File"));const e={nodes:t.nodes,links:pr(t),groupLinks:[],groups:r};const u=t=>{var n;return(n=r.find((n=>n.path===t)))===null||n===void 0?void 0:n.index};for(const o of r){const t=u(o.path);if(t===undefined)break;for(const n of i){if(vr(n)&&n.path===o.path){e.groupLinks.push({source:n.index,target:o.index,group:n.path,relation:{type:""}})}}}return e};const gr=(t,n)=>{if(vr(t)&&vr(n)){return(n.path!==""||n.path!=="")&&n.path===t.path}return false};var mr=c("start","end","cancel","interrupt");var wr=[];var br=0;var kr=1;var xr=2;var Cr=3;var Ar=4;var zr=5;var jr=6;function Er(t,n,r,i,e,u){var o=t.__transition;if(!o)t.__transition={};else if(r in o)return;Sr(t,r,{name:n,index:i,group:e,on:mr,tween:wr,time:u.time,delay:u.delay,duration:u.duration,ease:u.ease,timer:null,state:br})}function Mr(t,n){var r=_r(t,n);if(r.state>br)throw new Error("too late; already scheduled");return r}function $r(t,n){var r=_r(t,n);if(r.state>Cr)throw new Error("too late; already running");return r}function _r(t,n){var r=t.__transition;if(!r||!(r=r[n]))throw new Error("transition not found");return r}function Sr(t,n,r){var i=t.__transition,e;i[n]=r;r.timer=a(u,0,r.time);function u(t){r.state=kr;r.timer.restart(o,r.delay,r.time);if(r.delay<=t)o(t-r.delay)}function o(u){var c,a,h,l;if(r.state!==kr)return f();for(c in i){l=i[c];if(l.name!==r.name)continue;if(l.state===Cr)return V(o);if(l.state===Ar){l.state=jr;l.timer.stop();l.on.call("interrupt",t,t.__data__,l.index,l.group);delete i[c]}else if(+c<n){l.state=jr;l.timer.stop();l.on.call("cancel",t,t.__data__,l.index,l.group);delete i[c]}}V((function(){if(r.state===Cr){r.state=Ar;r.timer.restart(s,r.delay,r.time);s(u)}}));r.state=xr;r.on.call("start",t,t.__data__,r.index,r.group);if(r.state!==xr)return;r.state=Cr;e=new Array(h=r.tween.length);for(c=0,a=-1;c<h;++c){if(l=r.tween[c].value.call(t,t.__data__,r.index,r.group)){e[++a]=l}}e.length=a+1}function s(n){var i=n<r.duration?r.ease.call(null,n/r.duration):(r.timer.restart(f),r.state=zr,1),u=-1,o=e.length;while(++u<o){e[u].call(t,i)}if(r.state===zr){r.on.call("end",t,t.__data__,r.index,r.group);f()}}function f(){r.state=jr;r.timer.stop();delete i[n];for(var e in i)return;delete t.__transition}}function Lr(t,n){var r=t.__transition,i,e,u=true,o;if(!r)return;n=n==null?null:n+"";for(o in r){if((i=r[o]).name!==n){u=false;continue}e=i.state>xr&&i.state<zr;i.state=jr;i.timer.stop();i.on.call(e?"interrupt":"cancel",t,t.__data__,i.index,i.group);delete r[o]}if(u)delete t.__transition}function Tr(t){return this.each((function(){Lr(this,t)}))}function Fr(t,n){var r,i;return function(){var e=$r(this,t),u=e.tween;if(u!==r){i=r=u;for(var o=0,s=i.length;o<s;++o){if(i[o].name===n){i=i.slice();i.splice(o,1);break}}}e.tween=i}}function Nr(t,n,r){var i,e;if(typeof r!=="function")throw new Error;return function(){var u=$r(this,t),o=u.tween;if(o!==i){e=(i=o).slice();for(var s={name:n,value:r},f=0,c=e.length;f<c;++f){if(e[f].name===n){e[f]=s;break}}if(f===c)e.push(s)}u.tween=e}}function Gr(t,n){var r=this._id;t+="";if(arguments.length<2){var i=_r(this.node(),r).tween;for(var e=0,u=i.length,o;e<u;++e){if((o=i[e]).name===t){return o.value}}return null}return this.each((n==null?Fr:Nr)(r,t,n))}function Br(t,n,r){var i=t._id;t.each((function(){var t=$r(this,i);(t.value||(t.value={}))[n]=r.apply(this,arguments)}));return function(t){return _r(t,i).value[n]}}function Ir(t,n){var r;return(typeof n==="number"?h:n instanceof l?v:(r=l(n))?(n=r,v):d)(t,n)}function Xr(t){return function(){this.removeAttribute(t)}}function Yr(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ur(t,n,r){var i,e=r+"",u;return function(){var o=this.getAttribute(t);return o===e?null:o===i?u:u=n(i=o,r)}}function Or(t,n,r){var i,e=r+"",u;return function(){var o=this.getAttributeNS(t.space,t.local);return o===e?null:o===i?u:u=n(i=o,r)}}function qr(t,n,r){var i,e,u;return function(){var o,s=r(this),f;if(s==null)return void this.removeAttribute(t);o=this.getAttribute(t);f=s+"";return o===f?null:o===i&&f===e?u:(e=f,u=n(i=o,s))}}function Hr(t,n,r){var i,e,u;return function(){var o,s=r(this),f;if(s==null)return void this.removeAttributeNS(t.space,t.local);o=this.getAttributeNS(t.space,t.local);f=s+"";return o===f?null:o===i&&f===e?u:(e=f,u=n(i=o,s))}}function Pr(t,n){var r=R(t),i=r==="transform"?p:Ir;return this.attrTween(t,typeof n==="function"?(r.local?Hr:qr)(r,i,Br(this,"attr."+t,n)):n==null?(r.local?Yr:Xr)(r):(r.local?Or:Ur)(r,i,n))}function Vr(t,n){return function(r){this.setAttribute(t,n.call(this,r))}}function Wr(t,n){return function(r){this.setAttributeNS(t.space,t.local,n.call(this,r))}}function Dr(t,n){var r,i;function e(){var e=n.apply(this,arguments);if(e!==i)r=(i=e)&&Wr(t,e);return r}e._value=n;return e}function Rr(t,n){var r,i;function e(){var e=n.apply(this,arguments);if(e!==i)r=(i=e)&&Vr(t,e);return r}e._value=n;return e}function Zr(t,n){var r="attr."+t;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(n==null)return this.tween(r,null);if(typeof n!=="function")throw new Error;var i=R(t);return this.tween(r,(i.local?Dr:Rr)(i,n))}function Jr(t,n){return function(){Mr(this,t).delay=+n.apply(this,arguments)}}function Kr(t,n){return n=+n,function(){Mr(this,t).delay=n}}function Qr(t){var n=this._id;return arguments.length?this.each((typeof t==="function"?Jr:Kr)(n,t)):_r(this.node(),n).delay}function ti(t,n){return function(){$r(this,t).duration=+n.apply(this,arguments)}}function ni(t,n){return n=+n,function(){$r(this,t).duration=n}}function ri(t){var n=this._id;return arguments.length?this.each((typeof t==="function"?ti:ni)(n,t)):_r(this.node(),n).duration}function ii(t,n){if(typeof n!=="function")throw new Error;return function(){$r(this,t).ease=n}}function ei(t){var n=this._id;return arguments.length?this.each(ii(n,t)):_r(this.node(),n).ease}function ui(t,n){return function(){var r=n.apply(this,arguments);if(typeof r!=="function")throw new Error;$r(this,t).ease=r}}function oi(t){if(typeof t!=="function")throw new Error;return this.each(ui(this._id,t))}function si(t){if(typeof t!=="function")t=st(t);for(var n=this._groups,r=n.length,i=new Array(r),e=0;e<r;++e){for(var u=n[e],o=u.length,s=i[e]=[],f,c=0;c<o;++c){if((f=u[c])&&t.call(f,f.__data__,c,u)){s.push(f)}}}return new Gi(i,this._parents,this._name,this._id)}function fi(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,r=t._groups,i=n.length,e=r.length,u=Math.min(i,e),o=new Array(i),s=0;s<u;++s){for(var f=n[s],c=r[s],a=f.length,h=o[s]=new Array(a),l,v=0;v<a;++v){if(l=f[v]||c[v]){h[v]=l}}}for(;s<i;++s){o[s]=n[s]}return new Gi(o,this._parents,this._name,this._id)}function ci(t){return(t+"").trim().split(/^|\s+/).every((function(t){var n=t.indexOf(".");if(n>=0)t=t.slice(0,n);return!t||t==="start"}))}function ai(t,n,r){var i,e,u=ci(n)?Mr:$r;return function(){var o=u(this,t),s=o.on;if(s!==i)(e=(i=s).copy()).on(n,r);o.on=e}}function hi(t,n){var r=this._id;return arguments.length<2?_r(this.node(),r).on.on(t):this.each(ai(r,t,n))}function li(t){return function(){var n=this.parentNode;for(var r in this.__transition)if(+r!==t)return;if(n)n.removeChild(this)}}function vi(){return this.on("end.remove",li(this._id))}function di(t){var n=this._name,r=this._id;if(typeof t!=="function")t=tt(t);for(var i=this._groups,e=i.length,u=new Array(e),o=0;o<e;++o){for(var s=i[o],f=s.length,c=u[o]=new Array(f),a,h,l=0;l<f;++l){if((a=s[l])&&(h=t.call(a,a.__data__,l,s))){if("__data__"in a)h.__data__=a.__data__;c[l]=h;Er(c[l],n,r,l,c,_r(a,r))}}}return new Gi(u,this._parents,n,r)}function pi(t){var n=this._name,r=this._id;if(typeof t!=="function")t=et(t);for(var i=this._groups,e=i.length,u=[],o=[],s=0;s<e;++s){for(var f=i[s],c=f.length,a,h=0;h<c;++h){if(a=f[h]){for(var l=t.call(a,a.__data__,h,f),v,d=_r(a,r),p=0,y=l.length;p<y;++p){if(v=l[p]){Er(v,n,r,p,l,d)}}u.push(l);o.push(a)}}}return new Gi(u,o,n,r)}var yi=Pn.prototype.constructor;function gi(){return new yi(this._groups,this._parents)}function mi(t,n){var r,i,e;return function(){var u=Jt(this,t),o=(this.style.removeProperty(t),Jt(this,t));return u===o?null:u===r&&o===i?e:e=n(r=u,i=o)}}function wi(t){return function(){this.style.removeProperty(t)}}function bi(t,n,r){var i,e=r+"",u;return function(){var o=Jt(this,t);return o===e?null:o===i?u:u=n(i=o,r)}}function ki(t,n,r){var i,e,u;return function(){var o=Jt(this,t),s=r(this),f=s+"";if(s==null)f=s=(this.style.removeProperty(t),Jt(this,t));return o===f?null:o===i&&f===e?u:(e=f,u=n(i=o,s))}}function xi(t,n){var r,i,e,u="style."+n,o="end."+u,s;return function(){var f=$r(this,t),c=f.on,a=f.value[u]==null?s||(s=wi(n)):undefined;if(c!==r||e!==a)(i=(r=c).copy()).on(o,e=a);f.on=i}}function Ci(t,n,r){var i=(t+="")==="transform"?y:Ir;return n==null?this.styleTween(t,mi(t,i)).on("end.style."+t,wi(t)):typeof n==="function"?this.styleTween(t,ki(t,i,Br(this,"style."+t,n))).each(xi(this._id,t)):this.styleTween(t,bi(t,i,n),r).on("end.style."+t,null)}function Ai(t,n,r){return function(i){this.style.setProperty(t,n.call(this,i),r)}}function zi(t,n,r){var i,e;function u(){var u=n.apply(this,arguments);if(u!==e)i=(e=u)&&Ai(t,u,r);return i}u._value=n;return u}function ji(t,n,r){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(n==null)return this.tween(i,null);if(typeof n!=="function")throw new Error;return this.tween(i,zi(t,n,r==null?"":r))}function Ei(t){return function(){this.textContent=t}}function Mi(t){return function(){var n=t(this);this.textContent=n==null?"":n}}function $i(t){return this.tween("text",typeof t==="function"?Mi(Br(this,"text",t)):Ei(t==null?"":t+""))}function _i(t){return function(n){this.textContent=t.call(this,n)}}function Si(t){var n,r;function i(){var i=t.apply(this,arguments);if(i!==r)n=(r=i)&&_i(i);return n}i._value=t;return i}function Li(t){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!=="function")throw new Error;return this.tween(n,Si(t))}function Ti(){var t=this._name,n=this._id,r=Bi();for(var i=this._groups,e=i.length,u=0;u<e;++u){for(var o=i[u],s=o.length,f,c=0;c<s;++c){if(f=o[c]){var a=_r(f,n);Er(f,t,r,c,o,{time:a.time+a.delay+a.duration,delay:0,duration:a.duration,ease:a.ease})}}}return new Gi(i,this._parents,t,r)}function Fi(){var t,n,r=this,i=r._id,e=r.size();return new Promise((function(u,o){var s={value:o},f={value:function(){if(--e===0)u()}};r.each((function(){var r=$r(this,i),e=r.on;if(e!==t){n=(t=e).copy();n._.cancel.push(s);n._.interrupt.push(s);n._.end.push(f)}r.on=n}));if(e===0)u()}))}var Ni=0;function Gi(t,n,r,i){this._groups=t;this._parents=n;this._name=r;this._id=i}function Bi(){return++Ni}var Ii=Pn.prototype;Gi.prototype={constructor:Gi,select:di,selectAll:pi,selectChild:Ii.selectChild,selectChildren:Ii.selectChildren,filter:si,merge:fi,selection:gi,transition:Ti,call:Ii.call,nodes:Ii.nodes,node:Ii.node,size:Ii.size,empty:Ii.empty,each:Ii.each,on:hi,attr:Pr,attrTween:Zr,style:Ci,styleTween:ji,text:$i,textTween:Li,remove:vi,tween:Gr,delay:Qr,duration:ri,ease:ei,easeVarying:oi,end:Fi,[Symbol.iterator]:Ii[Symbol.iterator]};function Xi(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Yi={time:null,delay:0,duration:250,ease:Xi};function Ui(t,n){var r;while(!(r=t.__transition)||!(r=r[n])){if(!(t=t.parentNode)){throw new Error(`transition ${n} not found`)}}return r}function Oi(t){var n,r;if(t instanceof Gi){n=t._id,t=t._name}else{n=Bi(),(r=Yi).time=g(),t=t==null?null:t+""}for(var i=this._groups,e=i.length,u=0;u<e;++u){for(var o=i[u],s=o.length,f,c=0;c<s;++c){if(f=o[c]){Er(f,t,n,c,o,r||Ui(f,n))}}}return new Gi(i,this._parents,t,n)}Pn.prototype.interrupt=Tr;Pn.prototype.transition=Oi;const qi=t=>()=>t;function Hi(t,{sourceEvent:n,target:r,transform:i,dispatch:e}){Object.defineProperties(this,{type:{value:t,enumerable:true,configurable:true},sourceEvent:{value:n,enumerable:true,configurable:true},target:{value:r,enumerable:true,configurable:true},transform:{value:i,enumerable:true,configurable:true},_:{value:e}})}function Pi(t,n,r){this.k=t;this.x=n;this.y=r}Pi.prototype={constructor:Pi,scale:function(t){return t===1?this:new Pi(this.k*t,this.x,this.y)},translate:function(t,n){return t===0&n===0?this:new Pi(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Vi=new Pi(1,0,0);function Wi(t){t.stopImmediatePropagation()}function Di(t){t.preventDefault();t.stopImmediatePropagation()}function Ri(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Zi(){var t=this;if(t instanceof SVGElement){t=t.ownerSVGElement||t;if(t.hasAttribute("viewBox")){t=t.viewBox.baseVal;return[[t.x,t.y],[t.x+t.width,t.y+t.height]]}return[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}return[[0,0],[t.clientWidth,t.clientHeight]]}function Ji(){return this.__zoom||Vi}function Ki(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Qi(){return navigator.maxTouchPoints||"ontouchstart"in this}function te(t,n,r){var i=t.invertX(n[0][0])-r[0][0],e=t.invertX(n[1][0])-r[1][0],u=t.invertY(n[0][1])-r[0][1],o=t.invertY(n[1][1])-r[1][1];return t.translate(e>i?(i+e)/2:Math.min(0,i)||Math.max(0,e),o>u?(u+o)/2:Math.min(0,u)||Math.max(0,o))}function ne(){var t=Ri,n=Zi,r=te,i=Ki,e=Qi,u=[0,Infinity],o=[[-Infinity,-Infinity],[Infinity,Infinity]],s=250,f=m,a=c("start","zoom","end"),h,l,v,d=500,p=150,y=0,g=10;function w(t){t.property("__zoom",Ji).on("wheel.zoom",j,{passive:false}).on("mousedown.zoom",E).on("dblclick.zoom",M).filter(e).on("touchstart.zoom",$).on("touchmove.zoom",_).on("touchend.zoom touchcancel.zoom",S).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}w.transform=function(t,n,r,i){var e=t.selection?t.selection():t;e.property("__zoom",Ji);if(t!==e){C(t,n,r,i)}else{e.interrupt().each((function(){A(this,arguments).event(i).start().zoom(null,typeof n==="function"?n.apply(this,arguments):n).end()}))}};w.scaleBy=function(t,n,r,i){w.scaleTo(t,(function(){var t=this.__zoom.k,r=typeof n==="function"?n.apply(this,arguments):n;return t*r}),r,i)};w.scaleTo=function(t,i,e,u){w.transform(t,(function(){var t=n.apply(this,arguments),u=this.__zoom,s=e==null?x(t):typeof e==="function"?e.apply(this,arguments):e,f=u.invert(s),c=typeof i==="function"?i.apply(this,arguments):i;return r(k(b(u,c),s,f),t,o)}),e,u)};w.translateBy=function(t,i,e,u){w.transform(t,(function(){return r(this.__zoom.translate(typeof i==="function"?i.apply(this,arguments):i,typeof e==="function"?e.apply(this,arguments):e),n.apply(this,arguments),o)}),null,u)};w.translateTo=function(t,i,e,u,s){w.transform(t,(function(){var t=n.apply(this,arguments),s=this.__zoom,f=u==null?x(t):typeof u==="function"?u.apply(this,arguments):u;return r(Vi.translate(f[0],f[1]).scale(s.k).translate(typeof i==="function"?-i.apply(this,arguments):-i,typeof e==="function"?-e.apply(this,arguments):-e),t,o)}),u,s)};function b(t,n){n=Math.max(u[0],Math.min(u[1],n));return n===t.k?t:new Pi(n,t.x,t.y)}function k(t,n,r){var i=n[0]-r[0]*t.k,e=n[1]-r[1]*t.k;return i===t.x&&e===t.y?t:new Pi(t.k,i,e)}function x(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function C(t,r,i,e){t.on("start.zoom",(function(){A(this,arguments).event(e).start()})).on("interrupt.zoom end.zoom",(function(){A(this,arguments).event(e).end()})).tween("zoom",(function(){var t=this,u=arguments,o=A(t,u).event(e),s=n.apply(t,u),c=i==null?x(s):typeof i==="function"?i.apply(t,u):i,a=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),h=t.__zoom,l=typeof r==="function"?r.apply(t,u):r,v=f(h.invert(c).concat(a/h.k),l.invert(c).concat(a/l.k));return function(t){if(t===1)t=l;else{var n=v(t),r=a/n[2];t=new Pi(r,c[0]-n[0]*r,c[1]-n[1]*r)}o.zoom(null,t)}}))}function A(t,n,r){return!r&&t.__zooming||new z(t,n)}function z(t,r){this.that=t;this.args=r;this.active=0;this.sourceEvent=null;this.extent=n.apply(t,r);this.taps=0}z.prototype={event:function(t){if(t)this.sourceEvent=t;return this},start:function(){if(++this.active===1){this.that.__zooming=this;this.emit("start")}return this},zoom:function(t,n){if(this.mouse&&t!=="mouse")this.mouse[1]=n.invert(this.mouse[0]);if(this.touch0&&t!=="touch")this.touch0[1]=n.invert(this.touch0[0]);if(this.touch1&&t!=="touch")this.touch1[1]=n.invert(this.touch1[0]);this.that.__zoom=n;this.emit("zoom");return this},end:function(){if(--this.active===0){delete this.that.__zooming;this.emit("end")}return this},emit:function(t){var n=Wn(this.that).datum();a.call(t,this.that,new Hi(t,{sourceEvent:this.sourceEvent,target:w,type:t,transform:this.that.__zoom,dispatch:a}),n)}};function j(n,...e){if(!t.apply(this,arguments))return;var s=A(this,e).event(n),f=this.__zoom,c=Math.max(u[0],Math.min(u[1],f.k*Math.pow(2,i.apply(this,arguments)))),a=Rn(n);if(s.wheel){if(s.mouse[0][0]!==a[0]||s.mouse[0][1]!==a[1]){s.mouse[1]=f.invert(s.mouse[0]=a)}clearTimeout(s.wheel)}else if(f.k===c)return;else{s.mouse=[a,f.invert(a)];Lr(this);s.start()}Di(n);s.wheel=setTimeout(h,p);s.zoom("mouse",r(k(b(f,c),s.mouse[0],s.mouse[1]),s.extent,o));function h(){s.wheel=null;s.end()}}function E(n,...i){if(v||!t.apply(this,arguments))return;var e=n.currentTarget,u=A(this,i,true).event(n),s=Wn(n.view).on("mousemove.zoom",h,true).on("mouseup.zoom",l,true),f=Rn(n,e),c=n.clientX,a=n.clientY;tr(n.view);Wi(n);u.mouse=[f,this.__zoom.invert(f)];Lr(this);u.start();function h(t){Di(t);if(!u.moved){var n=t.clientX-c,i=t.clientY-a;u.moved=n*n+i*i>y}u.event(t).zoom("mouse",r(k(u.that.__zoom,u.mouse[0]=Rn(t,e),u.mouse[1]),u.extent,o))}function l(t){s.on("mousemove.zoom mouseup.zoom",null);nr(t.view,u.moved);Di(t);u.event(t).end()}}function M(i,...e){if(!t.apply(this,arguments))return;var u=this.__zoom,f=Rn(i.changedTouches?i.changedTouches[0]:i,this),c=u.invert(f),a=u.k*(i.shiftKey?.5:2),h=r(k(b(u,a),f,c),n.apply(this,e),o);Di(i);if(s>0)Wn(this).transition().duration(s).call(C,h,f,i);else Wn(this).call(w.transform,h,f,i)}function $(n,...r){if(!t.apply(this,arguments))return;var i=n.touches,e=i.length,u=A(this,r,n.changedTouches.length===e).event(n),o,s,f,c;Wi(n);for(s=0;s<e;++s){f=i[s],c=Rn(f,this);c=[c,this.__zoom.invert(c),f.identifier];if(!u.touch0)u.touch0=c,o=true,u.taps=1+!!h;else if(!u.touch1&&u.touch0[2]!==c[2])u.touch1=c,u.taps=0}if(h)h=clearTimeout(h);if(o){if(u.taps<2)l=c[0],h=setTimeout((function(){h=null}),d);Lr(this);u.start()}}function _(t,...n){if(!this.__zooming)return;var i=A(this,n).event(t),e=t.changedTouches,u=e.length,s,f,c,a;Di(t);for(s=0;s<u;++s){f=e[s],c=Rn(f,this);if(i.touch0&&i.touch0[2]===f.identifier)i.touch0[0]=c;else if(i.touch1&&i.touch1[2]===f.identifier)i.touch1[0]=c}f=i.that.__zoom;if(i.touch1){var h=i.touch0[0],l=i.touch0[1],v=i.touch1[0],d=i.touch1[1],p=(p=v[0]-h[0])*p+(p=v[1]-h[1])*p,y=(y=d[0]-l[0])*y+(y=d[1]-l[1])*y;f=b(f,Math.sqrt(p/y));c=[(h[0]+v[0])/2,(h[1]+v[1])/2];a=[(l[0]+d[0])/2,(l[1]+d[1])/2]}else if(i.touch0)c=i.touch0[0],a=i.touch0[1];else return;i.zoom("touch",r(k(f,c,a),i.extent,o))}function S(t,...n){if(!this.__zooming)return;var r=A(this,n).event(t),i=t.changedTouches,e=i.length,u,o;Wi(t);if(v)clearTimeout(v);v=setTimeout((function(){v=null}),d);for(u=0;u<e;++u){o=i[u];if(r.touch0&&r.touch0[2]===o.identifier)delete r.touch0;else if(r.touch1&&r.touch1[2]===o.identifier)delete r.touch1}if(r.touch1&&!r.touch0)r.touch0=r.touch1,delete r.touch1;if(r.touch0)r.touch0[1]=this.__zoom.invert(r.touch0[0]);else{r.end();if(r.taps===2){o=Rn(o,this);if(Math.hypot(l[0]-o[0],l[1]-o[1])<g){var s=Wn(this).on("dblclick.zoom");if(s)s.apply(this,arguments)}}}}w.wheelDelta=function(t){return arguments.length?(i=typeof t==="function"?t:qi(+t),w):i};w.filter=function(n){return arguments.length?(t=typeof n==="function"?n:qi(!!n),w):t};w.touchable=function(t){return arguments.length?(e=typeof t==="function"?t:qi(!!t),w):e};w.extent=function(t){return arguments.length?(n=typeof t==="function"?t:qi([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),w):n};w.scaleExtent=function(t){return arguments.length?(u[0]=+t[0],u[1]=+t[1],w):[u[0],u[1]]};w.translateExtent=function(t){return arguments.length?(o[0][0]=+t[0][0],o[1][0]=+t[1][0],o[0][1]=+t[0][1],o[1][1]=+t[1][1],w):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]};w.constrain=function(t){return arguments.length?(r=t,w):r};w.duration=function(t){return arguments.length?(s=+t,w):s};w.interpolate=function(t){return arguments.length?(f=t,w):f};w.on=function(){var t=a.on.apply(a,arguments);return t===a?w:t};w.clickDistance=function(t){return arguments.length?(y=(t=+t)*t,w):Math.sqrt(y)};w.tapDistance=function(t){return arguments.length?(g=+t,w):g};return w}const re=t=>{const n=t.getBoundingClientRect();const r=n.height>=120?n.height:600;const i=n.width>=100?n.width:600;const e=Wn(t).append("svg").attr("viewBox",[-i/2,-r/2,i,r].join(" "));const u=e.append("g");const o=ne().on("zoom",(({transform:t})=>{u.attr("transform",t)}));e.call(o);e.append("svg:defs").selectAll("marker").data(["end"]).enter().append("svg:marker").attr("id",String).attr("viewBox","0 -6 12 12").attr("refX",24).attr("refY",0).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto").append("svg:path").attr("d","M0,-6L12,0L0,6");return{height:r,width:i,svg:u}};const ie=t=>{var n;if(typeof t==="number"){return t}else if(typeof t==="string"){return Number.parseInt(t,10)}return(n=t.x)!==null&&n!==void 0?n:0};const ee=t=>{var n;if(typeof t==="number"){return t}else if(typeof t==="string"){return Number.parseInt(t,10)}return(n=t.y)!==null&&n!==void 0?n:0};const ue=t=>{switch(t.type){case"Module":{return`${t.language} ${t.name}`}case"Source":{return`${t.type} ${t.name}`}case"Symbol":{return`${t.kind} ${t.name}`}case"Node":{return t.kind}case"File":{return t.path}case"Url":{return t.url}}};const oe=t=>{switch(t.type){case"Assign":case"Read":case"Use":{return`${t.type}s`}case"Convert":case"Import":{return`${t.type}s${t.auto?" (auto)":""}`}default:{return`${t.type}s`}}};const se=(t,n=512)=>{switch(t.type){case"Node":{return w(Y,n)}case"Symbol":{return w(L,n)}case"Source":{return w(I,n)}case"File":{return w(P,n)}case"Url":{return w(T,n)}case"Module":default:{return w(b,n)}}};const fe=":host,stencila-project-graph,.projectGraph{display:block;height:100%;width:100%;--graph-background:#fff;--graphColor-text:var(--color-key, #000);--graphColor-link:var(--color-neutral-100);--graphColor-default:var(--color-neutral-300);--graphColor-file:#ffec6f;--graphColor-source:#ccebc5;--graphColor-symbol:#bc80bd;--graphColor-module:#d9d9d9;--graphColor-node:#fccde5;--graphColor-url:#80b1d3;--graphColor-file:#b3de69;--graphColor-file:#fdb462;--graphColor-file:#fb7f72;--graphColor-file:#bebada}.hullContainer path{fill:var(--graphColor-file);opacity:0.2}.linkContainer line{stroke:var(--graphColor-link);stroke-width:2}.groupLinkContainer text,.groupLinkContainer line{opacity:0}.groupLinkContainer line{stroke:var(--graphColor-symbol)}.projectGraph:hover .groupLinkContainer text,.projectGraph:hover .groupLinkContainer line{opacity:1}.linkContainer text{font-size:0.5rem}svg{cursor:move;height:100%;width:100%}svg text{fill:var(--color-key);font-size:0.75rem;font-family:var(--font-family-mono);text-anchor:middle}svg text.textBackdrop{stroke:var(--graph-background);stroke-width:2px}svg circle,svg path{fill:var(--graphColor-default)}svg g{cursor:-webkit-grab;cursor:grab}svg g:active{cursor:-webkit-grabbing;cursor:grabbing}svg g.File text,svg g.Source text{font-size:1rem;font-weight:bold}svg path.File{fill:var(--graphColor-file)}svg path.Source{stroke:var(--graphColor-source);stroke-width:1}svg path.Symbol{fill:var(--graphColor-symbol)}svg path.Module{fill:var(--graphColor-module)}svg path.Node{fill:var(--graphColor-node)}svg path.Url{fill:var(--graphColor-url)}";const ce="";const ae=class{constructor(n){t(this,n);this.drawGraph=t=>{var n,r,i;const{svg:e}=this.graphRef;const u=yr(t);const o=k(u.nodes).force("link",x(u.links).strength((t=>gr(t.source,t.target)||dr(t.source)&&t.source.kind==="Link"||dr(t.target)&&t.target.kind==="Link"?1:.375)).iterations(2).distance((t=>dr(t.source)&&t.source.kind==="Link"||dr(t.target)&&t.target.kind==="Link"?0:30)).iterations(2)).force("link:groups",x(u.groupLinks).strength((t=>dr(t.source)&&t.source.kind==="Link"||dr(t.target)&&t.target.kind==="Link"?1:.375)).iterations(3)).force("charge",C().strength((t=>t.type==="File"?-100:-1500)).distanceMin(10).distanceMax(1500)).force("collision",A(64).strength(1).iterations(4)).force("x",z().strength(.02)).force("y",j().strength(.02)).force("center",E()).velocityDecay(.4).alphaDecay(.05);const s=(t,n)=>{delete n.fx;delete n.fy;o.alpha(.5).restart()};const f=fr().on("drag",((t,n)=>{n.fx=t.x;n.fy=t.y;o.alpha(.05).restart()}));const c=(n=this.hullContainer)!==null&&n!==void 0?n:e.append("g").attr("class","hullContainer");if(!this.hullContainer){this.hullContainer=c}const a=(r=this.linkContainer)!==null&&r!==void 0?r:e.append("g").attr("class","linkContainer");if(!this.linkContainer){this.linkContainer=a}const h=a.selectAll("g").data(u.links).join((t=>{const n=t.append("g");n.append("line").attr("marker-end","url(#end)");n.append("text").text((t=>oe(t.relation)));return n}));const l=(i=this.nodeContainer)!==null&&i!==void 0?i:e.append("g");if(!this.nodeContainer){this.nodeContainer=l}const v=t=>{var n;if(t===undefined||typeof t==="string"||typeof t==="number"){return""}const r=32;const i=u.groupLinks.filter((n=>n.group===t.path));const e=i.length===0?[]:[[-r,-r],[r,-r],[r,r],[0,r]];const o=ie(t);const s=ee(t);const f=lr(i.reduce(((t,n)=>{const i=ie(n.source);const e=ee(n.source);return[...t,[i-o-r,e-s-r],[i-o-r,e-s+r],[i-o+r,e-s-r],[i-o+r,e-s+r]]}),e));return f?(n=M().curve($)(f))!==null&&n!==void 0?n:"":""};const d=c.selectAll("path").data(u.groups).join("path").attr("d",(t=>{var n;return(n=v(t))!==null&&n!==void 0?n:""}));const p=l.selectAll("g").data(u.nodes).join((t=>{const n=t.append("g");n.append("path").attr("d",(t=>se(t)(t.type==="File"?1024:512))).attr("class",(t=>dr(t)?`${t.type} ${t.kind}`:t.type));n.append("text").attr("class","textBackdrop").attr("dy",".35em").text(ue).append("text").exit();n.append("text").attr("dy",".35em").text(ue).exit();n.append("title").text((t=>t.type));return n})).attr("class",(t=>dr(t)?`${t.type} ${t.kind}`:t.type)).on("click",s).call(f);o.on("tick",(()=>{h.select("line").attr("x1",(({source:t})=>{var n;return typeof t==="object"?(n=t.x)!==null&&n!==void 0?n:0:t})).attr("y1",(({source:t})=>{var n;return typeof t==="object"?(n=t.y)!==null&&n!==void 0?n:0:t})).attr("x2",(({target:t})=>{var n;return typeof t==="object"?(n=t.x)!==null&&n!==void 0?n:0:t})).attr("y2",(({target:t})=>{var n;return typeof t==="object"?(n=t.y)!==null&&n!==void 0?n:0:t}));h.select("text").attr("transform",(t=>{if(typeof t.source==="object"&&typeof t.source.y==="number"&&typeof t.source.x==="number"&&typeof t.target==="object"&&typeof t.target.y==="number"&&typeof t.target.x==="number"){return`translate(${t.source.x-(t.source.x-t.target.x)/2}, ${t.source.y-(t.source.y-t.target.y)/2})`}return""}));p.attr("transform",(({x:t,y:n})=>`translate(${t!==null&&t!==void 0?t:0}, ${n!==null&&n!==void 0?n:0})`));d.attr("transform",(t=>{var n,r;return`translate(${(n=t.x)!==null&&n!==void 0?n:0}, ${(r=t.y)!==null&&r!==void 0?r:0})`})).attr("d",(t=>{var n;return(n=v(t))!==null&&n!==void 0?n:""}))}))}}updateGraph(t){this.drawGraph(t)}componentDidLoad(){if(this.el){this.graphRef=re(this.el);this.drawGraph(this.graph)}}render(){return n(r,null,n("div",{ref:t=>this.el=t,class:"projectGraph"}))}static get watchers(){return{graph:["updateGraph"]}}};ae.style={default:fe,material:ce};export{ae as stencila_project_graph};
//# sourceMappingURL=p-a54eddc3.entry.js.map