var __awaiter=this&&this.__awaiter||function(e,t,a,o){function r(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,n){function i(e){try{l(o.next(e))}catch(t){n(t)}}function c(e){try{l(o["throw"](e))}catch(t){n(t)}}function l(e){e.done?a(e.value):r(e.value).then(i,c)}l((o=o.apply(e,t||[])).next())}))};var __generator=this&&this.__generator||function(e,t){var a={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},o,r,n,i;return i={next:c(0),throw:c(1),return:c(2)},typeof Symbol==="function"&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return l([e,t])}}function l(i){if(o)throw new TypeError("Generator is already executing.");while(a)try{if(o=1,r&&(n=i[0]&2?r["return"]:i[0]?r["throw"]||((n=r["return"])&&n.call(r),0):r.next)&&!(n=n.call(r,i[1])).done)return n;if(r=0,n)i=[i[0]&2,n.value];switch(i[0]){case 0:case 1:n=i;break;case 4:a.label++;return{value:i[1],done:false};case 5:a.label++;r=i[1];i=[0];continue;case 7:i=a.ops.pop();a.trys.pop();continue;default:if(!(n=a.trys,n=n.length>0&&n[n.length-1])&&(i[0]===6||i[0]===2)){a=0;continue}if(i[0]===3&&(!n||i[1]>n[0]&&i[1]<n[3])){a.label=i[1];break}if(i[0]===6&&a.label<n[1]){a.label=n[1];n=i;break}if(n&&a.label<n[2]){a.label=n[2];a.ops.push(i);break}if(n[2])a.ops.pop();a.trys.pop();continue}i=t.call(e,a)}catch(c){i=[6,c];r=0}finally{o=n=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:true}}};import{r as registerInstance,f as createEvent,h,e as Host,c as getElement}from"./index-2305c23c.js";import{L as LanguagePickerInline}from"./languageSelect-0bd074f6.js";import{f as fileFormatMap,a as lookupFormat}from"./languageUtils-2c49a4c4.js";var defaultCodeFragmentCss=".sc-stencila-code-fragment-default-h,stencila-code-fragment.sc-stencila-code-fragment-default{--background:var(--color-stock,#fff);--background-buttons:var(--color-neutral-50,#edf2f7);--border:var(--color-neutral-100,#e2e8f0);background-color:var(--background);border-color:var(--border);border-radius:.25rem;border-style:solid;border-width:1px;color:#4a4a4a;color:var(--color-key,#4a4a4a);display:-ms-inline-flexbox;display:inline-flex;font-size:.875rem;line-height:1.25rem;line-height:1;padding:0;vertical-align:text-bottom;white-space:nowrap}.sc-stencila-code-fragment-default-h .actionsSecondary.sc-stencila-code-fragment-default,stencila-code-fragment.sc-stencila-code-fragment-default .actionsSecondary.sc-stencila-code-fragment-default{background-color:var(--background-buttons);cursor:default;display:inline-block;overflow:hidden;-webkit-transition-duration:.15s;transition-duration:.15s;-webkit-transition-property:color,background-color,border-color,fill,stroke,opacity,-webkit-text-decoration-color,-webkit-box-shadow,-webkit-transform,-webkit-filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,fill,stroke,opacity,-webkit-text-decoration-color,-webkit-box-shadow,-webkit-transform,-webkit-filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-text-decoration-color,-webkit-box-shadow,-webkit-transform,-webkit-filter,-webkit-backdrop-filter;-webkit-transition-timing-function:cubic-bezier(.4,0,.2,1);transition-timing-function:cubic-bezier(.4,0,.2,1);-webkit-transition-timing-function:cubic-bezier(0,0,.2,1);transition-timing-function:cubic-bezier(0,0,.2,1);width:0}.hover.sc-stencila-code-fragment-default-h .actionsSecondary.sc-stencila-code-fragment-default,.sc-stencila-code-fragment-default-h:focus .actionsSecondary.sc-stencila-code-fragment-default,.sc-stencila-code-fragment-default-h:focus-within .actionsSecondary.sc-stencila-code-fragment-default,.sc-stencila-code-fragment-default-h:hover .actionsSecondary.sc-stencila-code-fragment-default,stencila-code-fragment.hover.sc-stencila-code-fragment-default .actionsSecondary.sc-stencila-code-fragment-default,stencila-code-fragment.sc-stencila-code-fragment-default:focus .actionsSecondary.sc-stencila-code-fragment-default,stencila-code-fragment.sc-stencila-code-fragment-default:focus-within .actionsSecondary.sc-stencila-code-fragment-default,stencila-code-fragment.sc-stencila-code-fragment-default:hover .actionsSecondary.sc-stencila-code-fragment-default{display:-ms-inline-flexbox;display:inline-flex;max-width:100%;width:1.25rem}.sc-stencila-code-fragment-default-h .text.sc-stencila-code-fragment-default,stencila-code-fragment.sc-stencila-code-fragment-default .text.sc-stencila-code-fragment-default{background-color:var(--background-editor);padding:.25rem}";var materialCodeFragmentCss=".sc-stencila-code-fragment-material-h,stencila-code-fragment.sc-stencila-code-fragment-material{--background:var(--color-stock,#fff);--background-buttons:var(--color-neutral-50,#edf2f7);--border:var(--color-neutral-100,#e2e8f0);background-color:var(--background);border-color:var(--border);border-radius:.25rem;border-style:solid;border-width:1px;color:#4a4a4a;color:var(--color-key,#4a4a4a);display:-ms-inline-flexbox;display:inline-flex;font-size:.875rem;line-height:1.25rem;line-height:1;padding:0;vertical-align:text-bottom;white-space:nowrap}.sc-stencila-code-fragment-material-h .actionsSecondary.sc-stencila-code-fragment-material,stencila-code-fragment.sc-stencila-code-fragment-material .actionsSecondary.sc-stencila-code-fragment-material{background-color:var(--background-buttons);cursor:default;display:inline-block;overflow:hidden;-webkit-transition-duration:.15s;transition-duration:.15s;-webkit-transition-property:color,background-color,border-color,fill,stroke,opacity,-webkit-text-decoration-color,-webkit-box-shadow,-webkit-transform,-webkit-filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,fill,stroke,opacity,-webkit-text-decoration-color,-webkit-box-shadow,-webkit-transform,-webkit-filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-text-decoration-color,-webkit-box-shadow,-webkit-transform,-webkit-filter,-webkit-backdrop-filter;-webkit-transition-timing-function:cubic-bezier(.4,0,.2,1);transition-timing-function:cubic-bezier(.4,0,.2,1);-webkit-transition-timing-function:cubic-bezier(0,0,.2,1);transition-timing-function:cubic-bezier(0,0,.2,1);width:0}.hover.sc-stencila-code-fragment-material-h .actionsSecondary.sc-stencila-code-fragment-material,.sc-stencila-code-fragment-material-h:focus .actionsSecondary.sc-stencila-code-fragment-material,.sc-stencila-code-fragment-material-h:focus-within .actionsSecondary.sc-stencila-code-fragment-material,.sc-stencila-code-fragment-material-h:hover .actionsSecondary.sc-stencila-code-fragment-material,stencila-code-fragment.hover.sc-stencila-code-fragment-material .actionsSecondary.sc-stencila-code-fragment-material,stencila-code-fragment.sc-stencila-code-fragment-material:focus .actionsSecondary.sc-stencila-code-fragment-material,stencila-code-fragment.sc-stencila-code-fragment-material:focus-within .actionsSecondary.sc-stencila-code-fragment-material,stencila-code-fragment.sc-stencila-code-fragment-material:hover .actionsSecondary.sc-stencila-code-fragment-material{display:-ms-inline-flexbox;display:inline-flex;max-width:100%;width:1.25rem}.sc-stencila-code-fragment-material-h .text.sc-stencila-code-fragment-material,stencila-code-fragment.sc-stencila-code-fragment-material .text.sc-stencila-code-fragment-material{background-color:var(--background-editor);padding:.25rem}";var CodeFragmentComponent=function(){function e(e){var t=this;registerInstance(this,e);this.languageChange=createEvent(this,"stencila-language-change",7);this.contentChange=createEvent(this,"stencila-content-change",7);var a,o;this.mode="read";this.languageCapabilities=fileFormatMap;this.executableLanguages=(o=(a=window.stencilaWebClient)===null||a===void 0?void 0:a.executableLanguages)!==null&&o!==void 0?o:{};this.onSelectLanguage=function(e){t.languageChange.emit(lookupFormat(e));t.programmingLanguage=e};this.contentChangeHandler=function(e){var a;var o=e.currentTarget;t.contentChange.emit((a=o.textContent)!==null&&a!==void 0?a:"")};this.selectTextSlot=function(){return t.el.querySelector(".text")}}e.prototype.onDiscoverExecutableLanguages=function(e){var t=e.detail;this.executableLanguages=t.languages};e.prototype.getTextContents=function(){return __awaiter(this,void 0,void 0,(function(){var e,t;return __generator(this,(function(a){t=this.selectTextSlot();return[2,Promise.resolve((e=t===null||t===void 0?void 0:t.textContent)!==null&&e!==void 0?e:"")]}))}))};e.prototype.render=function(){var e;return h(Host,{class:"text"},h("span",{class:"actionsSecondary"},h(LanguagePickerInline,{activeLanguage:(e=this.programmingLanguage)!==null&&e!==void 0?e:"",executableLanguages:this.executableLanguages,onSetLanguage:this.onSelectLanguage,languageCapabilities:this.languageCapabilities,disabled:this.mode==="read"})),h("span",{class:"text",contentEditable:this.mode==="edit",onInput:this.contentChangeHandler,role:"textbox"},h("slot",{name:"text"})))};Object.defineProperty(e.prototype,"el",{get:function(){return getElement(this)},enumerable:false,configurable:true});return e}();CodeFragmentComponent.style={default:defaultCodeFragmentCss,material:materialCodeFragmentCss};export{CodeFragmentComponent as stencila_code_fragment};
//# sourceMappingURL=stencila-code-fragment.entry.js.map