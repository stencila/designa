var __awaiter=this&&this.__awaiter||function(e,o,t,a){function r(e){return e instanceof t?e:new t((function(o){o(e)}))}return new(t||(t=Promise))((function(t,n){function l(e){try{i(a.next(e))}catch(o){n(o)}}function c(e){try{i(a["throw"](e))}catch(o){n(o)}}function i(e){e.done?t(e.value):r(e.value).then(l,c)}i((a=a.apply(e,o||[])).next())}))};var __generator=this&&this.__generator||function(e,o){var t={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},a,r,n,l;return l={next:c(0),throw:c(1),return:c(2)},typeof Symbol==="function"&&(l[Symbol.iterator]=function(){return this}),l;function c(e){return function(o){return i([e,o])}}function i(l){if(a)throw new TypeError("Generator is already executing.");while(t)try{if(a=1,r&&(n=l[0]&2?r["return"]:l[0]?r["throw"]||((n=r["return"])&&n.call(r),0):r.next)&&!(n=n.call(r,l[1])).done)return n;if(r=0,n)l=[l[0]&2,n.value];switch(l[0]){case 0:case 1:n=l;break;case 4:t.label++;return{value:l[1],done:false};case 5:t.label++;r=l[1];l=[0];continue;case 7:l=t.ops.pop();t.trys.pop();continue;default:if(!(n=t.trys,n=n.length>0&&n[n.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!n||l[1]>n[0]&&l[1]<n[3])){t.label=l[1];break}if(l[0]===6&&t.label<n[1]){t.label=n[1];n=l;break}if(n&&t.label<n[2]){t.label=n[2];t.ops.push(l);break}if(n[2])t.ops.pop();t.trys.pop();continue}l=o.call(e,t)}catch(c){l=[6,c];r=0}finally{a=n=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:true}}};import{r as registerInstance,h,e as Host}from"./index-2305c23c.js";import{u}from"./schema-3c9b003e.js";import{a as lookupFormat}from"./languageUtils-2c49a4c4.js";var defaultCodeBlockCss="*.sc-stencila-code-block-default,.sc-stencila-code-block-default:after,.sc-stencila-code-block-default:before{border:0 solid;-webkit-box-sizing:border-box;box-sizing:border-box}html.sc-stencila-code-block-default{font-size:16px}.hidden.sc-stencila-code-block-default{display:none}code.sc-stencila-code-block-default,code[class*=language-].sc-stencila-code-block-default,output.sc-stencila-code-block-default{font-family:monospace;font-family:var(--font-family-mono,monospace);font-size:75%}pre.sc-stencila-code-block-default{border:1px solid #cfd2e1;border-color:var(--color-neutral-100,#cfd2e1);border-radius:.25rem;margin:.5rem;overflow:auto;padding:.5rem}.preReset.sc-stencila-code-block-default{border-width:0;margin:0;padding:0}.sc-stencila-code-block-default-h,stencila-code-block.sc-stencila-code-block-default{--background-editor:var(--color-neutral-50,#edf2f7);--border:var(--color-neutral-100,#e2e8f0);border-color:var(--border);border-radius:.25rem;border-style:solid;border-width:1px;display:block;margin-bottom:1rem;margin-top:1rem;overflow:hidden;position:relative;width:100%}.sc-stencila-code-block-default-h>figure.sc-stencila-code-block-default,stencila-code-block.sc-stencila-code-block-default>figure.sc-stencila-code-block-default{margin:0;padding:0}.sc-stencila-code-block-default-h stencila-editor.sc-stencila-code-block-default,stencila-code-block.sc-stencila-code-block-default stencila-editor.sc-stencila-code-block-default{--border-width:0;-ms-flex-positive:1;flex-grow:1}.editorContainer.sc-stencila-code-block-default{background:var(--background-editor);border-color:var(--border);border-radius:0;border-width:0 0 1px;display:-ms-flexbox;display:flex;-ms-flex:1 1 auto;flex:1 1 auto;-ms-flex-direction:column;flex-direction:column;height:intrinsic;margin:0;position:relative}.editorContainer.sc-stencila-code-block-default pre.sc-stencila-code-block-default,.editorContainer.sc-stencila-code-block-default pre[class*=language-].sc-stencila-code-block-default{background-color:transparent}";var codeBlockMaterialCss="*.sc-stencila-code-block-material,.sc-stencila-code-block-material:after,.sc-stencila-code-block-material:before{border:0 solid;-webkit-box-sizing:border-box;box-sizing:border-box}html.sc-stencila-code-block-material{font-size:16px}.hidden.sc-stencila-code-block-material{display:none}code.sc-stencila-code-block-material,code[class*=language-].sc-stencila-code-block-material,output.sc-stencila-code-block-material{font-family:monospace;font-family:var(--font-family-mono,monospace);font-size:75%}pre.sc-stencila-code-block-material{border:1px solid #cfd2e1;border-color:var(--color-neutral-100,#cfd2e1);border-radius:.25rem;margin:.5rem;overflow:auto;padding:.5rem}.preReset.sc-stencila-code-block-material{border-width:0;margin:0;padding:0}.sc-stencila-code-block-material-h,stencila-code-block.sc-stencila-code-block-material{--background-editor:var(--color-neutral-50,#edf2f7);--border:var(--color-neutral-100,#e2e8f0);border-color:var(--border);border-radius:.25rem;border-style:solid;border-width:1px;display:block;margin-bottom:1rem;margin-top:1rem;overflow:hidden;position:relative;width:100%}.sc-stencila-code-block-material-h>figure.sc-stencila-code-block-material,stencila-code-block.sc-stencila-code-block-material>figure.sc-stencila-code-block-material{margin:0;padding:0}.sc-stencila-code-block-material-h stencila-editor.sc-stencila-code-block-material,stencila-code-block.sc-stencila-code-block-material stencila-editor.sc-stencila-code-block-material{--border-width:0;-ms-flex-positive:1;flex-grow:1}.editorContainer.sc-stencila-code-block-material{background:var(--background-editor);border-color:var(--border);border-radius:0;border-width:0 0 1px;display:-ms-flexbox;display:flex;-ms-flex:1 1 auto;flex:1 1 auto;-ms-flex-direction:column;flex-direction:column;height:intrinsic;margin:0;position:relative}.editorContainer.sc-stencila-code-block-material pre.sc-stencila-code-block-material,.editorContainer.sc-stencila-code-block-material pre[class*=language-].sc-stencila-code-block-material{background-color:transparent}";var CodeBlockComponent=function(){function e(e){var o=this;registerInstance(this,e);this.autofocus=false;this.lineWrapping=false;this.lineNumbers=true;this.foldGutter=true;this.readOnly=false;this.keymap=[];this.handleLanguageChange=function(e){if(o.programmingLanguage===undefined||lookupFormat(o.programmingLanguage).name!==e.detail.name){o.programmingLanguage=e.detail.name}}}e.prototype.onDiscoverExecutableLanguages=function(e){var o=e.detail;this.executableLanguages=o.languages};e.prototype.getContents=function(){return __awaiter(this,void 0,void 0,(function(){var e,o,t,a;return __generator(this,(function(r){switch(r.label){case 0:if(!this.editorRef)return[3,2];return[4,(e=this.editorRef)===null||e===void 0?void 0:e.getContents()];case 1:o=r.sent(),t=o.text,a=o.language;return[2,u({text:t,programmingLanguage:a})];case 2:throw new Error("Could not get CodeChunk contents")}}))}))};e.prototype.getTextContents=function(){return __awaiter(this,void 0,void 0,(function(){var e,o;return __generator(this,(function(t){switch(t.label){case 0:if(!this.editorRef)return[3,2];return[4,(e=this.editorRef)===null||e===void 0?void 0:e.getContents()];case 1:o=t.sent().text;return[2,o];case 2:throw new Error("Could not get CodeBlock contents")}}))}))};e.prototype.getRef=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(o){return[2,(e=this.editorRef)===null||e===void 0?void 0:e.getRef()]}))}))};e.prototype.render=function(){var e=this;return h(Host,null,h("figure",null,h("div",null,h("div",{class:{editorContainer:true}},h("stencila-editor",{activeLanguage:this.programmingLanguage,executableLanguages:this.executableLanguages,autofocus:this.autofocus,keymap:this.keymap,readOnly:this.readOnly,"onStencila-language-change":this.handleLanguageChange,foldGutter:this.foldGutter,lineNumbers:this.lineNumbers,lineWrapping:this.lineWrapping,ref:function(o){e.editorRef=o}},h("slot",{name:CodeBlockComponent.slots.text}),h("slot",{name:CodeBlockComponent.slots.errors})))),h("slot",{name:CodeBlockComponent.slots.label}),h("slot",{name:CodeBlockComponent.slots.caption})))};return e}();CodeBlockComponent.slots={text:"text",outputs:"outputs",errors:"errors",caption:"caption",label:"label"};CodeBlockComponent.style={default:defaultCodeBlockCss,material:codeBlockMaterialCss};export{CodeBlockComponent as stencila_code_block};
//# sourceMappingURL=stencila-code-block.entry.js.map