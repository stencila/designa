import{h,F as Fragment,r as registerInstance,f as createEvent,e as Host,c as getElement}from"./index-2305c23c.js";import{g as getSlotByName}from"./slotSelectors-df70e421.js";var getInputValue=function(e){if(e instanceof HTMLInputElement){if(e.type==="checkbox"){return e.checked}else if(e.type==="number"){return Number.parseFloat(e.value)}else{return e.value}}if(e instanceof HTMLSelectElement){return e.value}};var isValidatorType=function(e){return e==="Validator"||e==="ArrayValidator"||e==="BooleanValidator"||e==="ConstantValidator"||e==="EnumValidator"||e==="IntegerValidator"||e==="NumberValidator"||e==="StringValidator"||e==="TupleValidator"};var getProperties$3=function(e){var a,t;return{default:(t=(a=e===null||e===void 0?void 0:e.getAttribute("placeholder"))===null||a===void 0?void 0:a.toLowerCase())!==null&&t!==void 0?t:undefined}};var BooleanValidator=function(e){var a=e.valueEl;var t=getProperties$3(a);return h(Fragment,null,h("label",null,"Default value",h("input",{type:"checkbox",name:"default",checked:t.default==="true"})))};var ConstantValidator=function(){return h(Fragment,null,h("label",null,"Value",h("input",{name:"value"})))};var getProperties$2=function(e){var a,t,r,i;return{default:(t=(a=e===null||e===void 0?void 0:e.getAttribute("placeholder"))!==null&&a!==void 0?a:e===null||e===void 0?void 0:e.getAttribute("value"))!==null&&t!==void 0?t:undefined,minimum:(r=e===null||e===void 0?void 0:e.getAttribute("min"))!==null&&r!==void 0?r:undefined,maximum:(i=e===null||e===void 0?void 0:e.getAttribute("max"))!==null&&i!==void 0?i:undefined}};var IntegerValidator=function(e){var a=e.valueEl;var t=getProperties$2(a);return h(Fragment,null,h("label",null,"Default value",h("input",{type:"number",name:"default",step:"1",value:t.default})),h("label",null,"Minimum",h("input",{type:"number",name:"minimum",step:"1",value:t.minimum})),h("label",null,"Maximum",h("input",{type:"number",name:"maximum",step:"1",value:t.maximum})))};var getProperties$1=function(e){var a,t,r,i;return{default:(t=(a=e===null||e===void 0?void 0:e.getAttribute("placeholder"))!==null&&a!==void 0?a:e===null||e===void 0?void 0:e.getAttribute("value"))!==null&&t!==void 0?t:undefined,minimum:(r=e===null||e===void 0?void 0:e.getAttribute("min"))!==null&&r!==void 0?r:undefined,maximum:(i=e===null||e===void 0?void 0:e.getAttribute("max"))!==null&&i!==void 0?i:undefined}};var NumberValidator=function(e){var a=e.valueEl;var t=getProperties$1(a);return h(Fragment,null,h("label",null,"Default value",h("input",{type:"number",name:"default",step:"any",value:t.default})),h("label",null,"Minimum",h("input",{type:"number",name:"minimum",step:"any",value:t.minimum})),h("label",null,"Maximum",h("input",{type:"number",name:"maximum",step:"any",value:t.maximum})))};var getProperties=function(e){var a,t,r,i;return{default:(a=e===null||e===void 0?void 0:e.getAttribute("placeholder"))!==null&&a!==void 0?a:undefined,minLength:(t=e===null||e===void 0?void 0:e.getAttribute("minLength"))!==null&&t!==void 0?t:undefined,maxLength:(r=e===null||e===void 0?void 0:e.getAttribute("maxLength"))!==null&&r!==void 0?r:undefined,pattern:(i=e===null||e===void 0?void 0:e.getAttribute("pattern"))!==null&&i!==void 0?i:undefined}};var StringValidator=function(e){var a=e.valueEl;var t=getProperties(a);return h(Fragment,null,h("label",null,"Default value",h("input",{type:"text",name:"default",value:t.default})),h("label",null,"Minimum length",h("input",{type:"number",step:"1",name:"minLength",value:t.minLength,min:"0"})),h("label",null,"Maximum length",h("input",{type:"number",step:"1",name:"maxLength",value:t.maxLength})),h("label",null,"Pattern (RegEx)",h("input",{type:"text",name:"pattern",value:t.pattern})))};var validateField=function(e){var a=e.target;a.reportValidity()};var getValidator=function(e){return function(a){switch(a){case"NumberValidator":{return h(NumberValidator,{valueEl:e})}case"IntegerValidator":{return h(IntegerValidator,{valueEl:e})}case"StringValidator":{return h(StringValidator,{valueEl:e})}case"ConstantValidator":{return h(ConstantValidator,{valueEl:e})}case"BooleanValidator":{return h(BooleanValidator,{valueEl:e})}}}};var Validator=function(e){return h("stencila-menu",{autoClose:false,menuPosition:"bottom-start"},h("stencila-button",{iconOnly:true,icon:"equalizer",size:"xsmall",slot:"toggle","aria-label":"Toggle menu",color:"key",minimal:true}),h("form",{onChange:e.onValidatorChange,onInput:validateField,onFocusin:validateField},h("label",null,"Type",h("select",{name:"validator"},h("option",{disabled:true,selected:e.type===undefined},"Selectâ€¦"),h("option",{value:"BooleanValidator",selected:e.type==="BooleanValidator"},"Boolean"),h("option",{value:"IntegerValidator",selected:e.type==="IntegerValidator"},"Integer"),h("option",{value:"NumberValidator",selected:e.type==="NumberValidator"},"Number"),h("option",{value:"StringValidator",selected:e.type==="StringValidator"},"String"),h("option",{value:"EnumValidator",selected:e.type==="EnumValidator"},"Enum"))),getValidator(e.valueElRef)(e.type)))};var defaultParameterCss=".sc-stencila-parameter-default-h,stencila-parameter.sc-stencila-parameter-default{--background:var(--color-stock,#fff);--background-buttons:var(--color-neutral-50,#edf2f7);--border:var(--color-neutral-100,#e2e8f0);background-color:var(--background);border-color:var(--border);border-radius:.25rem;border-style:solid;border-width:1px;color:#4a4a4a;color:var(--color-key,#4a4a4a);display:-ms-inline-flexbox;display:inline-flex;font-size:.875rem;line-height:1.25rem;line-height:1;padding:0;vertical-align:text-bottom;white-space:nowrap}.sc-stencila-parameter-default-h .actions.sc-stencila-parameter-default,stencila-parameter.sc-stencila-parameter-default .actions.sc-stencila-parameter-default{background-color:var(--background-buttons);cursor:default;display:inline-block;overflow:hidden;-webkit-transition-duration:.15s;transition-duration:.15s;-webkit-transition-property:color,background-color,border-color,fill,stroke,opacity,-webkit-text-decoration-color,-webkit-box-shadow,-webkit-transform,-webkit-filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,fill,stroke,opacity,-webkit-text-decoration-color,-webkit-box-shadow,-webkit-transform,-webkit-filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-text-decoration-color,-webkit-box-shadow,-webkit-transform,-webkit-filter,-webkit-backdrop-filter;-webkit-transition-timing-function:cubic-bezier(.4,0,.2,1);transition-timing-function:cubic-bezier(.4,0,.2,1);-webkit-transition-timing-function:cubic-bezier(0,0,.2,1);transition-timing-function:cubic-bezier(0,0,.2,1);width:0}[mode=edit].hover.sc-stencila-parameter-default-h .actions.sc-stencila-parameter-default,[mode=edit].sc-stencila-parameter-default-h:focus .actions.sc-stencila-parameter-default,[mode=edit].sc-stencila-parameter-default-h:focus-within .actions.sc-stencila-parameter-default,[mode=edit].sc-stencila-parameter-default-h:hover .actions.sc-stencila-parameter-default,stencila-parameter[mode=edit].hover.sc-stencila-parameter-default .actions.sc-stencila-parameter-default,stencila-parameter[mode=edit].sc-stencila-parameter-default:focus .actions.sc-stencila-parameter-default,stencila-parameter[mode=edit].sc-stencila-parameter-default:focus-within .actions.sc-stencila-parameter-default,stencila-parameter[mode=edit].sc-stencila-parameter-default:hover .actions.sc-stencila-parameter-default{display:-ms-inline-flexbox;display:inline-flex;max-width:100%;width:100%}.sc-stencila-parameter-default-h .actions.sc-stencila-parameter-default form.sc-stencila-parameter-default,stencila-parameter.sc-stencila-parameter-default .actions.sc-stencila-parameter-default form.sc-stencila-parameter-default{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;padding:.5rem}.sc-stencila-parameter-default-h .actions.sc-stencila-parameter-default form.sc-stencila-parameter-default label.sc-stencila-parameter-default,stencila-parameter.sc-stencila-parameter-default .actions.sc-stencila-parameter-default form.sc-stencila-parameter-default label.sc-stencila-parameter-default{color:var(--color-neutral-600);display:block;font-family:sans-serif;font-family:var(--font-family-body,sans-serif);font-size:.75rem;line-height:1rem}.sc-stencila-parameter-default-h .actions.sc-stencila-parameter-default form.sc-stencila-parameter-default label.sc-stencila-parameter-default:not(:first-of-type),stencila-parameter.sc-stencila-parameter-default .actions.sc-stencila-parameter-default form.sc-stencila-parameter-default label.sc-stencila-parameter-default:not(:first-of-type){margin-top:.5rem}.sc-stencila-parameter-default-h .actions.sc-stencila-parameter-default form.sc-stencila-parameter-default label.sc-stencila-parameter-default input.sc-stencila-parameter-default,.sc-stencila-parameter-default-h .actions.sc-stencila-parameter-default form.sc-stencila-parameter-default label.sc-stencila-parameter-default select.sc-stencila-parameter-default,stencila-parameter.sc-stencila-parameter-default .actions.sc-stencila-parameter-default form.sc-stencila-parameter-default label.sc-stencila-parameter-default input.sc-stencila-parameter-default,stencila-parameter.sc-stencila-parameter-default .actions.sc-stencila-parameter-default form.sc-stencila-parameter-default label.sc-stencila-parameter-default select.sc-stencila-parameter-default{border-color:var(--border);border-radius:.25rem;border-style:solid;border-width:1px;display:block;font-family:monospace;font-family:var(--font-family-mono,monospace);font-size:.875rem;line-height:1.25rem;margin-top:.25rem;width:100%}.sc-stencila-parameter-default-h .name.sc-stencila-parameter-default,stencila-parameter.sc-stencila-parameter-default .name.sc-stencila-parameter-default{background-color:var(--background-buttons);cursor:text;font-family:monospace;font-family:var(--font-family-mono,monospace);padding:.25rem}.sc-stencila-parameter-default-h .name.sc-stencila-parameter-default-s>label,stencila-parameter .name.sc-stencila-parameter-default-s>label{cursor:text}.sc-stencila-parameter-default-h .value.sc-stencila-parameter-default,stencila-parameter.sc-stencila-parameter-default .value.sc-stencila-parameter-default{background-color:var(--background);font-family:monospace;font-family:var(--font-family-mono,monospace);margin:0;padding:0 .25rem}.sc-stencila-parameter-default-h .value.sc-stencila-parameter-default-s>input,.sc-stencila-parameter-default-h .value.sc-stencila-parameter-default-s>select,stencila-parameter .value.sc-stencila-parameter-default-s>input,stencila-parameter .value.sc-stencila-parameter-default-s>select{border-width:0;display:inline-block;font-family:monospace;font-family:var(--font-family-mono,monospace)}.sc-stencila-parameter-default-h .sc-stencila-parameter-default-s>input,.sc-stencila-parameter-default-h input.sc-stencila-parameter-default,stencila-parameter.sc-stencila-parameter-default-s>input,stencila-parameter .sc-stencila-parameter-default-s>input,stencila-parameter.sc-stencila-parameter-default input.sc-stencila-parameter-default{min-width:4rem}.sc-stencila-parameter-default-h .sc-stencila-parameter-default-s>input:invalid,.sc-stencila-parameter-default-h input.sc-stencila-parameter-default:invalid,stencila-parameter.sc-stencila-parameter-default-s>input:invalid,stencila-parameter .sc-stencila-parameter-default-s>input:invalid,stencila-parameter.sc-stencila-parameter-default input.sc-stencila-parameter-default:invalid{border-radius:.25rem;-webkit-box-shadow:0 0 0 2px var(--color-danger-500);box-shadow:0 0 0 2px var(--color-danger-500)}";var materialParameterCss=".sc-stencila-parameter-material-h,stencila-parameter.sc-stencila-parameter-material{--background:var(--color-stock,#fff);--background-buttons:var(--color-neutral-50,#edf2f7);--border:var(--color-neutral-100,#e2e8f0);background-color:var(--background);border-color:var(--border);border-radius:.25rem;border-style:solid;border-width:1px;color:#4a4a4a;color:var(--color-key,#4a4a4a);display:-ms-inline-flexbox;display:inline-flex;font-size:.875rem;line-height:1.25rem;line-height:1;padding:0;vertical-align:text-bottom;white-space:nowrap}.sc-stencila-parameter-material-h .actions.sc-stencila-parameter-material,stencila-parameter.sc-stencila-parameter-material .actions.sc-stencila-parameter-material{background-color:var(--background-buttons);cursor:default;display:inline-block;overflow:hidden;-webkit-transition-duration:.15s;transition-duration:.15s;-webkit-transition-property:color,background-color,border-color,fill,stroke,opacity,-webkit-text-decoration-color,-webkit-box-shadow,-webkit-transform,-webkit-filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,fill,stroke,opacity,-webkit-text-decoration-color,-webkit-box-shadow,-webkit-transform,-webkit-filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-text-decoration-color,-webkit-box-shadow,-webkit-transform,-webkit-filter,-webkit-backdrop-filter;-webkit-transition-timing-function:cubic-bezier(.4,0,.2,1);transition-timing-function:cubic-bezier(.4,0,.2,1);-webkit-transition-timing-function:cubic-bezier(0,0,.2,1);transition-timing-function:cubic-bezier(0,0,.2,1);width:0}[mode=edit].hover.sc-stencila-parameter-material-h .actions.sc-stencila-parameter-material,[mode=edit].sc-stencila-parameter-material-h:focus .actions.sc-stencila-parameter-material,[mode=edit].sc-stencila-parameter-material-h:focus-within .actions.sc-stencila-parameter-material,[mode=edit].sc-stencila-parameter-material-h:hover .actions.sc-stencila-parameter-material,stencila-parameter[mode=edit].hover.sc-stencila-parameter-material .actions.sc-stencila-parameter-material,stencila-parameter[mode=edit].sc-stencila-parameter-material:focus .actions.sc-stencila-parameter-material,stencila-parameter[mode=edit].sc-stencila-parameter-material:focus-within .actions.sc-stencila-parameter-material,stencila-parameter[mode=edit].sc-stencila-parameter-material:hover .actions.sc-stencila-parameter-material{display:-ms-inline-flexbox;display:inline-flex;max-width:100%;width:100%}.sc-stencila-parameter-material-h .actions.sc-stencila-parameter-material form.sc-stencila-parameter-material,stencila-parameter.sc-stencila-parameter-material .actions.sc-stencila-parameter-material form.sc-stencila-parameter-material{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;padding:.5rem}.sc-stencila-parameter-material-h .actions.sc-stencila-parameter-material form.sc-stencila-parameter-material label.sc-stencila-parameter-material,stencila-parameter.sc-stencila-parameter-material .actions.sc-stencila-parameter-material form.sc-stencila-parameter-material label.sc-stencila-parameter-material{color:var(--color-neutral-600);display:block;font-family:sans-serif;font-family:var(--font-family-body,sans-serif);font-size:.75rem;line-height:1rem}.sc-stencila-parameter-material-h .actions.sc-stencila-parameter-material form.sc-stencila-parameter-material label.sc-stencila-parameter-material:not(:first-of-type),stencila-parameter.sc-stencila-parameter-material .actions.sc-stencila-parameter-material form.sc-stencila-parameter-material label.sc-stencila-parameter-material:not(:first-of-type){margin-top:.5rem}.sc-stencila-parameter-material-h .actions.sc-stencila-parameter-material form.sc-stencila-parameter-material label.sc-stencila-parameter-material input.sc-stencila-parameter-material,.sc-stencila-parameter-material-h .actions.sc-stencila-parameter-material form.sc-stencila-parameter-material label.sc-stencila-parameter-material select.sc-stencila-parameter-material,stencila-parameter.sc-stencila-parameter-material .actions.sc-stencila-parameter-material form.sc-stencila-parameter-material label.sc-stencila-parameter-material input.sc-stencila-parameter-material,stencila-parameter.sc-stencila-parameter-material .actions.sc-stencila-parameter-material form.sc-stencila-parameter-material label.sc-stencila-parameter-material select.sc-stencila-parameter-material{border-color:var(--border);border-radius:.25rem;border-style:solid;border-width:1px;display:block;font-family:monospace;font-family:var(--font-family-mono,monospace);font-size:.875rem;line-height:1.25rem;margin-top:.25rem;width:100%}.sc-stencila-parameter-material-h .name.sc-stencila-parameter-material,stencila-parameter.sc-stencila-parameter-material .name.sc-stencila-parameter-material{background-color:var(--background-buttons);cursor:text;font-family:monospace;font-family:var(--font-family-mono,monospace);padding:.25rem}.sc-stencila-parameter-material-h .name.sc-stencila-parameter-material-s>label,stencila-parameter .name.sc-stencila-parameter-material-s>label{cursor:text}.sc-stencila-parameter-material-h .value.sc-stencila-parameter-material,stencila-parameter.sc-stencila-parameter-material .value.sc-stencila-parameter-material{background-color:var(--background);font-family:monospace;font-family:var(--font-family-mono,monospace);margin:0;padding:0 .25rem}.sc-stencila-parameter-material-h .value.sc-stencila-parameter-material-s>input,.sc-stencila-parameter-material-h .value.sc-stencila-parameter-material-s>select,stencila-parameter .value.sc-stencila-parameter-material-s>input,stencila-parameter .value.sc-stencila-parameter-material-s>select{border-width:0;display:inline-block;font-family:monospace;font-family:var(--font-family-mono,monospace)}.sc-stencila-parameter-material-h .sc-stencila-parameter-material-s>input,.sc-stencila-parameter-material-h input.sc-stencila-parameter-material,stencila-parameter.sc-stencila-parameter-material-s>input,stencila-parameter .sc-stencila-parameter-material-s>input,stencila-parameter.sc-stencila-parameter-material input.sc-stencila-parameter-material{min-width:4rem}.sc-stencila-parameter-material-h .sc-stencila-parameter-material-s>input:invalid,.sc-stencila-parameter-material-h input.sc-stencila-parameter-material:invalid,stencila-parameter.sc-stencila-parameter-material-s>input:invalid,stencila-parameter .sc-stencila-parameter-material-s>input:invalid,stencila-parameter.sc-stencila-parameter-material input.sc-stencila-parameter-material:invalid{border-radius:.25rem;-webkit-box-shadow:0 0 0 2px var(--color-danger-500);box-shadow:0 0 0 2px var(--color-danger-500)}";var Parameter=function(){function e(e){var a=this;registerInstance(this,e);this.parameterChange=createEvent(this,"stencila-parameter-change",7);this.validatorChange=createEvent(this,"stencila-validator-change",7);this.labelSlotRef=undefined;this.valueSlotRef=undefined;this.mode="edit";this.paramName="";this.onParamChange=function(e){var t=e.currentTarget;var r=a.validateValue(t);if(r){a.parameterChange.emit({property:"value",value:getInputValue(t)})}};this.onParamNameChange=function(e){var t=e.currentTarget;a.parameterChange.emit({property:"name",value:t.textContent})};this.onValidatorChange=function(e){var t=e.target;var r=getInputValue(t);if(t.name==="validator"&&typeof r==="string"&&t.value!==a.validator&&isValidatorType(r)){a.validator=r;a.validatorChange.emit({type:"validator",value:r})}else{a.validatorChange.emit({type:"property",name:t.name,value:r})}};this.validateValue=function(e){return e.reportValidity()};this.getValidatorFromMetaEl=function(){var e,t;var r=a.el.querySelector('meta[itemprop="validator"]');var i=(t=(e=r===null||r===void 0?void 0:r.getAttribute("itemtype"))===null||e===void 0?void 0:e.split("/"))!==null&&t!==void 0?t:[];var l=i[i.length-1];return isValidatorType(l)?l:undefined}}e.prototype.componentWillLoad=function(){if(this.validator===undefined){this.validator=this.getValidatorFromMetaEl()}this.labelSlotRef=getSlotByName(this.el)("name")[0];var e=getSlotByName(this.el)("value");this.valueSlotRef=e[0];for(var a=0,t=e;a<t.length;a++){var r=t[a];r.addEventListener("input",this.onParamChange);r.addEventListener("focus",this.onParamChange)}};e.prototype.disconnectedCallback=function(){var e=getSlotByName(this.el)("value");for(var a=0,t=e;a<t.length;a++){var r=t[a];r.removeEventListener("input",this.onParamChange);r.removeEventListener("focus",this.onParamChange)}};e.prototype.render=function(){var e=this;var a,t;var r=(t=(a=this.labelSlotRef)===null||a===void 0?void 0:a.textContent)!==null&&t!==void 0?t:"parameter";return h(Host,null,h("span",{class:"actions"},this.mode==="edit"&&h(Validator,{type:this.validator,onValidatorChange:this.onValidatorChange,valueElRef:this.valueSlotRef}),h("span",{class:"name",contentEditable:this.mode==="edit",onClick:function(a){if(e.mode==="edit"){a.preventDefault()}},onInput:this.onParamNameChange,ref:function(a){return e.labelSlotRef=a}},h("slot",{name:"name"}))),h("form",{class:"value",title:r},h("slot",{name:"value"})))};Object.defineProperty(e.prototype,"el",{get:function(){return getElement(this)},enumerable:false,configurable:true});return e}();Parameter.style={default:defaultParameterCss,material:materialParameterCss};export{Parameter as stencila_parameter};
//# sourceMappingURL=stencila-parameter.entry.js.map