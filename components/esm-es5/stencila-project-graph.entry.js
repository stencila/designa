var __generator=this&&this.__generator||function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(t){return function(e){return u([t,e])}}function u(a){if(r)throw new TypeError("Generator is already executing.");while(n)try{if(r=1,i&&(o=a[0]&2?i["return"]:a[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;if(i=0,o)a=[a[0]&2,o.value];switch(a[0]){case 0:case 1:o=a;break;case 4:n.label++;return{value:a[1],done:false};case 5:n.label++;i=a[1];a=[0];continue;case 7:a=n.ops.pop();n.trys.pop();continue;default:if(!(o=n.trys,o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){n.label=a[1];break}if(a[0]===6&&n.label<o[1]){n.label=o[1];o=a;break}if(o&&n.label<o[2]){n.label=o[2];n.ops.push(a);break}if(o[2])n.ops.pop();n.trys.pop();continue}a=e.call(t,n)}catch(s){a=[6,s];i=0}finally{r=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};var __spreadArray=this&&this.__spreadArray||function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++){if(o||!(r in e)){if(!o)o=Array.prototype.slice.call(e,0,r);o[r]=e[r]}}return t.concat(o||Array.prototype.slice.call(e))};var _d,_e;import{r as registerInstance,h,e as Host}from"./index-2305c23c.js";import{f as sqrt,c as cos,s as sin,t as tau,p as pi,Z as Timer,a5 as dispatch,a6 as timer,E as interpolateNumber,F as color,G as interpolateRgb,H as interpolateString,O as interpolateTransformSvg,N as interpolateTransformCss,Y as now,P as interpolateZoom,T as Symbol$1,a7 as symbolCircle,_ as forceSimulation,a2 as forceLink,a1 as forceManyBody,a0 as forceCollide,a3 as forceX,a4 as forceY,$ as forceCenter,l as line,W as curveBasisClosed}from"./y-3c98f269.js";var tan30=sqrt(1/3);var tan30_2=tan30*2;var symbolDiamond={draw:function(t,e){var n=sqrt(e/tan30_2);var r=n*tan30;t.moveTo(0,-n);t.lineTo(r,0);t.lineTo(0,n);t.lineTo(-r,0);t.closePath()}};var symbolSquare={draw:function(t,e){var n=sqrt(e);var r=-n/2;t.rect(r,r,n,n)}};var ka=.8908130915292852;var kr=sin(pi/10)/sin(7*pi/10);var kx=sin(tau/10)*kr;var ky=-cos(tau/10)*kr;var symbolStar={draw:function(t,e){var n=sqrt(e*ka);var r=kx*n;var i=ky*n;t.moveTo(0,-n);t.lineTo(r,i);for(var o=1;o<5;++o){var a=tau*o/5;var s=cos(a);var u=sin(a);t.lineTo(u*n,-s*n);t.lineTo(s*r-u*i,u*r+s*i)}t.closePath()}};var sqrt3=sqrt(3);var symbolTriangle={draw:function(t,e){var n=-sqrt(e/(sqrt3*3));t.moveTo(0,n*2);t.lineTo(-sqrt3*n,-n);t.lineTo(sqrt3*n,-n);t.closePath()}};var c=-.5;var s=sqrt(3)/2;var k=1/sqrt(12);var a=(k/2+1)*3;var symbolWye={draw:function(t,e){var n=sqrt(e/a);var r=n/2,i=n*k;var o=r,u=n*k+n;var l=-o,f=u;t.moveTo(r,i);t.lineTo(o,u);t.lineTo(l,f);t.lineTo(c*r-s*i,s*r+c*i);t.lineTo(c*o-s*u,s*o+c*u);t.lineTo(c*l-s*f,s*l+c*f);t.lineTo(c*r+s*i,c*i-s*r);t.lineTo(c*o+s*u,c*u-s*o);t.lineTo(c*l+s*f,c*f-s*l);t.closePath()}};function timeout(t,e,n){var r=new Timer;e=e==null?0:+e;r.restart((function(n){r.stop();t(n+e)}),e,n);return r}var xhtml="http://www.w3.org/1999/xhtml";var namespaces={svg:"http://www.w3.org/2000/svg",xhtml:xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace(t){var e=t+="",n=e.indexOf(":");if(n>=0&&(e=t.slice(0,n))!=="xmlns")t=t.slice(n+1);return namespaces.hasOwnProperty(e)?{space:namespaces[e],local:t}:t}function creatorInherit(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===xhtml&&e.documentElement.namespaceURI===xhtml?e.createElement(t):e.createElementNS(n,t)}}function creatorFixed(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function creator(t){var e=namespace(t);return(e.local?creatorFixed:creatorInherit)(e)}function none(){}function selector(t){return t==null?none:function(){return this.querySelector(t)}}function selection_select(t){if(typeof t!=="function")t=selector(t);for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i){for(var o=e[i],a=o.length,s=r[i]=new Array(a),u,l,c=0;c<a;++c){if((u=o[c])&&(l=t.call(u,u.__data__,c,o))){if("__data__"in u)l.__data__=u.__data__;s[c]=l}}}return new Selection$1(r,this._parents)}function array(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function empty(){return[]}function selectorAll(t){return t==null?empty:function(){return this.querySelectorAll(t)}}function arrayAll(t){return function(){return array(t.apply(this,arguments))}}function selection_selectAll(t){if(typeof t==="function")t=arrayAll(t);else t=selectorAll(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o){for(var a=e[o],s=a.length,u,l=0;l<s;++l){if(u=a[l]){r.push(t.call(u,u.__data__,l,a));i.push(u)}}}return new Selection$1(r,i)}function matcher(t){return function(){return this.matches(t)}}function childMatcher(t){return function(e){return e.matches(t)}}var find=Array.prototype.find;function childFind(t){return function(){return find.call(this.children,t)}}function childFirst(){return this.firstElementChild}function selection_selectChild(t){return this.select(t==null?childFirst:childFind(typeof t==="function"?t:childMatcher(t)))}var filter=Array.prototype.filter;function children(){return Array.from(this.children)}function childrenFilter(t){return function(){return filter.call(this.children,t)}}function selection_selectChildren(t){return this.selectAll(t==null?children:childrenFilter(typeof t==="function"?t:childMatcher(t)))}function selection_filter(t){if(typeof t!=="function")t=matcher(t);for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i){for(var o=e[i],a=o.length,s=r[i]=[],u,l=0;l<a;++l){if((u=o[l])&&t.call(u,u.__data__,l,o)){s.push(u)}}}return new Selection$1(r,this._parents)}function sparse(t){return new Array(t.length)}function selection_enter(){return new Selection$1(this._enter||this._groups.map(sparse),this._parents)}function EnterNode(t,e){this.ownerDocument=t.ownerDocument;this.namespaceURI=t.namespaceURI;this._next=null;this._parent=t;this.__data__=e}EnterNode.prototype={constructor:EnterNode,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function constant$2(t){return function(){return t}}function bindIndex(t,e,n,r,i,o){var a=0,s,u=e.length,l=o.length;for(;a<l;++a){if(s=e[a]){s.__data__=o[a];r[a]=s}else{n[a]=new EnterNode(t,o[a])}}for(;a<u;++a){if(s=e[a]){i[a]=s}}}function bindKey(t,e,n,r,i,o,a){var s,u,l=new Map,c=e.length,f=o.length,h=new Array(c),p;for(s=0;s<c;++s){if(u=e[s]){h[s]=p=a.call(u,u.__data__,s,e)+"";if(l.has(p)){i[s]=u}else{l.set(p,u)}}}for(s=0;s<f;++s){p=a.call(t,o[s],s,o)+"";if(u=l.get(p)){r[s]=u;u.__data__=o[s];l.delete(p)}else{n[s]=new EnterNode(t,o[s])}}for(s=0;s<c;++s){if((u=e[s])&&l.get(h[s])===u){i[s]=u}}}function datum(t){return t.__data__}function selection_data(t,e){if(!arguments.length)return Array.from(this,datum);var n=e?bindKey:bindIndex,r=this._parents,i=this._groups;if(typeof t!=="function")t=constant$2(t);for(var o=i.length,a=new Array(o),s=new Array(o),u=new Array(o),l=0;l<o;++l){var c=r[l],f=i[l],h=f.length,p=arraylike(t.call(c,c&&c.__data__,l,r)),d=p.length,v=s[l]=new Array(d),y=a[l]=new Array(d),m=u[l]=new Array(h);n(c,f,v,y,m,p,e);for(var g=0,_=0,w,b;g<d;++g){if(w=v[g]){if(g>=_)_=g+1;while(!(b=y[_])&&++_<d);w._next=b||null}}}a=new Selection$1(a,r);a._enter=s;a._exit=u;return a}function arraylike(t){return typeof t==="object"&&"length"in t?t:Array.from(t)}function selection_exit(){return new Selection$1(this._exit||this._groups.map(sparse),this._parents)}function selection_join(t,e,n){var r=this.enter(),i=this,o=this.exit();if(typeof t==="function"){r=t(r);if(r)r=r.selection()}else{r=r.append(t+"")}if(e!=null){i=e(i);if(i)i=i.selection()}if(n==null)o.remove();else n(o);return r&&i?r.merge(i).order():i}function selection_merge(t){var e=t.selection?t.selection():t;for(var n=this._groups,r=e._groups,i=n.length,o=r.length,a=Math.min(i,o),s=new Array(i),u=0;u<a;++u){for(var l=n[u],c=r[u],f=l.length,h=s[u]=new Array(f),p,d=0;d<f;++d){if(p=l[d]||c[d]){h[d]=p}}}for(;u<i;++u){s[u]=n[u]}return new Selection$1(s,this._parents)}function selection_order(){for(var t=this._groups,e=-1,n=t.length;++e<n;){for(var r=t[e],i=r.length-1,o=r[i],a;--i>=0;){if(a=r[i]){if(o&&a.compareDocumentPosition(o)^4)o.parentNode.insertBefore(a,o);o=a}}}return this}function selection_sort(t){if(!t)t=ascending;function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a=n[o],s=a.length,u=i[o]=new Array(s),l,c=0;c<s;++c){if(l=a[c]){u[c]=l}}u.sort(e)}return new Selection$1(i,this._parents).order()}function ascending(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function selection_call(){var t=arguments[0];arguments[0]=this;t.apply(null,arguments);return this}function selection_nodes(){return Array.from(this)}function selection_node(){for(var t=this._groups,e=0,n=t.length;e<n;++e){for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}}return null}function selection_size(){var t=0;for(var e=0,n=this;e<n.length;e++){var r=n[e];++t}return t}function selection_empty(){return!this.node()}function selection_each(t){for(var e=this._groups,n=0,r=e.length;n<r;++n){for(var i=e[n],o=0,a=i.length,s;o<a;++o){if(s=i[o])t.call(s,s.__data__,o,i)}}return this}function attrRemove$1(t){return function(){this.removeAttribute(t)}}function attrRemoveNS$1(t){return function(){this.removeAttributeNS(t.space,t.local)}}function attrConstant$1(t,e){return function(){this.setAttribute(t,e)}}function attrConstantNS$1(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function attrFunction$1(t,e){return function(){var n=e.apply(this,arguments);if(n==null)this.removeAttribute(t);else this.setAttribute(t,n)}}function attrFunctionNS$1(t,e){return function(){var n=e.apply(this,arguments);if(n==null)this.removeAttributeNS(t.space,t.local);else this.setAttributeNS(t.space,t.local,n)}}function selection_attr(t,e){var n=namespace(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?attrRemoveNS$1:attrRemove$1:typeof e==="function"?n.local?attrFunctionNS$1:attrFunction$1:n.local?attrConstantNS$1:attrConstant$1)(n,e))}function defaultView(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function styleRemove$1(t){return function(){this.style.removeProperty(t)}}function styleConstant$1(t,e,n){return function(){this.style.setProperty(t,e,n)}}function styleFunction$1(t,e,n){return function(){var r=e.apply(this,arguments);if(r==null)this.style.removeProperty(t);else this.style.setProperty(t,r,n)}}function selection_style(t,e,n){return arguments.length>1?this.each((e==null?styleRemove$1:typeof e==="function"?styleFunction$1:styleConstant$1)(t,e,n==null?"":n)):styleValue(this.node(),t)}function styleValue(t,e){return t.style.getPropertyValue(e)||defaultView(t).getComputedStyle(t,null).getPropertyValue(e)}function propertyRemove(t){return function(){delete this[t]}}function propertyConstant(t,e){return function(){this[t]=e}}function propertyFunction(t,e){return function(){var n=e.apply(this,arguments);if(n==null)delete this[t];else this[t]=n}}function selection_property(t,e){return arguments.length>1?this.each((e==null?propertyRemove:typeof e==="function"?propertyFunction:propertyConstant)(t,e)):this.node()[t]}function classArray(t){return t.trim().split(/^|\s+/)}function classList(t){return t.classList||new ClassList(t)}function ClassList(t){this._node=t;this._names=classArray(t.getAttribute("class")||"")}ClassList.prototype={add:function(t){var e=this._names.indexOf(t);if(e<0){this._names.push(t);this._node.setAttribute("class",this._names.join(" "))}},remove:function(t){var e=this._names.indexOf(t);if(e>=0){this._names.splice(e,1);this._node.setAttribute("class",this._names.join(" "))}},contains:function(t){return this._names.indexOf(t)>=0}};function classedAdd(t,e){var n=classList(t),r=-1,i=e.length;while(++r<i)n.add(e[r])}function classedRemove(t,e){var n=classList(t),r=-1,i=e.length;while(++r<i)n.remove(e[r])}function classedTrue(t){return function(){classedAdd(this,t)}}function classedFalse(t){return function(){classedRemove(this,t)}}function classedFunction(t,e){return function(){(e.apply(this,arguments)?classedAdd:classedRemove)(this,t)}}function selection_classed(t,e){var n=classArray(t+"");if(arguments.length<2){var r=classList(this.node()),i=-1,o=n.length;while(++i<o)if(!r.contains(n[i]))return false;return true}return this.each((typeof e==="function"?classedFunction:e?classedTrue:classedFalse)(n,e))}function textRemove(){this.textContent=""}function textConstant$1(t){return function(){this.textContent=t}}function textFunction$1(t){return function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}}function selection_text(t){return arguments.length?this.each(t==null?textRemove:(typeof t==="function"?textFunction$1:textConstant$1)(t)):this.node().textContent}function htmlRemove(){this.innerHTML=""}function htmlConstant(t){return function(){this.innerHTML=t}}function htmlFunction(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}}function selection_html(t){return arguments.length?this.each(t==null?htmlRemove:(typeof t==="function"?htmlFunction:htmlConstant)(t)):this.node().innerHTML}function raise(){if(this.nextSibling)this.parentNode.appendChild(this)}function selection_raise(){return this.each(raise)}function lower(){if(this.previousSibling)this.parentNode.insertBefore(this,this.parentNode.firstChild)}function selection_lower(){return this.each(lower)}function selection_append(t){var e=typeof t==="function"?t:creator(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))}function constantNull(){return null}function selection_insert(t,e){var n=typeof t==="function"?t:creator(t),r=e==null?constantNull:typeof e==="function"?e:selector(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))}function remove(){var t=this.parentNode;if(t)t.removeChild(this)}function selection_remove(){return this.each(remove)}function selection_cloneShallow(){var t=this.cloneNode(false),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function selection_cloneDeep(){var t=this.cloneNode(true),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function selection_clone(t){return this.select(t?selection_cloneDeep:selection_cloneShallow)}function selection_datum(t){return arguments.length?this.property("__data__",t):this.node().__data__}function contextListener(t){return function(e){t.call(this,e,this.__data__)}}function parseTypenames(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");if(n>=0)e=t.slice(n+1),t=t.slice(0,n);return{type:t,name:e}}))}function onRemove(t){return function(){var e=this.__on;if(!e)return;for(var n=0,r=-1,i=e.length,o;n<i;++n){if(o=e[n],(!t.type||o.type===t.type)&&o.name===t.name){this.removeEventListener(o.type,o.listener,o.options)}else{e[++r]=o}}if(++r)e.length=r;else delete this.__on}}function onAdd(t,e,n){return function(){var r=this.__on,i,o=contextListener(e);if(r)for(var a=0,s=r.length;a<s;++a){if((i=r[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options);this.addEventListener(i.type,i.listener=o,i.options=n);i.value=e;return}}this.addEventListener(t.type,o,n);i={type:t.type,name:t.name,value:e,listener:o,options:n};if(!r)this.__on=[i];else r.push(i)}}function selection_on(t,e,n){var r=parseTypenames(t+""),i,o=r.length,a;if(arguments.length<2){var s=this.node().__on;if(s)for(var u=0,l=s.length,c;u<l;++u){for(i=0,c=s[u];i<o;++i){if((a=r[i]).type===c.type&&a.name===c.name){return c.value}}}return}s=e?onAdd:onRemove;for(i=0;i<o;++i)this.each(s(r[i],e,n));return this}function dispatchEvent(t,e,n){var r=defaultView(t),i=r.CustomEvent;if(typeof i==="function"){i=new i(e,n)}else{i=r.document.createEvent("Event");if(n)i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail;else i.initEvent(e,false,false)}t.dispatchEvent(i)}function dispatchConstant(t,e){return function(){return dispatchEvent(this,t,e)}}function dispatchFunction(t,e){return function(){return dispatchEvent(this,t,e.apply(this,arguments))}}function selection_dispatch(t,e){return this.each((typeof e==="function"?dispatchFunction:dispatchConstant)(t,e))}function selection_iterator(){var t,e,n,r,i,o,a;return __generator(this,(function(s){switch(s.label){case 0:t=this._groups,e=0,n=t.length;s.label=1;case 1:if(!(e<n))return[3,6];r=t[e],i=0,o=r.length;s.label=2;case 2:if(!(i<o))return[3,5];if(!(a=r[i]))return[3,4];return[4,a];case 3:s.sent();s.label=4;case 4:++i;return[3,2];case 5:++e;return[3,1];case 6:return[2]}}))}var root=[null];function Selection$1(t,e){this._groups=t;this._parents=e}function selection(){return new Selection$1([[document.documentElement]],root)}function selection_selection(){return this}Selection$1.prototype=selection.prototype=(_d={constructor:Selection$1,select:selection_select,selectAll:selection_selectAll,selectChild:selection_selectChild,selectChildren:selection_selectChildren,filter:selection_filter,data:selection_data,enter:selection_enter,exit:selection_exit,join:selection_join,merge:selection_merge,selection:selection_selection,order:selection_order,sort:selection_sort,call:selection_call,nodes:selection_nodes,node:selection_node,size:selection_size,empty:selection_empty,each:selection_each,attr:selection_attr,style:selection_style,property:selection_property,classed:selection_classed,text:selection_text,html:selection_html,raise:selection_raise,lower:selection_lower,append:selection_append,insert:selection_insert,remove:selection_remove,clone:selection_clone,datum:selection_datum,on:selection_on,dispatch:selection_dispatch},_d[Symbol.iterator]=selection_iterator,_d);function select(t){return typeof t==="string"?new Selection$1([[document.querySelector(t)]],[document.documentElement]):new Selection$1([[t]],root)}function sourceEvent(t){var e;while(e=t.sourceEvent)t=e;return t}function pointer(t,e){t=sourceEvent(t);if(e===undefined)e=t.currentTarget;if(e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();r.x=t.clientX,r.y=t.clientY;r=r.matrixTransform(e.getScreenCTM().inverse());return[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}var nonpassive={passive:false};var nonpassivecapture={capture:true,passive:false};function nopropagation$1(t){t.stopImmediatePropagation()}function noevent$1(t){t.preventDefault();t.stopImmediatePropagation()}function dragDisable(t){var e=t.document.documentElement,n=select(t).on("dragstart.drag",noevent$1,nonpassivecapture);if("onselectstart"in e){n.on("selectstart.drag",noevent$1,nonpassivecapture)}else{e.__noselect=e.style.MozUserSelect;e.style.MozUserSelect="none"}}function yesdrag(t,e){var n=t.document.documentElement,r=select(t).on("dragstart.drag",null);if(e){r.on("click.drag",noevent$1,nonpassivecapture);setTimeout((function(){r.on("click.drag",null)}),0)}if("onselectstart"in n){r.on("selectstart.drag",null)}else{n.style.MozUserSelect=n.__noselect;delete n.__noselect}}var constant$1=function(t){return function(){return t}};function DragEvent(t,e){var n=e.sourceEvent,r=e.subject,i=e.target,o=e.identifier,a=e.active,s=e.x,u=e.y,l=e.dx,c=e.dy,f=e.dispatch;Object.defineProperties(this,{type:{value:t,enumerable:true,configurable:true},sourceEvent:{value:n,enumerable:true,configurable:true},subject:{value:r,enumerable:true,configurable:true},target:{value:i,enumerable:true,configurable:true},identifier:{value:o,enumerable:true,configurable:true},active:{value:a,enumerable:true,configurable:true},x:{value:s,enumerable:true,configurable:true},y:{value:u,enumerable:true,configurable:true},dx:{value:l,enumerable:true,configurable:true},dy:{value:c,enumerable:true,configurable:true},_:{value:f}})}DragEvent.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function defaultFilter$1(t){return!t.ctrlKey&&!t.button}function defaultContainer(){return this.parentNode}function defaultSubject(t,e){return e==null?{x:t.x,y:t.y}:e}function defaultTouchable$1(){return navigator.maxTouchPoints||"ontouchstart"in this}function drag(){var t=defaultFilter$1,e=defaultContainer,n=defaultSubject,r=defaultTouchable$1,i={},o=dispatch("start","drag","end"),a=0,s,u,l,c,f=0;function h(t){t.on("mousedown.drag",p).filter(r).on("touchstart.drag",y).on("touchmove.drag",m,nonpassive).on("touchend.drag touchcancel.drag",g).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(n,r){if(c||!t.call(this,n,r))return;var i=_(this,e.call(this,n,r),n,r,"mouse");if(!i)return;select(n.view).on("mousemove.drag",d,nonpassivecapture).on("mouseup.drag",v,nonpassivecapture);dragDisable(n.view);nopropagation$1(n);l=false;s=n.clientX;u=n.clientY;i("start",n)}function d(t){noevent$1(t);if(!l){var e=t.clientX-s,n=t.clientY-u;l=e*e+n*n>f}i.mouse("drag",t)}function v(t){select(t.view).on("mousemove.drag mouseup.drag",null);yesdrag(t.view,l);noevent$1(t);i.mouse("end",t)}function y(n,r){if(!t.call(this,n,r))return;var i=n.changedTouches,o=e.call(this,n,r),a=i.length,s,u;for(s=0;s<a;++s){if(u=_(this,o,n,r,i[s].identifier,i[s])){nopropagation$1(n);u("start",n,i[s])}}}function m(t){var e=t.changedTouches,n=e.length,r,o;for(r=0;r<n;++r){if(o=i[e[r].identifier]){noevent$1(t);o("drag",t,e[r])}}}function g(t){var e=t.changedTouches,n=e.length,r,o;if(c)clearTimeout(c);c=setTimeout((function(){c=null}),500);for(r=0;r<n;++r){if(o=i[e[r].identifier]){nopropagation$1(t);o("end",t,e[r])}}}function _(t,e,r,s,u,l){var c=o.copy(),f=pointer(l||r,e),p,d,v;if((v=n.call(t,new DragEvent("beforestart",{sourceEvent:r,target:h,identifier:u,active:a,x:f[0],y:f[1],dx:0,dy:0,dispatch:c}),s))==null)return;p=v.x-f[0]||0;d=v.y-f[1]||0;return function n(r,o,l){var y=f,m;switch(r){case"start":i[u]=n,m=a++;break;case"end":delete i[u],--a;case"drag":f=pointer(l||o,e),m=a;break}c.call(r,t,new DragEvent(r,{sourceEvent:o,subject:v,target:h,identifier:u,active:m,x:f[0]+p,y:f[1]+d,dx:f[0]-y[0],dy:f[1]-y[1],dispatch:c}),s)}}h.filter=function(e){return arguments.length?(t=typeof e==="function"?e:constant$1(!!e),h):t};h.container=function(t){return arguments.length?(e=typeof t==="function"?t:constant$1(t),h):e};h.subject=function(t){return arguments.length?(n=typeof t==="function"?t:constant$1(t),h):n};h.touchable=function(t){return arguments.length?(r=typeof t==="function"?t:constant$1(!!t),h):r};h.on=function(){var t=o.on.apply(o,arguments);return t===o?h:t};h.clickDistance=function(t){return arguments.length?(f=(t=+t)*t,h):Math.sqrt(f)};return h}function cross(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function lexicographicOrder(t,e){return t[0]-e[0]||t[1]-e[1]}function computeUpperHullIndexes(t){var e=t.length,n=[0,1];var r=2,i;for(i=2;i<e;++i){while(r>1&&cross(t[n[r-2]],t[n[r-1]],t[i])<=0)--r;n[r++]=i}return n.slice(0,r)}function polygonHull(t){if((n=t.length)<3)return null;var e,n,r=new Array(n),i=new Array(n);for(e=0;e<n;++e)r[e]=[+t[e][0],+t[e][1],e];r.sort(lexicographicOrder);for(e=0;e<n;++e)i[e]=[r[e][0],-r[e][1]];var o=computeUpperHullIndexes(r),a=computeUpperHullIndexes(i);var s=a[0]===o[0],u=a[a.length-1]===o[o.length-1],l=[];for(e=o.length-1;e>=0;--e)l.push(t[r[o[e]][2]]);for(e=+s;e<a.length-u;++e)l.push(t[r[a[e]][2]]);return l}var hasPath=function(t){if(typeof t==="object"&&(t.type==="Symbol"||t.type==="Node"||t.type==="File")){return true}return false};var hasKind=function(t){if(typeof t==="object"&&(t.type==="Symbol"||t.type==="Node")){return true}return false};var graphEdgeToLinks=function(t){return t.edges.reduce((function(e,n){var r=t.nodes[n.to];var i=hasPath(r)?r.path:"leaf";return __spreadArray(__spreadArray([],e,true),[{source:n.from,target:n.to,group:i,relation:n.relation}],false)}),[])};var graphToGroupedGraph=function(t){var e=__spreadArray([],t.nodes,true);var n=e.filter((function(t){return t.type==="File"}));var r=t.nodes.filter((function(t){return hasPath(t)&&t.type!=="File"}));var i={nodes:t.nodes,links:graphEdgeToLinks(t),groupLinks:[],groups:n};var o=function(t){var e;return(e=n.find((function(e){return e.path===t})))===null||e===void 0?void 0:e.index};for(var a=0,s=n;a<s.length;a++){var u=s[a];var l=o(u.path);if(l===undefined)break;for(var c=0,f=r;c<f.length;c++){var h=f[c];if(hasPath(h)&&h.path===u.path){i.groupLinks.push({source:h.index,target:u.index,group:h.path,relation:{type:""}})}}}return i};var isInterGroupLink=function(t,e){if(hasPath(t)&&hasPath(e)){return(e.path!==""||e.path!=="")&&e.path===t.path}return false};var emptyOn=dispatch("start","end","cancel","interrupt");var emptyTween=[];var CREATED=0;var SCHEDULED=1;var STARTING=2;var STARTED=3;var RUNNING=4;var ENDING=5;var ENDED=6;function schedule(t,e,n,r,i,o){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;create(t,n,{name:e,index:r,group:i,on:emptyOn,tween:emptyTween,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:CREATED})}function init(t,e){var n=get(t,e);if(n.state>CREATED)throw new Error("too late; already scheduled");return n}function set(t,e){var n=get(t,e);if(n.state>STARTED)throw new Error("too late; already running");return n}function get(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function create(t,e,n){var r=t.__transition,i;r[e]=n;n.timer=timer(o,0,n.time);function o(t){n.state=SCHEDULED;n.timer.restart(a,n.delay,n.time);if(n.delay<=t)a(t-n.delay)}function a(o){var l,c,f,h;if(n.state!==SCHEDULED)return u();for(l in r){h=r[l];if(h.name!==n.name)continue;if(h.state===STARTED)return timeout(a);if(h.state===RUNNING){h.state=ENDED;h.timer.stop();h.on.call("interrupt",t,t.__data__,h.index,h.group);delete r[l]}else if(+l<e){h.state=ENDED;h.timer.stop();h.on.call("cancel",t,t.__data__,h.index,h.group);delete r[l]}}timeout((function(){if(n.state===STARTED){n.state=RUNNING;n.timer.restart(s,n.delay,n.time);s(o)}}));n.state=STARTING;n.on.call("start",t,t.__data__,n.index,n.group);if(n.state!==STARTING)return;n.state=STARTED;i=new Array(f=n.tween.length);for(l=0,c=-1;l<f;++l){if(h=n.tween[l].value.call(t,t.__data__,n.index,n.group)){i[++c]=h}}i.length=c+1}function s(e){var r=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(u),n.state=ENDING,1),o=-1,a=i.length;while(++o<a){i[o].call(t,r)}if(n.state===ENDING){n.on.call("end",t,t.__data__,n.index,n.group);u()}}function u(){n.state=ENDED;n.timer.stop();delete r[e];for(var i in r)return;delete t.__transition}}function interrupt(t,e){var n=t.__transition,r,i,o=true,a;if(!n)return;e=e==null?null:e+"";for(a in n){if((r=n[a]).name!==e){o=false;continue}i=r.state>STARTING&&r.state<ENDING;r.state=ENDED;r.timer.stop();r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group);delete n[a]}if(o)delete t.__transition}function selection_interrupt(t){return this.each((function(){interrupt(this,t)}))}function tweenRemove(t,e){var n,r;return function(){var i=set(this,t),o=i.tween;if(o!==n){r=n=o;for(var a=0,s=r.length;a<s;++a){if(r[a].name===e){r=r.slice();r.splice(a,1);break}}}i.tween=r}}function tweenFunction(t,e,n){var r,i;if(typeof n!=="function")throw new Error;return function(){var o=set(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:e,value:n},u=0,l=i.length;u<l;++u){if(i[u].name===e){i[u]=s;break}}if(u===l)i.push(s)}o.tween=i}}function transition_tween(t,e){var n=this._id;t+="";if(arguments.length<2){var r=get(this.node(),n).tween;for(var i=0,o=r.length,a;i<o;++i){if((a=r[i]).name===t){return a.value}}return null}return this.each((e==null?tweenRemove:tweenFunction)(n,t,e))}function tweenValue(t,e,n){var r=t._id;t.each((function(){var t=set(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)}));return function(t){return get(t,r).value[e]}}function interpolate(t,e){var n;return(typeof e==="number"?interpolateNumber:e instanceof color?interpolateRgb:(n=color(e))?(e=n,interpolateRgb):interpolateString)(t,e)}function attrRemove(t){return function(){this.removeAttribute(t)}}function attrRemoveNS(t){return function(){this.removeAttributeNS(t.space,t.local)}}function attrConstant(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttribute(t);return a===i?null:a===r?o:o=e(r=a,n)}}function attrConstantNS(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?o:o=e(r=a,n)}}function attrFunction(t,e,n){var r,i,o;return function(){var a,s=n(this),u;if(s==null)return void this.removeAttribute(t);a=this.getAttribute(t);u=s+"";return a===u?null:a===r&&u===i?o:(i=u,o=e(r=a,s))}}function attrFunctionNS(t,e,n){var r,i,o;return function(){var a,s=n(this),u;if(s==null)return void this.removeAttributeNS(t.space,t.local);a=this.getAttributeNS(t.space,t.local);u=s+"";return a===u?null:a===r&&u===i?o:(i=u,o=e(r=a,s))}}function transition_attr(t,e){var n=namespace(t),r=n==="transform"?interpolateTransformSvg:interpolate;return this.attrTween(t,typeof e==="function"?(n.local?attrFunctionNS:attrFunction)(n,r,tweenValue(this,"attr."+t,e)):e==null?(n.local?attrRemoveNS:attrRemove)(n):(n.local?attrConstantNS:attrConstant)(n,r,e))}function attrInterpolate(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function attrInterpolateNS(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function attrTweenNS(t,e){var n,r;function i(){var i=e.apply(this,arguments);if(i!==r)n=(r=i)&&attrInterpolateNS(t,i);return n}i._value=e;return i}function attrTween(t,e){var n,r;function i(){var i=e.apply(this,arguments);if(i!==r)n=(r=i)&&attrInterpolate(t,i);return n}i._value=e;return i}function transition_attrTween(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!=="function")throw new Error;var r=namespace(t);return this.tween(n,(r.local?attrTweenNS:attrTween)(r,e))}function delayFunction(t,e){return function(){init(this,t).delay=+e.apply(this,arguments)}}function delayConstant(t,e){return e=+e,function(){init(this,t).delay=e}}function transition_delay(t){var e=this._id;return arguments.length?this.each((typeof t==="function"?delayFunction:delayConstant)(e,t)):get(this.node(),e).delay}function durationFunction(t,e){return function(){set(this,t).duration=+e.apply(this,arguments)}}function durationConstant(t,e){return e=+e,function(){set(this,t).duration=e}}function transition_duration(t){var e=this._id;return arguments.length?this.each((typeof t==="function"?durationFunction:durationConstant)(e,t)):get(this.node(),e).duration}function easeConstant(t,e){if(typeof e!=="function")throw new Error;return function(){set(this,t).ease=e}}function transition_ease(t){var e=this._id;return arguments.length?this.each(easeConstant(e,t)):get(this.node(),e).ease}function easeVarying(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!=="function")throw new Error;set(this,t).ease=n}}function transition_easeVarying(t){if(typeof t!=="function")throw new Error;return this.each(easeVarying(this._id,t))}function transition_filter(t){if(typeof t!=="function")t=matcher(t);for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i){for(var o=e[i],a=o.length,s=r[i]=[],u,l=0;l<a;++l){if((u=o[l])&&t.call(u,u.__data__,l,o)){s.push(u)}}}return new Transition(r,this._parents,this._name,this._id)}function transition_merge(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s){for(var u=e[s],l=n[s],c=u.length,f=a[s]=new Array(c),h,p=0;p<c;++p){if(h=u[p]||l[p]){f[p]=h}}}for(;s<r;++s){a[s]=e[s]}return new Transition(a,this._parents,this._name,this._id)}function start(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");if(e>=0)t=t.slice(0,e);return!t||t==="start"}))}function onFunction(t,e,n){var r,i,o=start(e)?init:set;return function(){var a=o(this,t),s=a.on;if(s!==r)(i=(r=s).copy()).on(e,n);a.on=i}}function transition_on(t,e){var n=this._id;return arguments.length<2?get(this.node(),n).on.on(t):this.each(onFunction(n,t,e))}function removeFunction(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;if(e)e.removeChild(this)}}function transition_remove(){return this.on("end.remove",removeFunction(this._id))}function transition_select(t){var e=this._name,n=this._id;if(typeof t!=="function")t=selector(t);for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a){for(var s=r[a],u=s.length,l=o[a]=new Array(u),c,f,h=0;h<u;++h){if((c=s[h])&&(f=t.call(c,c.__data__,h,s))){if("__data__"in c)f.__data__=c.__data__;l[h]=f;schedule(l[h],e,n,h,l,get(c,n))}}}return new Transition(o,this._parents,e,n)}function transition_selectAll(t){var e=this._name,n=this._id;if(typeof t!=="function")t=selectorAll(t);for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s){for(var u=r[s],l=u.length,c,f=0;f<l;++f){if(c=u[f]){for(var h=t.call(c,c.__data__,f,u),p,d=get(c,n),v=0,y=h.length;v<y;++v){if(p=h[v]){schedule(p,e,n,v,h,d)}}o.push(h);a.push(c)}}}return new Transition(o,a,e,n)}var Selection=selection.prototype.constructor;function transition_selection(){return new Selection(this._groups,this._parents)}function styleNull(t,e){var n,r,i;return function(){var o=styleValue(this,t),a=(this.style.removeProperty(t),styleValue(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}function styleRemove(t){return function(){this.style.removeProperty(t)}}function styleConstant(t,e,n){var r,i=n+"",o;return function(){var a=styleValue(this,t);return a===i?null:a===r?o:o=e(r=a,n)}}function styleFunction(t,e,n){var r,i,o;return function(){var a=styleValue(this,t),s=n(this),u=s+"";if(s==null)u=s=(this.style.removeProperty(t),styleValue(this,t));return a===u?null:a===r&&u===i?o:(i=u,o=e(r=a,s))}}function styleMaybeRemove(t,e){var n,r,i,o="style."+e,a="end."+o,s;return function(){var u=set(this,t),l=u.on,c=u.value[o]==null?s||(s=styleRemove(e)):undefined;if(l!==n||i!==c)(r=(n=l).copy()).on(a,i=c);u.on=r}}function transition_style(t,e,n){var r=(t+="")==="transform"?interpolateTransformCss:interpolate;return e==null?this.styleTween(t,styleNull(t,r)).on("end.style."+t,styleRemove(t)):typeof e==="function"?this.styleTween(t,styleFunction(t,r,tweenValue(this,"style."+t,e))).each(styleMaybeRemove(this._id,t)):this.styleTween(t,styleConstant(t,r,e),n).on("end.style."+t,null)}function styleInterpolate(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function styleTween(t,e,n){var r,i;function o(){var o=e.apply(this,arguments);if(o!==i)r=(i=o)&&styleInterpolate(t,o,n);return r}o._value=e;return o}function transition_styleTween(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!=="function")throw new Error;return this.tween(r,styleTween(t,e,n==null?"":n))}function textConstant(t){return function(){this.textContent=t}}function textFunction(t){return function(){var e=t(this);this.textContent=e==null?"":e}}function transition_text(t){return this.tween("text",typeof t==="function"?textFunction(tweenValue(this,"text",t)):textConstant(t==null?"":t+""))}function textInterpolate(t){return function(e){this.textContent=t.call(this,e)}}function textTween(t){var e,n;function r(){var r=t.apply(this,arguments);if(r!==n)e=(n=r)&&textInterpolate(r);return e}r._value=t;return r}function transition_textTween(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!=="function")throw new Error;return this.tween(e,textTween(t))}function transition_transition(){var t=this._name,e=this._id,n=newId();for(var r=this._groups,i=r.length,o=0;o<i;++o){for(var a=r[o],s=a.length,u,l=0;l<s;++l){if(u=a[l]){var c=get(u,e);schedule(u,t,n,l,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}}}return new Transition(r,this._parents,t,n)}function transition_end(){var t,e,n=this,r=n._id,i=n.size();return new Promise((function(o,a){var s={value:a},u={value:function(){if(--i===0)o()}};n.each((function(){var n=set(this,r),i=n.on;if(i!==t){e=(t=i).copy();e._.cancel.push(s);e._.interrupt.push(s);e._.end.push(u)}n.on=e}));if(i===0)o()}))}var id=0;function Transition(t,e,n,r){this._groups=t;this._parents=e;this._name=n;this._id=r}function newId(){return++id}var selection_prototype=selection.prototype;Transition.prototype=(_e={constructor:Transition,select:transition_select,selectAll:transition_selectAll,selectChild:selection_prototype.selectChild,selectChildren:selection_prototype.selectChildren,filter:transition_filter,merge:transition_merge,selection:transition_selection,transition:transition_transition,call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:transition_on,attr:transition_attr,attrTween:transition_attrTween,style:transition_style,styleTween:transition_styleTween,text:transition_text,textTween:transition_textTween,remove:transition_remove,tween:transition_tween,delay:transition_delay,duration:transition_duration,ease:transition_ease,easeVarying:transition_easeVarying,end:transition_end},_e[Symbol.iterator]=selection_prototype[Symbol.iterator],_e);function cubicInOut(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var defaultTiming={time:null,delay:0,duration:250,ease:cubicInOut};function inherit(t,e){var n;while(!(n=t.__transition)||!(n=n[e])){if(!(t=t.parentNode)){throw new Error("transition ".concat(e," not found"))}}return n}function selection_transition(t){var e,n;if(t instanceof Transition){e=t._id,t=t._name}else{e=newId(),(n=defaultTiming).time=now(),t=t==null?null:t+""}for(var r=this._groups,i=r.length,o=0;o<i;++o){for(var a=r[o],s=a.length,u,l=0;l<s;++l){if(u=a[l]){schedule(u,t,e,l,a,n||inherit(u,e))}}}return new Transition(r,this._parents,t,e)}selection.prototype.interrupt=selection_interrupt;selection.prototype.transition=selection_transition;var constant=function(t){return function(){return t}};function ZoomEvent(t,e){var n=e.sourceEvent,r=e.target,i=e.transform,o=e.dispatch;Object.defineProperties(this,{type:{value:t,enumerable:true,configurable:true},sourceEvent:{value:n,enumerable:true,configurable:true},target:{value:r,enumerable:true,configurable:true},transform:{value:i,enumerable:true,configurable:true},_:{value:o}})}function Transform(t,e,n){this.k=t;this.x=e;this.y=n}Transform.prototype={constructor:Transform,scale:function(t){return t===1?this:new Transform(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Transform(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var identity=new Transform(1,0,0);function nopropagation(t){t.stopImmediatePropagation()}function noevent(t){t.preventDefault();t.stopImmediatePropagation()}function defaultFilter(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function defaultExtent(){var t=this;if(t instanceof SVGElement){t=t.ownerSVGElement||t;if(t.hasAttribute("viewBox")){t=t.viewBox.baseVal;return[[t.x,t.y],[t.x+t.width,t.y+t.height]]}return[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}return[[0,0],[t.clientWidth,t.clientHeight]]}function defaultTransform(){return this.__zoom||identity}function defaultWheelDelta(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function defaultTouchable(){return navigator.maxTouchPoints||"ontouchstart"in this}function defaultConstrain(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],a=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function zoom(){var t=defaultFilter,e=defaultExtent,n=defaultConstrain,r=defaultWheelDelta,i=defaultTouchable,o=[0,Infinity],a=[[-Infinity,-Infinity],[Infinity,Infinity]],s=250,u=interpolateZoom,l=dispatch("start","zoom","end"),c,f,h,p=500,d=150,v=0,y=10;function m(t){t.property("__zoom",defaultTransform).on("wheel.zoom",C,{passive:false}).on("mousedown.zoom",k).on("dblclick.zoom",S).filter(i).on("touchstart.zoom",A).on("touchmove.zoom",E).on("touchend.zoom touchcancel.zoom",N).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(t,e,n,r){var i=t.selection?t.selection():t;i.property("__zoom",defaultTransform);if(t!==i){b(t,e,n,r)}else{i.interrupt().each((function(){x(this,arguments).event(r).start().zoom(null,typeof e==="function"?e.apply(this,arguments):e).end()}))}};m.scaleBy=function(t,e,n,r){m.scaleTo(t,(function(){var t=this.__zoom.k,n=typeof e==="function"?e.apply(this,arguments):e;return t*n}),n,r)};m.scaleTo=function(t,r,i,o){m.transform(t,(function(){var t=e.apply(this,arguments),o=this.__zoom,s=i==null?w(t):typeof i==="function"?i.apply(this,arguments):i,u=o.invert(s),l=typeof r==="function"?r.apply(this,arguments):r;return n(_(g(o,l),s,u),t,a)}),i,o)};m.translateBy=function(t,r,i,o){m.transform(t,(function(){return n(this.__zoom.translate(typeof r==="function"?r.apply(this,arguments):r,typeof i==="function"?i.apply(this,arguments):i),e.apply(this,arguments),a)}),null,o)};m.translateTo=function(t,r,i,o,s){m.transform(t,(function(){var t=e.apply(this,arguments),s=this.__zoom,u=o==null?w(t):typeof o==="function"?o.apply(this,arguments):o;return n(identity.translate(u[0],u[1]).scale(s.k).translate(typeof r==="function"?-r.apply(this,arguments):-r,typeof i==="function"?-i.apply(this,arguments):-i),t,a)}),o,s)};function g(t,e){e=Math.max(o[0],Math.min(o[1],e));return e===t.k?t:new Transform(e,t.x,t.y)}function _(t,e,n){var r=e[0]-n[0]*t.k,i=e[1]-n[1]*t.k;return r===t.x&&i===t.y?t:new Transform(t.k,r,i)}function w(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function b(t,n,r,i){t.on("start.zoom",(function(){x(this,arguments).event(i).start()})).on("interrupt.zoom end.zoom",(function(){x(this,arguments).event(i).end()})).tween("zoom",(function(){var t=this,o=arguments,a=x(t,o).event(i),s=e.apply(t,o),l=r==null?w(s):typeof r==="function"?r.apply(t,o):r,c=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),f=t.__zoom,h=typeof n==="function"?n.apply(t,o):n,p=u(f.invert(l).concat(c/f.k),h.invert(l).concat(c/h.k));return function(t){if(t===1)t=h;else{var e=p(t),n=c/e[2];t=new Transform(n,l[0]-e[0]*n,l[1]-e[1]*n)}a.zoom(null,t)}}))}function x(t,e,n){return!n&&t.__zooming||new T(t,e)}function T(t,n){this.that=t;this.args=n;this.active=0;this.sourceEvent=null;this.extent=e.apply(t,n);this.taps=0}T.prototype={event:function(t){if(t)this.sourceEvent=t;return this},start:function(){if(++this.active===1){this.that.__zooming=this;this.emit("start")}return this},zoom:function(t,e){if(this.mouse&&t!=="mouse")this.mouse[1]=e.invert(this.mouse[0]);if(this.touch0&&t!=="touch")this.touch0[1]=e.invert(this.touch0[0]);if(this.touch1&&t!=="touch")this.touch1[1]=e.invert(this.touch1[0]);this.that.__zoom=e;this.emit("zoom");return this},end:function(){if(--this.active===0){delete this.that.__zooming;this.emit("end")}return this},emit:function(t){var e=select(this.that).datum();l.call(t,this.that,new ZoomEvent(t,{sourceEvent:this.sourceEvent,target:m,type:t,transform:this.that.__zoom,dispatch:l}),e)}};function C(e){var i=[];for(var s=1;s<arguments.length;s++){i[s-1]=arguments[s]}if(!t.apply(this,arguments))return;var u=x(this,i).event(e),l=this.__zoom,c=Math.max(o[0],Math.min(o[1],l.k*Math.pow(2,r.apply(this,arguments)))),f=pointer(e);if(u.wheel){if(u.mouse[0][0]!==f[0]||u.mouse[0][1]!==f[1]){u.mouse[1]=l.invert(u.mouse[0]=f)}clearTimeout(u.wheel)}else if(l.k===c)return;else{u.mouse=[f,l.invert(f)];interrupt(this);u.start()}noevent(e);u.wheel=setTimeout(h,d);u.zoom("mouse",n(_(g(l,c),u.mouse[0],u.mouse[1]),u.extent,a));function h(){u.wheel=null;u.end()}}function k(e){var r=[];for(var i=1;i<arguments.length;i++){r[i-1]=arguments[i]}if(h||!t.apply(this,arguments))return;var o=e.currentTarget,s=x(this,r,true).event(e),u=select(e.view).on("mousemove.zoom",p,true).on("mouseup.zoom",d,true),l=pointer(e,o),c=e.clientX,f=e.clientY;dragDisable(e.view);nopropagation(e);s.mouse=[l,this.__zoom.invert(l)];interrupt(this);s.start();function p(t){noevent(t);if(!s.moved){var e=t.clientX-c,r=t.clientY-f;s.moved=e*e+r*r>v}s.event(t).zoom("mouse",n(_(s.that.__zoom,s.mouse[0]=pointer(t,o),s.mouse[1]),s.extent,a))}function d(t){u.on("mousemove.zoom mouseup.zoom",null);yesdrag(t.view,s.moved);noevent(t);s.event(t).end()}}function S(r){var i=[];for(var o=1;o<arguments.length;o++){i[o-1]=arguments[o]}if(!t.apply(this,arguments))return;var u=this.__zoom,l=pointer(r.changedTouches?r.changedTouches[0]:r,this),c=u.invert(l),f=u.k*(r.shiftKey?.5:2),h=n(_(g(u,f),l,c),e.apply(this,i),a);noevent(r);if(s>0)select(this).transition().duration(s).call(b,h,l,r);else select(this).call(m.transform,h,l,r)}function A(e){var n=[];for(var r=1;r<arguments.length;r++){n[r-1]=arguments[r]}if(!t.apply(this,arguments))return;var i=e.touches,o=i.length,a=x(this,n,e.changedTouches.length===o).event(e),s,u,l,h;nopropagation(e);for(u=0;u<o;++u){l=i[u],h=pointer(l,this);h=[h,this.__zoom.invert(h),l.identifier];if(!a.touch0)a.touch0=h,s=true,a.taps=1+!!c;else if(!a.touch1&&a.touch0[2]!==h[2])a.touch1=h,a.taps=0}if(c)c=clearTimeout(c);if(s){if(a.taps<2)f=h[0],c=setTimeout((function(){c=null}),p);interrupt(this);a.start()}}function E(t){var e=[];for(var r=1;r<arguments.length;r++){e[r-1]=arguments[r]}if(!this.__zooming)return;var i=x(this,e).event(t),o=t.changedTouches,s=o.length,u,l,c,f;noevent(t);for(u=0;u<s;++u){l=o[u],c=pointer(l,this);if(i.touch0&&i.touch0[2]===l.identifier)i.touch0[0]=c;else if(i.touch1&&i.touch1[2]===l.identifier)i.touch1[0]=c}l=i.that.__zoom;if(i.touch1){var h=i.touch0[0],p=i.touch0[1],d=i.touch1[0],v=i.touch1[1],y=(y=d[0]-h[0])*y+(y=d[1]-h[1])*y,m=(m=v[0]-p[0])*m+(m=v[1]-p[1])*m;l=g(l,Math.sqrt(y/m));c=[(h[0]+d[0])/2,(h[1]+d[1])/2];f=[(p[0]+v[0])/2,(p[1]+v[1])/2]}else if(i.touch0)c=i.touch0[0],f=i.touch0[1];else return;i.zoom("touch",n(_(l,c,f),i.extent,a))}function N(t){var e=[];for(var n=1;n<arguments.length;n++){e[n-1]=arguments[n]}if(!this.__zooming)return;var r=x(this,e).event(t),i=t.changedTouches,o=i.length,a,s;nopropagation(t);if(h)clearTimeout(h);h=setTimeout((function(){h=null}),p);for(a=0;a<o;++a){s=i[a];if(r.touch0&&r.touch0[2]===s.identifier)delete r.touch0;else if(r.touch1&&r.touch1[2]===s.identifier)delete r.touch1}if(r.touch1&&!r.touch0)r.touch0=r.touch1,delete r.touch1;if(r.touch0)r.touch0[1]=this.__zoom.invert(r.touch0[0]);else{r.end();if(r.taps===2){s=pointer(s,this);if(Math.hypot(f[0]-s[0],f[1]-s[1])<y){var u=select(this).on("dblclick.zoom");if(u)u.apply(this,arguments)}}}}m.wheelDelta=function(t){return arguments.length?(r=typeof t==="function"?t:constant(+t),m):r};m.filter=function(e){return arguments.length?(t=typeof e==="function"?e:constant(!!e),m):t};m.touchable=function(t){return arguments.length?(i=typeof t==="function"?t:constant(!!t),m):i};m.extent=function(t){return arguments.length?(e=typeof t==="function"?t:constant([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),m):e};m.scaleExtent=function(t){return arguments.length?(o[0]=+t[0],o[1]=+t[1],m):[o[0],o[1]]};m.translateExtent=function(t){return arguments.length?(a[0][0]=+t[0][0],a[1][0]=+t[1][0],a[0][1]=+t[0][1],a[1][1]=+t[1][1],m):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]};m.constrain=function(t){return arguments.length?(n=t,m):n};m.duration=function(t){return arguments.length?(s=+t,m):s};m.interpolate=function(t){return arguments.length?(u=t,m):u};m.on=function(){var t=l.on.apply(l,arguments);return t===l?m:t};m.clickDistance=function(t){return arguments.length?(v=(t=+t)*t,m):Math.sqrt(v)};m.tapDistance=function(t){return arguments.length?(y=+t,m):y};return m}var initGraph=function(t){var e=t.getBoundingClientRect();var n=e.height>=120?e.height:600;var r=e.width>=100?e.width:600;var i=select(t).append("svg").attr("viewBox",[-r/2,-n/2,r,n].join(" "));var o=i.append("g");var a=zoom().on("zoom",(function(t){var e=t.transform;o.attr("transform",e)}));i.call(a);i.append("svg:defs").selectAll("marker").data(["end"]).enter().append("svg:marker").attr("id",String).attr("viewBox","0 -6 12 12").attr("refX",24).attr("refY",0).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto").append("svg:path").attr("d","M0,-6L12,0L0,6");return{height:n,width:r,svg:o}};var getNodeX=function(t){var e;if(typeof t==="number"){return t}else if(typeof t==="string"){return Number.parseInt(t,10)}return(e=t.x)!==null&&e!==void 0?e:0};var getNodeY=function(t){var e;if(typeof t==="number"){return t}else if(typeof t==="string"){return Number.parseInt(t,10)}return(e=t.y)!==null&&e!==void 0?e:0};var getResourceLabel=function(t){switch(t.type){case"Module":{return"".concat(t.language," ").concat(t.name)}case"Source":{return"".concat(t.type," ").concat(t.name)}case"Symbol":{return"".concat(t.kind," ").concat(t.name)}case"Node":{return t.kind}case"File":{return t.path}case"Url":{return t.url}}};var getRelationLabel=function(t){switch(t.type){case"Assign":case"Read":case"Use":{return"".concat(t.type,"s")}case"Convert":case"Import":{return"".concat(t.type,"s").concat(t.auto?" (auto)":"")}default:{return"".concat(t.type,"s")}}};var getResourceSymbol=function(t,e){if(e===void 0){e=512}switch(t.type){case"Node":{return Symbol$1(symbolTriangle,e)}case"Symbol":{return Symbol$1(symbolDiamond,e)}case"Source":{return Symbol$1(symbolStar,e)}case"File":{return Symbol$1(symbolWye,e)}case"Url":{return Symbol$1(symbolSquare,e)}case"Module":default:{return Symbol$1(symbolCircle,e)}}};var defaultProjectGraphCss=":host,stencila-project-graph,.projectGraph{display:block;height:100%;width:100%;--graph-background:#fff;--graphColor-text:var(--color-key, #000);--graphColor-link:var(--color-neutral-100);--graphColor-default:var(--color-neutral-300);--graphColor-file:#ffec6f;--graphColor-source:#ccebc5;--graphColor-symbol:#bc80bd;--graphColor-module:#d9d9d9;--graphColor-node:#fccde5;--graphColor-url:#80b1d3;--graphColor-file:#b3de69;--graphColor-file:#fdb462;--graphColor-file:#fb7f72;--graphColor-file:#bebada}.hullContainer path{fill:var(--graphColor-file);opacity:0.2}.linkContainer line{stroke:var(--graphColor-link);stroke-width:2}.groupLinkContainer text,.groupLinkContainer line{opacity:0}.groupLinkContainer line{stroke:var(--graphColor-symbol)}.projectGraph:hover .groupLinkContainer text,.projectGraph:hover .groupLinkContainer line{opacity:1}.linkContainer text{font-size:0.5rem}svg{cursor:move;height:100%;width:100%}svg text{fill:var(--color-key);font-size:0.75rem;font-family:var(--font-family-mono);text-anchor:middle}svg text.textBackdrop{stroke:var(--graph-background);stroke-width:2px}svg circle,svg path{fill:var(--graphColor-default)}svg g{cursor:-webkit-grab;cursor:grab}svg g:active{cursor:-webkit-grabbing;cursor:grabbing}svg g.File text,svg g.Source text{font-size:1rem;font-weight:bold}svg path.File{fill:var(--graphColor-file)}svg path.Source{stroke:var(--graphColor-source);stroke-width:1}svg path.Symbol{fill:var(--graphColor-symbol)}svg path.Module{fill:var(--graphColor-module)}svg path.Node{fill:var(--graphColor-node)}svg path.Url{fill:var(--graphColor-url)}";var projectGraphMaterialCss="";var ProjectGraph=function(){function t(t){var e=this;registerInstance(this,t);this.drawGraph=function(t){var n,r,i;var o=e.graphRef.svg;var a=graphToGroupedGraph(t);var s=forceSimulation(a.nodes).force("link",forceLink(a.links).strength((function(t){return isInterGroupLink(t.source,t.target)||hasKind(t.source)&&t.source.kind==="Link"||hasKind(t.target)&&t.target.kind==="Link"?1:.375})).iterations(2).distance((function(t){return hasKind(t.source)&&t.source.kind==="Link"||hasKind(t.target)&&t.target.kind==="Link"?0:30})).iterations(2)).force("link:groups",forceLink(a.groupLinks).strength((function(t){return hasKind(t.source)&&t.source.kind==="Link"||hasKind(t.target)&&t.target.kind==="Link"?1:.375})).iterations(3)).force("charge",forceManyBody().strength((function(t){return t.type==="File"?-100:-1500})).distanceMin(10).distanceMax(1500)).force("collision",forceCollide(64).strength(1).iterations(4)).force("x",forceX().strength(.02)).force("y",forceY().strength(.02)).force("center",forceCenter()).velocityDecay(.4).alphaDecay(.05);var u=function(t,e){delete e.fx;delete e.fy;s.alpha(.5).restart()};var l=drag().on("drag",(function(t,e){e.fx=t.x;e.fy=t.y;s.alpha(.05).restart()}));var c=(n=e.hullContainer)!==null&&n!==void 0?n:o.append("g").attr("class","hullContainer");if(!e.hullContainer){e.hullContainer=c}var f=(r=e.linkContainer)!==null&&r!==void 0?r:o.append("g").attr("class","linkContainer");if(!e.linkContainer){e.linkContainer=f}var h=f.selectAll("g").data(a.links).join((function(t){var e=t.append("g");e.append("line").attr("marker-end","url(#end)");e.append("text").text((function(t){return getRelationLabel(t.relation)}));return e}));var p=(i=e.nodeContainer)!==null&&i!==void 0?i:o.append("g");if(!e.nodeContainer){e.nodeContainer=p}var d=function(t){var e;if(t===undefined||typeof t==="string"||typeof t==="number"){return""}var n=32;var r=a.groupLinks.filter((function(e){return e.group===t.path}));var i=r.length===0?[]:[[-n,-n],[n,-n],[n,n],[0,n]];var o=getNodeX(t);var s=getNodeY(t);var u=polygonHull(r.reduce((function(t,e){var r=getNodeX(e.source);var i=getNodeY(e.source);return __spreadArray(__spreadArray([],t,true),[[r-o-n,i-s-n],[r-o-n,i-s+n],[r-o+n,i-s-n],[r-o+n,i-s+n]],false)}),i));return u?(e=line().curve(curveBasisClosed)(u))!==null&&e!==void 0?e:"":""};var v=c.selectAll("path").data(a.groups).join("path").attr("d",(function(t){var e;return(e=d(t))!==null&&e!==void 0?e:""}));var y=p.selectAll("g").data(a.nodes).join((function(t){var e=t.append("g");e.append("path").attr("d",(function(t){return getResourceSymbol(t)(t.type==="File"?1024:512)})).attr("class",(function(t){return hasKind(t)?"".concat(t.type," ").concat(t.kind):t.type}));e.append("text").attr("class","textBackdrop").attr("dy",".35em").text(getResourceLabel).append("text").exit();e.append("text").attr("dy",".35em").text(getResourceLabel).exit();e.append("title").text((function(t){return t.type}));return e})).attr("class",(function(t){return hasKind(t)?"".concat(t.type," ").concat(t.kind):t.type})).on("click",u).call(l);s.on("tick",(function(){h.select("line").attr("x1",(function(t){var e=t.source;var n;return typeof e==="object"?(n=e.x)!==null&&n!==void 0?n:0:e})).attr("y1",(function(t){var e=t.source;var n;return typeof e==="object"?(n=e.y)!==null&&n!==void 0?n:0:e})).attr("x2",(function(t){var e=t.target;var n;return typeof e==="object"?(n=e.x)!==null&&n!==void 0?n:0:e})).attr("y2",(function(t){var e=t.target;var n;return typeof e==="object"?(n=e.y)!==null&&n!==void 0?n:0:e}));h.select("text").attr("transform",(function(t){if(typeof t.source==="object"&&typeof t.source.y==="number"&&typeof t.source.x==="number"&&typeof t.target==="object"&&typeof t.target.y==="number"&&typeof t.target.x==="number"){return"translate(".concat(t.source.x-(t.source.x-t.target.x)/2,", ").concat(t.source.y-(t.source.y-t.target.y)/2,")")}return""}));y.attr("transform",(function(t){var e=t.x,n=t.y;return"translate(".concat(e!==null&&e!==void 0?e:0,", ").concat(n!==null&&n!==void 0?n:0,")")}));v.attr("transform",(function(t){var e,n;return"translate(".concat((e=t.x)!==null&&e!==void 0?e:0,", ").concat((n=t.y)!==null&&n!==void 0?n:0,")")})).attr("d",(function(t){var e;return(e=d(t))!==null&&e!==void 0?e:""}))}))}}t.prototype.updateGraph=function(t){this.drawGraph(t)};t.prototype.componentDidLoad=function(){if(this.el){this.graphRef=initGraph(this.el);this.drawGraph(this.graph)}};t.prototype.render=function(){var t=this;return h(Host,null,h("div",{ref:function(e){return t.el=e},class:"projectGraph"}))};Object.defineProperty(t,"watchers",{get:function(){return{graph:["updateGraph"]}},enumerable:false,configurable:true});return t}();ProjectGraph.style={default:defaultProjectGraphCss,material:projectGraphMaterialCss};export{ProjectGraph as stencila_project_graph};
//# sourceMappingURL=stencila-project-graph.entry.js.map