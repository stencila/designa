{"version":3,"sources":["node_modules/animate-presence/dist/collection/utils/index.js"],"names":["presence","element","hooks","afterSelf","Promise","resolve","__awaiter","listen","name","addEventListener","concat","onEnd","event","_a","target","removeEventListener","this","dataset","hold","window","mo","MutationObserver","_b","record","observe","attributeFilter","attributes","getAnimations","all","map","anim","finished","then","getComputedStyle","animationName","animationDuration","transitionDuration","kebab","str","replace","toLowerCase","setCustomProperties","el","props","customProps","convertToCustomProperties","_i","Object","entries","length","_c","key","value","style","setProperty","o","prefix","result","toString","Array","isArray","endsWith","filter","Boolean","join","isHTMLElement","node","nodeType","ELEMENT_NODE","tagName","hasData","closest","selector","base","closestFrom","document","found","getRootNode","host","e","getTopLevelChildren","from","querySelectorAll","nested","includes","exitChildren","exit","enterChildren","enter","injectGlobalStyle","ss","head","querySelector","createElement","apGlobal","textContent","appendChild"],"mappings":"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","sourcesContent":["export * from './presence-handler';\r\nexport const nextTick = /*@__PURE__*/ (cb) => Promise.resolve().then(cb);\r\nexport const presence = (element, hooks = {}) => {\r\n    const { afterSelf } = hooks;\r\n    return new Promise(async (resolve) => {\r\n        var _a;\r\n        if (typeof element.dataset.hold !== 'undefined' &&\r\n            'MutationObserver' in window) {\r\n            const mo = new MutationObserver(([record]) => {\r\n                var _a;\r\n                if (typeof record.target.dataset.hold === 'undefined') {\r\n                    (_a = afterSelf) === null || _a === void 0 ? void 0 : _a();\r\n                    resolve();\r\n                }\r\n            });\r\n            mo.observe(element, {\r\n                attributeFilter: ['data-hold'],\r\n                attributes: true,\r\n            });\r\n            return;\r\n        }\r\n        // If WAAPI getAnimations exists, use that\r\n        if (typeof element.getAnimations !== 'undefined') {\r\n            Promise.all(element.getAnimations().map(anim => anim.finished)).then(() => {\r\n                var _a;\r\n                (_a = afterSelf) === null || _a === void 0 ? void 0 : _a();\r\n                resolve();\r\n                return;\r\n            });\r\n        }\r\n        else {\r\n            // Otherwise grab the computed style to check what listeners to attach\r\n            // or bail out if there aren't any animations/transitions set\r\n            const { animationName, animationDuration, transitionDuration, } = window.getComputedStyle(element);\r\n            if (animationName !== 'none' && animationDuration !== '0s') {\r\n                listen('animation');\r\n            }\r\n            else if (transitionDuration !== '0s') {\r\n                listen('transition');\r\n            }\r\n            else {\r\n                (_a = afterSelf) === null || _a === void 0 ? void 0 : _a();\r\n                resolve();\r\n            }\r\n            // }\r\n            function listen(name) {\r\n                element.addEventListener(`${name}end`, onEnd(name));\r\n            }\r\n            function onEnd(name) {\r\n                return function (event) {\r\n                    var _a;\r\n                    if (event.target !== element)\r\n                        return;\r\n                    element.removeEventListener(`${name}end`, this);\r\n                    (_a = afterSelf) === null || _a === void 0 ? void 0 : _a();\r\n                    resolve();\r\n                    return;\r\n                };\r\n            }\r\n        }\r\n    });\r\n};\r\nconst kebab = (str) => str.replace(/([A-Z])/g, `-$1`).toLowerCase();\r\nexport const setCustomProperties = (el, props) => {\r\n    const customProps = convertToCustomProperties(props);\r\n    for (const [key, value] of Object.entries(customProps)) {\r\n        el.style.setProperty(key, value);\r\n    }\r\n};\r\nconst convertToCustomProperties = (o, prefix = '--', result = {}) => {\r\n    if (o == null)\r\n        return result;\r\n    switch (typeof o) {\r\n        case 'string': {\r\n            result[kebab(prefix)] = o;\r\n            return result;\r\n        }\r\n        case 'number': {\r\n            result[kebab(prefix)] = o.toString(10);\r\n            return result;\r\n        }\r\n        case 'boolean': {\r\n            result[kebab(prefix)] = o ? `1` : `0`;\r\n            return result;\r\n        }\r\n        default:\r\n            break;\r\n    }\r\n    if (Array.isArray(o) || typeof o === 'object') {\r\n        for (let [key, value] of Object.entries(o)) {\r\n            const name = [prefix, !prefix.endsWith('-') && '-', key]\r\n                .filter(Boolean)\r\n                .join('');\r\n            convertToCustomProperties(value, name, result);\r\n        }\r\n        return result;\r\n    }\r\n    return result;\r\n};\r\nexport const isHTMLElement = (node) => node &&\r\n    node.nodeType === node.ELEMENT_NODE &&\r\n    typeof node.tagName !== 'undefined';\r\nexport const hasData = (el, key) => typeof el.dataset[key] !== 'undefined';\r\nexport function closest(selector, base = this) {\r\n    try {\r\n        function closestFrom(el) {\r\n            if (!el || el === document || el === window)\r\n                return null;\r\n            let found = el.closest(selector);\r\n            return found\r\n                ? found\r\n                : closestFrom(el.getRootNode().host);\r\n        }\r\n        return closestFrom(base);\r\n    }\r\n    catch (e) {\r\n        return null;\r\n    }\r\n}\r\nexport const getTopLevelChildren = (el) => {\r\n    const all = Array.from(el.querySelectorAll('animate-presence'));\r\n    const nested = Array.from(el.querySelectorAll(':scope animate-presence animate-presence'));\r\n    return all.filter(el => !nested.includes(el));\r\n};\r\nexport const exitChildren = async (el) => {\r\n    return Promise.all(getTopLevelChildren(el).map((el) => el.exit()));\r\n};\r\nexport const enterChildren = async (el) => {\r\n    return Promise.all(getTopLevelChildren(el).map((el) => el.enter()));\r\n};\r\nexport const injectGlobalStyle = () => {\r\n    let ss = document.head.querySelector('[data-ap-global]');\r\n    if (ss)\r\n        return;\r\n    ss = document.createElement('style');\r\n    ss.dataset.apGlobal = '';\r\n    ss.textContent = `animate-presence>[data-enter][style*=\"--i:\"],animate-presence>[data-exit][style*=\"--i:\"]{animation-fill-mode:both;}`;\r\n    document.head.appendChild(ss);\r\n};\r\n"]}